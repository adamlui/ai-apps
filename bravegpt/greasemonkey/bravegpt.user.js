// ==UserScript==
// @name                BraveGPT ü§ñ
// @description         Adds ChatGPT answers to Brave Search sidebar (powered by GPT-4!)
// @description:af      Voeg ChatGPT-antwoorde by Brave Search-kantbalk by (aangedryf deur GPT-4!)
// @description:am      ·ã®ChatGPT ·àò·àç·àµ·äì·ãà·à≠·âÉ·àà·âΩ ·ä•·à≠·àµ·ãé·äï ·â†Brave Search ·ã®·â∞·ãà·à∞·äë ·åà·åΩ·â≥·ãé·âΩ·äï (·â∞·åç·â£·à≠ ·â†GPT-4!) ·ã≠·å®·àù·à©
// @description:ar      Ÿäÿ∂ŸäŸÅ ÿ•ÿ¨ÿßÿ®ÿßÿ™ ChatGPT ÿ•ŸÑŸâ ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑÿ¨ÿßŸÜÿ®Ÿä ŸÅŸä Brave (ŸÖÿØÿπŸàŸÖ ÿ®Ÿàÿßÿ≥ÿ∑ÿ© GPT-4!)
// @description:az      ChatGPT cavablarƒ±nƒ± Brave Axtarƒ±≈ü yan panelin…ô …ôlav…ô edir (GPT-4 il…ô g√ºcl…ôndirilmi≈ü!)
// @description:be      –î–∞–¥–∞–µ –∞–¥–∫–∞–∑—ã ChatGPT –¥–∞ –±–∞–∫–∞–≤–æ–π –±–∞–∫–æ–≤–∞–π –ø–∞–Ω—ç–ª—ñ Brave Search (–ø–∞–¥—Ç—Ä—ã–º–ª—ñ–≤–∞–µ—Ü—Ü–∞ GPT-4!)
// @description:bem      Aziya ChatGPT ndalama ku Brave Search sidebar (muma GPT-4!)
// @description:bg      –î–æ–±–∞–≤—è ChatGPT –æ—Ç–≥–æ–≤–æ—Ä–∏ –∫—ä–º —Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—Ç–∞ –ª–µ–Ω—Ç–∞ –Ω–∞ Brave Search (–∑–∞–¥–≤–∏–∂–≤–∞–Ω –æ—Ç GPT-4!)
// @description:bn      Brave ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶∏‡¶æ‡¶á‡¶°‡¶¨‡¶æ‡¶∞‡ßá ChatGPT ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá (‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡¶°‡ßá GPT-4 ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ!)
// @description:bo      ChatGPT ‡Ω£‡Ω∫‡ºã‡Ωñ‡Ω¶‡ºã‡Ωö‡Ωë‡ºã‡Ωñ‡Ωë‡ΩÇ‡ºã‡Ω¶‡æê‡æ±‡Ω∫‡Ωë‡ºã‡Ωë‡Ω∫‡ºã‡Ωñ‡Ωü‡Ω¥‡Ωò‡ºã‡Ω¶‡æí‡æ≤‡Ω≤‡ΩÇ‡ºã‡Ωì‡ΩÑ‡ºã Brave Search ‡ΩÇ‡Ωì‡Ω¶‡ºã‡Ωî‡ºã‡Ωñ‡Ω¢‡æó‡Ωº‡Ωë‡ºã‡Ωî‡ºç (GPT-4‡Ωñ‡æ±‡ºã‡Ωñ‡ºã‡Ωñ‡Ω¢‡æí‡æ±‡Ω¥‡Ωë‡ºã‡Ωî‡ºã!)
// @description:bs      Dodaje odgovore ChatGPT-a na boƒçnu traku Brave pretrage (pokreƒáe GPT-4!)
// @description:ca      Afegeix respostes de ChatGPT a la barra lateral de Brave Search (amb tecnologia GPT-4!)
// @description:ceb      Nagdugang sa mga tubag sa ChatGPT sa sidebar sa Brave Search (gamit ang GPT-4!)
// @description:ckb      Ÿà€ïÿ±⁄Øÿ±ÿ™ŸÜ€å ⁄ïÿßÿ≥ÿ™€ïŸàÿÆ€Ü€å€å ChatGPT ÿ®€Ü Ÿæ€ïŸÜÿ¨€ïÿ±€ï€å ŸÑÿßÿ™€å ŸÑ€ï Brave (ÿ®€ï Ÿæÿ¥ÿ™⁄Ø€åÿ±€å€å€å GPT-4!)
// @description:cs      P≈ôid√°v√° odpovƒõdi od ChatGPT do boƒçn√≠ho panelu Brave Search (poh√°nƒõno GPT-4!)
// @description:cy      Ychwanega Atebion ChatGPT i'r bar ochr Brave Search (a gryfhawyd gan GPT-4!)
// @description:da      Tilf√∏jer ChatGPT-svar til Brave Search-sidelinjen (drevet af GPT-4!)
// @description:de      F√ºgt ChatGPT-Antworten zur Seitenleiste der Brave-Suche hinzu (betrieben mit GPT-4!)
// @description:dv      ChatGPT ﬁáﬁ¶ﬁáﬁ®ﬁÜﬁ∞ﬁêﬁ≠ﬁìﬁ™ﬁéﬁ¨ ﬁñﬁ¶ﬁàﬁßﬁÑﬁ™ﬁéﬁ¨ Brave Search ﬁêﬁ¶ﬁáﬁ®ﬁìﬁ™ﬁéﬁ¶ﬁáﬁ® ﬁäﬁØﬁÉﬁ™ﬁàﬁßﬁÉﬁ¶ﬁáﬁ™ﬁéﬁ¨ ﬁëﬁ¶ﬁáﬁ™ﬁÇﬁ∞ (ﬁáﬁ¨ﬁÜﬁ¶ﬁáﬁ™ﬁÇﬁ∞ﬁáﬁ¶ﬁáﬁ® ﬁàﬁ¶ﬁÜﬁ® GPT-4!)
// @description:dz      ChatGPT ‡Ωë‡ΩÑ‡ºã Brave ‡Ω†‡Ωñ‡æ±‡Ω¥‡ΩÑ‡ºã‡ΩÜ‡Ω¥‡ΩÑ‡ºã‡Ω£‡Ω∫‡ºã‡Ωñ‡Ω¶‡ºã‡Ω†‡Ωê‡Ω¥‡Ω¶‡ºã‡Ωî‡ºã‡Ω£‡ΩÇ‡Ω¶‡ºã‡Ω¶‡æ§‡æ±‡Ωº‡Ωë‡ºã‡Ω¶‡æí‡æ≤‡Ω≤‡ΩÇ‡ºã‡Ωî‡ºã‡Ωñ‡Ω¢‡æü‡ΩÇ‡Ω¶‡ºã‡Ωñ‡Ωû‡Ω¥‡ΩÇ‡Ω¶‡ºç (GPT-4‡ºã‡ΩÇ‡Ω≤‡ºã‡Ω¶‡æí‡æ≤‡Ω≤‡ΩÇ‡ºã‡Ωë‡ΩÑ‡ºã!)
// @description:el      Œ†œÅŒøœÉŒ∏Œ≠œÑŒµŒπ Œ±œÄŒ±ŒΩœÑŒÆœÉŒµŒπœÇ ChatGPT œÉœÑŒ∑ŒΩ œÄŒªŒ±œäŒΩŒÆ Œ≥œÅŒ±ŒºŒºŒÆ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑œÇ œÑŒøœÖ Brave (ŒºŒµ œÑŒ∑ŒΩ œÖœÄŒøœÉœÑŒÆœÅŒπŒæŒ∑ œÑŒøœÖ GPT-4!)
// @description:eo      Aldonas ChatGPT-respondojn al la flanka breto de Brave Serƒâo (funkciigita de GPT-4!)
// @description:es      Agrega respuestas de ChatGPT a la barra lateral de Brave Search (¬°impulsado por GPT-4!)
// @description:et      Lisab ChatGPT vastused Brave Search k√ºljepaneelile (toetatud GPT-4 poolt!)
// @description:eu      Gehitu ChatGPT erantzunak Brave Search aldeko alderakoan (GPT-4ren aurrerapenean oinarrituta!)
// @description:fa      ChatGPT Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß ÿ±ÿß ÿ®Ÿá ŸÜŸàÿßÿ± ⁄©ŸÜÿßÿ±€å ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å Brave ÿßÿ∂ÿßŸÅŸá ŸÖ€å‚Äå⁄©ŸÜÿØ (ŸÇÿØÿ±ÿ™ ⁄Øÿ±ŸÅÿ™Ÿá ÿ¥ÿØŸá ÿ™Ÿàÿ≥ÿ∑ GPT-4!)
// @description:fi      Lis√§√§ ChatGPT-vastaukset Brave-haun sivupalkkiin (k√§ytt√§en GPT-4!)
// @description:fo      Leggur ChatGPT-svar til Brave leitarstika s√≠√∞upall (drivin av GPT-4!)
// @description:fr      Ajoute les r√©ponses de ChatGPT √† la barre lat√©rale de Brave Search (propuls√© par GPT-4 !)
// @description:fr-CA   Ajoute les r√©ponses de ChatGPT √† la barre lat√©rale de Brave Search (propuls√© par GPT-4 !)
// @description:gd      Cur Freagairtean ChatGPT ris an t-siostam-c√πlaiche airson Innse Brave (le GPT-4 air!)
// @description:gl      Engade respostas de ChatGPT √° barra lateral de busca de Brave (potenciado por GPT-4!)
// @description:gu      ‡™¨‡´ç‡™∞‡´á‡™µ ‡™∂‡´ã‡™ß‡™®‡™™‡™ü‡™®‡™Æ‡™æ‡™Ç ChatGPT ‡™ú‡™µ‡™æ‡™¨‡´ã ‡™â‡™Æ‡´á‡™∞‡´á ‡™õ‡´á (‡™™‡™æ‡™µ‡™∞‡´ç‡™°‡™™‡´Å‡™Ç‡™ú GPT-4 ‡™¶‡´ç‡™µ‡™æ‡™∞‡™æ!)
// @description:haw     Ho ªoni i nƒÅ mana ªo ªi ªo ChatGPT i loko o ka papa kƒÅlai Brave Search (i ho ªohui  ªia e GPT-4!)
// @description:he      ◊û◊ï◊°◊ô◊£ ◊™◊©◊ï◊ë◊ï◊™ ◊©◊ú ChatGPT ◊ú◊°◊®◊í◊ú ◊î◊¶◊ì ◊©◊ú ◊ó◊ô◊§◊ï◊© Brave (◊û◊ï◊§◊¢◊ú ◊¢◊ú ◊ô◊ì◊ô GPT-4!)
// @description:hi      ‡§¨‡•ç‡§∞‡•á‡§µ ‡§∏‡§∞‡•ç‡§ö ‡§∏‡§æ‡§á‡§°‡§¨‡§æ‡§∞ ‡§Æ‡•á‡§Ç ChatGPT ‡§â‡§§‡•ç‡§§‡§∞ ‡§ú‡•ã‡§°‡§º‡§§‡§æ ‡§π‡•à (GPT-4 ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§!)
// @description:hr      Dodaje odgovore ChatGPT-a na boƒçnu traku Brave pretra≈æivanja (pokreƒáe GPT-4!)
// @description:ht      Ajoute ChatGPT repons nan sibbard Brave Search la (pouvwa pa GPT-4!)
// @description:hu      Hozz√°adja a ChatGPT v√°laszokat a Brave Search oldals√°vj√°hoz (GPT-4 √°ltal t√°mogatva!)
// @description:hy      ‘±’æ’•’¨’°÷Å’∂’∏÷Ç’¥ ’ß ChatGPT ’∫’°’ø’°’Ω’≠’°’∂’∂’•÷Ä’® Brave Search ’Ø’∏’≤’¥’´÷Å (’∏÷Ç’≤’≤’°’∞’°’µ’°÷Å’æ’°’Æ ’ß GPT-4-’´ ’¥’´’ª’∏÷Å’∏’æ!)
// @description:id      Menambahkan jawaban ChatGPT ke sidebar Brave Search (didukung oleh GPT-4!)
// @description:is      B√¶tir vi√∞ ChatGPT svari √≠ hli√∞arstiku Brave leitarinnar (rekinn me√∞ GPT-4!)
// @description:it      Aggiunge le risposte di ChatGPT alla barra laterale di Brave Search (alimentato da GPT-4!)
// @description:ja      Brave Ê§úÁ¥¢„Çµ„Ç§„Éâ„Éê„Éº„Å´ ChatGPT „ÅÆÂõûÁ≠î„ÇíËøΩÂä†„Åó„Åæ„ÅôÔºàGPT-4 „ÅßÂãï‰Ωú‰∏≠ÔºÅÔºâ
// @description:jv      Nambahake jawaban ChatGPT menyang sidebar Pencarian Brave (didheteni GPT-4!)
// @description:ka      ·Éì·Éê·Éê·Éõ·Éê·É¢·Éî·Éë·É° ChatGPT ·Éû·Éê·É°·É£·ÉÆ·Éî·Éë·É° Brave Search ·Éí·Éï·Éî·É†·Éì·Éò·É° ·Éõ·Éê·É†·ÉØ·Éï·Éú·Éò·Éï (GPT-4-·Éò·Éó ·Éí·Éê·Éõ·Éù·Éß·Éî·Éú·Éî·Éë·É£·Éö·Éò!)
// @description:kab     Izgan-d yemdanen n tebla·∏ç n Brave Search (…£ef GPT-4!)
// @description:kk      Brave —ñ–∑–¥–µ—É –∂–∞“ì–¥–∞–π—ã–Ω–¥–∞“ì—ã ChatGPT –∂–∞—É–∞–ø—Ç–∞—Ä—ã–Ω “õ–æ—Å–∞–¥—ã (GPT-4-–º–µ–Ω –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ!)
// @description:km      ·ûî·ûì·üí·ûê·üÇ·ûò·ûÖ·ûò·üí·ûõ·ûæ·ûô ChatGPT ·ûë·üÖ·ûö·ûî·û∂·ûö·ûÖ·üÜ·û†·üÄ·ûÑ·ûü·üí·ûú·üÇ·ûÑ·ûö·ûÄ·ûÄ·üí·ûõ·û∂·û†·û∂·ûì (·ûä·üÜ·ûé·ûæ·ûö·ûÄ·û∂·ûö·ûä·üÑ·ûô GPT-4!)
// @description:kn      ‡≤¨‡≥ç‡≤∞‡≥á‡≤µ‡≥ç ‡≤∂‡≥ã‡≤ß‡≤®‡≥Ü ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø‡≤ó‡≥Ü ChatGPT ‡≤â‡≤§‡≥ç‡≤§‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü (GPT-4 ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤≥‡≤∏‡≤ø!)
// @description:ko      ChatGPT ÎãµÎ≥ÄÏùÑ Brave Í≤ÄÏÉâ ÏÇ¨Ïù¥ÎìúÎ∞îÏóê Ï∂îÍ∞ÄÌï©ÎãàÎã§ (GPT-4Î°ú Íµ¨ÎèôÎê®!)
// @description:ku      Li ser panoya li ser√™ l√™ger√Æna Brave dih√™le ChatGPT bersivan (bi al√Ækariya GPT-4!)
// @description:ky      ChatGPT –∫–∞–∞—Ä–¥–∞—Ä–ª–∞—Ä—ã–Ω –ë—Ä–∞–≤–µ –ò–∑–¥”©”© —ç–∫–∏–±–∏–Ω—ã–Ω –∫”©–Ω—á—ã–≥—ã—à—ã–Ω–∞ –∫–æ—à–æ—Ç–æ—Ç (GPT-4 –º–µ–Ω–µ–Ω –∫“Ø—Ç”©–ª–≥”©–Ω!)
// @description:la      Adiungit responsiones ChatGPT ad barra lateralem investigatiois Brave (GPT-4 motore!)
// @description:lb      F√º√ºgt ChatGPT √Ñntwerten zur Brave-Sichbars√§it b√§i (gedriwwen vun GPT-4!)
// @description:lo      ‡∫ï‡∫≠‡∫ö‡∫™‡∫≠‡∫ô ChatGPT ‡ªÑ‡∫õ‡∫´‡∫≤‡ªÅ‡∫ñ‡∫ö‡∫Ç‡∫±‡ªâ‡∫ô‡∫ï‡∫≠‡∫ô‡∫Ç‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤ Brave (‡ªÇ‡∫î‡∫ç‡ªÉ‡∫ä‡ªâ GPT-4!)
// @description:lt      Prideda ChatGPT atsakymus ƒØ ≈°oninƒô juostƒÖ paie≈°kai Brave (varomi GPT-4!)
// @description:lv      Pievieno ChatGPT atbildes Brave meklƒì≈°anas sƒÅnjoslai (darbinƒÅts ar GPT-4!)
// @description:mg      Mampiditra valiny avy amin'ny ChatGPT ao amin'ny saroka Search Brave (maneho ny GPT-4!)
// @description:mi      TƒÅpiri atu i ngƒÅ whakautu a ChatGPT ki te tara taha o te Rapu Wawata Brave (e whakahaerehia ana e GPT-4!)
// @description:mk      –î–æ–¥–∞–≤–∞ –æ–¥–≥–æ–≤–æ—Ä–∏ –æ–¥ ChatGPT –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—Ç–∞ –ª–µ–Ω—Ç–∞ –Ω–∞ Brave Search (–ø–æ–¥–¥—Ä–∂–∞–Ω–æ –æ–¥ GPT-4!)
// @description:ml      Brave ‡¥∏‡µá‡µº‡¥ö‡µç‡¥ö‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥∏‡µà‡¥°‡µç‡¥¨‡¥æ‡µº‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ChatGPT ‡¥â‡¥§‡µç‡¥§‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ (GPT-4-‡¥Ø‡¥ø‡µΩ ‡¥™‡µç‡¥∞‡¥µ‡µº‡¥§‡µç‡¥§‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ!)
// @description:mn      ChatGPT —Ö–∞—Ä–∏—É–ª—Ç—É—É–¥—ã–≥ Brave –•–∞–π–ª—Ç—ã–Ω –∑–∞–∞–≤—Ä—ã–Ω –∑—É—Ä–∞–≥—Ç –Ω—ç–º–Ω—ç (GPT-4 –∞—à–∏–≥–ª–∞–∂!)
// @description:ms      Menambah jawapan ChatGPT ke sidebar Carian Brave (dikuasakan oleh GPT-4!)
// @description:mt      I≈º≈ºid Risposti ta 'ChatGPT lill-Sidebar Brave Search (pwered by GPT-4!)
// @description:my      ChatGPT ·Ä°·Äñ·Äº·Ä±·Äô·Äæ·Ä¨ Brave ·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äõ·Ä±·Ä∏·Äê·ÄΩ·ÄÑ·Ä∫ ChatGPT ·Ä°·Äñ·Äº·Ä±·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äë·Ä¨·Ä∏·Äû·Ää·Ä∫ (GPT-4 ·Äñ·Äº·ÄÑ·Ä∑·Ä∫·Ä°·Äú·ÄØ·Äï·Ä∫·Äú·ÄØ·Äï·Ä∫·Äï·Ä´!)
// @description:ne      ChatGPT ‡§â‡§§‡•ç‡§§‡§∞‡§π‡§∞‡•Ç‡§≤‡§æ‡§à ‡§¨‡•ç‡§∞‡•á‡§≠ ‡§ñ‡•ã‡§ú‡§ï‡•ã ‡§∏‡§æ‡§á‡§°‡§¨‡§æ‡§∞‡§Æ‡§æ ‡§•‡§™‡•ç‡§õ (GPT-4 ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§!)
// @description:nl      Voegt ChatGPT-antwoorden toe aan de zijbalk van Brave Search (aangedreven door GPT-4!)
// @description:no      Legger til ChatGPT-svar i sidenotatfeltet for Brave Search (drevet av GPT-4!)
// @description:ny      Anayambitsa zambiri za ChatGPT kubanja lovala la Brave Search (liyenera ndi GPT-4!)
// @description:pa      ‡®¨‡®∞‡©á‡®µ ‡®ñ‡©ã‡®ú ‡®¶‡©á ‡®∏‡®æ‡®à‡®°‡®¨‡®æ‡®∞ ‡®µ‡®ø‡©±‡®ö ChatGPT ‡®ú‡®µ‡®æ‡®¨ ‡®∏‡®º‡®æ‡®Æ‡®≤ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à (GPT-4 ‡®¶‡©Å‡®Ü‡®∞‡®æ ‡®∏‡®º‡®ï‡®§‡©Ä‡®∂‡®æ‡®≤‡®ï ‡®ï‡©Ä‡®§‡®æ ‡®ó‡®ø‡®Ü!)
// @description:pap     A√±adi respu√®stanan di ChatGPT na bar lateral di Buskeda Brave (poder√° pa GPT-4!)
// @description:pl      Dodaje odpowiedzi ChatGPT do paska bocznego Brave Search (napƒôdzane przez GPT-4!)
// @description:ps      ŸæŸá ÿ≥Ÿæ€åŸÜ€ê ÿØ Brave ŸÑŸºŸàŸÜ⁄©€ê ÿ™Ÿà⁄´Ÿá ChatGPT ÿ¨Ÿàÿßÿ®ŸàŸÜŸá Ÿàÿ±⁄©⁄ìŸä (ÿØ GPT-4 ŸÑÿÆŸàÿß ÿ≥ÿ±Ÿá!)
// @description:pt      Adiciona respostas do ChatGPT √† barra lateral de pesquisa do Brave (alimentado por GPT-4!)
// @description:pt-BR   Adiciona respostas do ChatGPT √† barra lateral de pesquisa do Brave (alimentado por GPT-4!)
// @description:rn      Abugira inkomoko za ChatGPT mu gisubizo cya Brave Search (yahindutse na GPT-4!)
// @description:ro      AdaugƒÉ rƒÉspunsuri ChatGPT √Æn bara lateralƒÉ de cƒÉutare Brave (propulsat de GPT-4!)
// @description:ru      –î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç—ã ChatGPT –≤ –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å –ø–æ–∏—Å–∫–∞ Brave (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ GPT-4!)
// @description:rw      Atera amakuru ya ChatGPT mu bariro bya Brave Search (yarahindutse n'ikoranabuhanga cya GPT-4!)
// @description:sg      Y√£ng√£ a√± f√£√£mi ChatGPT p≈©ngu loo yaaka yi Brave t√£ngbala (saango w√£ yi GPT-4!)
// @description:si      ‡∂î‡∂∂‡∑ö Brave ‡∑É‡∑ô‡∑Ä‡∑î‡∂∏‡∑ä ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î‡∂Ø ChatGPT ‡∂ë‡∂ö‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ô‡∂±‡∑ä ‡∂ë‡∂ö‡∑ä‡∑Ä‡∂±‡∑ä‡∂± (GPT-4 ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫‡∑ö ‡∑É‡∑í‡∂Ø‡∑î ‡∑Ä‡∑ö!)
// @description:sk      Prid√°va odpovede ChatGPT do boƒçnej li≈°ty Brave Search (poh√°≈àan√© GPT-4!)
// @description:sl      Dodaja odgovore ChatGPT na stransko vrstico iskanja Brave (poganja GPT-4!)
// @description:sm      Fa'afaigofie atu ai le tali a ChatGPT i le sidebar o le Search Brave (e avea i le GPT-4!)
// @description:sn      Anoratidza zita reChatGPT pa sidebar yeBrave Search (ine vedzere GPT-4!)
// @description:so      Wax ka dar ChatGPT jawaabaha sidebar Brave Search (u shaqeeya GPT-4!)
// @description:sr      –î–æ–¥–∞—ò–µ –æ–¥–≥–æ–≤–æ—Ä–µ ChatGPT-–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏ –ø–∞–Ω–µ–ª –ø—Ä–µ—Ç—Ä–∞–≥–µ –ë—Ä–µ—ò–≤–∞ (–ø–æ–∫—Ä–µ—õ–µ –ì–ü–¢-4!)
// @description:sv      L√§gger till ChatGPT-svar i sidof√§ltet f√∂r Brave S√∂kning (drivet av GPT-4!)
// @description:sw      Inaongeza majibu ya ChatGPT kwenye upau wa pembeni wa Brave Search (inaendeshwa na GPT-4!)
// @description:ta      ‡Æ™‡Øá‡Æ∞‡Ææ‡Æö‡Øà ‡ÆÜ‡ÆØ‡Øç‡Æµ‡ØÅ‡Æï‡Øç ‡Æï‡Øá‡Æü‡Øç‡Æ™‡Æ§‡Æ±‡Øç‡Æï‡ØÅ ChatGPT ‡Æ™‡Æ§‡Æø‡Æ≤‡Øç‡Æï‡Æ≥‡Øà Brave ‡Æ™‡Æï‡Øç‡Æï ‡Æ™‡Æï‡Øç‡Æï‡Æø‡Æ≤‡Øç ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ (GPT-4 ‡ÆÜ‡Æ≤‡Øç ‡Æá‡ÆØ‡Æô‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ!)
// @description:te      Brave ‡∞∂‡±ã‡∞ß‡∞®‡∞™‡±à ChatGPT ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡∞æ‡∞≤‡∞®‡±Å ‡∞ú‡±ã‡∞°‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø (GPT-4 ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞™‡±Ü‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø!)
// @description:tg      –®–∞—Ä“≥–∏ ChatGPT-—Ä–æ –±–∞ —Å–∞—Ç“≥–∏ –±–∞—Ä–æ–∏ “∑—É—Å—Ç—É“∑”Ø–∏ –ë—Ä–µ–π–≤ –∏–ª–æ–≤–∞ –º–µ–∫—É–Ω–∞–¥ (—Ç–∞–≤–∞—Å—Å—É—Ç–∏ GPT-4 –º—É–±–æ–¥–∏—ä –±—É–¥–∞–∞—Å—Ç!)
// @description:th      ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á ChatGPT ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÅ‡∏ñ‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Brave (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢ GPT-4!)
// @description:ti      ·ä≠·àç·àç ·å∏·åã·äï ChatGPT ·àò·àç·ä•·äΩ·âµ ·äï·àù·àµ·à≠·àì·â• Brave ·ãç·àç·âÄ·âµ ·ã≠·å®·àù·à© (·â†·âÄ·à®·â† GPT-4!)
// @description:tk      ChatGPT-ny≈à jogaplaryny Brave G√∂zleg √ßarpy≈üysyna go≈ü√Ωar (GPT-4-dan g√º√Ω√ßlen√Ω√§r!)
// @description:tn      Enza mavoti ChatGPT ku sidebar yeBrave Search (ine yeduva neGPT-4!)
// @description:to      TƒÅnaki e fiema ªu ai ha ngaahi ngaue fakamatala 'a e ChatGPT ki he tu'unga ni ha Brave Search (na'e neongo'i moe GPT-4!)
// @description:tpi     Adim na pes bilong ChatGPT long tab bilong Brave S√∏k (wok long GPT-4!)
// @description:tr      ChatGPT yanƒ±tlarƒ±nƒ± Brave Arama yan √ßubuƒüuna ekler (GPT-4 tarafƒ±ndan desteklenir!)
// @description:uk      –î–æ–¥–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ ChatGPT –¥–æ –±—ñ—á–Ω–æ—ó –ø–∞–Ω–µ–ª—ñ –ø–æ—à—É–∫—É Brave (–ø—Ä–∞—Ü—é—î –Ω–∞ GPT-4!)
// @description:ur      ChatGPT ÿ¨Ÿàÿßÿ®ÿßÿ™ ⁄©Ÿà ÿ®ÿ±€åŸà ÿ≥ÿ±⁄Ü ⁄©€í ÿ≥ÿßÿ¶⁄àÿ®ÿßÿ± ŸÖ€å⁄∫ ÿ¥ÿßŸÖŸÑ ⁄©ÿ±ÿ™ÿß €Å€í (GPT-4 ⁄©€í ÿ∞ÿ±€åÿπ€í!)
// @description:uz      ChatGPT javoblarni Brave Qidiruvning yon paneliga qo'shadi (GPT-4 tomonidan ta'minlanadi!)
// @description:vi      Th√™m c√¢u tr·∫£ l·ªùi c·ªßa ChatGPT v√†o thanh b√™n c·ªßa Brave Search (ƒë∆∞·ª£c cung c·∫•p b·ªüi GPT-4!)
// @description:xh      Enza amaxwebhu kaChatGPT e sideba yeBrave Search (enokukhuthaziswa nguGPT-4!)
// @description:yi      ◊¶◊ï◊í◊¢◊ë◊ü ◊ê÷∑◊†◊ò◊ï◊ï◊ê÷∏◊®◊ò◊ü ◊§÷ø◊ï◊ü ChatGPT ◊ê◊ô◊ü ◊ì◊ô ◊ñ◊≤÷∑◊ò◊ú-◊§÷ø◊¢◊ú◊ì ◊§÷ø◊ï◊ü Brave ◊ñ◊ï◊ö (◊í◊¢◊§÷º◊ê÷∑◊ï◊ï◊¢◊®◊ò◊¢◊ì ◊ì◊ï◊®◊ö GPT-4!)
// @description:zh      Â∞Ü ChatGPT Á≠îÊ°àÊ∑ªÂä†Âà∞ Brave Search ‰æßËæπÊ†è (Áî± GPT-4 Êèê‰æõÊîØÊåÅ!)
// @description:zh-CN   Â∞Ü ChatGPT Á≠îÊ°àÊ∑ªÂä†Âà∞ Brave Search ‰æßËæπÊ†è (Áî± GPT-4 Êèê‰æõÊîØÊåÅ!)
// @description:zh-HK   Â∞á ChatGPT Á≠îÊ°àÊ∑ªÂä†Âà∞ Brave Search ÂÅ¥ÈÇäÊ¨Ñ (Áî± GPT-4 Êèê‰æõÊîØÊåÅ!)
// @description:zh-SG   Â∞Ü ChatGPT Á≠îÊ°àÊ∑ªÂä†Âà∞ Brave Search ‰æßËæπÊ†è (Áî± GPT-4 Êèê‰æõÊîØÊåÅ!)
// @description:zh-TW   Â∞á ChatGPT Á≠îÊ°àÊ∑ªÂä†Âà∞ Brave Search ÂÅ¥ÈÇäÊ¨Ñ (Áî± GPT-4 Êèê‰æõÊîØÊåÅ!)
// @description:zu      Engeza amaswazi aseChatGPT emugqa wokuqala weBrave Search (ibhulohwe nguGPT-4!)
// @author              KudoAI
// @namespace           https://kudoai.com
// @version             2023.10.14
// @license             MIT
// @icon                https://media.bravegpt.com/images/bravegpt-icon48.png
// @icon64              https://media.bravegpt.com/images/bravegpt-icon64.png
// @compatible          chrome
// @compatible          firefox
// @compatible          edge
// @compatible          opera
// @compatible          brave
// @compatible          vivaldi
// @compatible          librewolf
// @compatible          ghost
// @compatible          qq
// @match               *://search.brave.com/search*
// @include             https://auth0.openai.com
// @connect             raw.githubusercontent.com
// @connect             greasyfork.org
// @connect             chat.openai.com
// @connect             api.aigcfun.com
// @require             https://cdn.jsdelivr.net/gh/kudoai/chatgpt.js@3f5fdfb50ca06e9bc739bd8853269b8e5f830eb9/dist/chatgpt-2.3.9.min.js
// @require             https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js
// @require             https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js
// @grant               GM_getValue
// @grant               GM_setValue
// @grant               GM_deleteValue
// @grant               GM_cookie
// @grant               GM_registerMenuCommand
// @grant               GM_unregisterMenuCommand
// @grant               GM_openInTab
// @grant               GM.xmlHttpRequest
// @downloadURL         https://greasyfork.org/scripts/462440/code/bravegpt.user.js
// @updateURL           https://greasyfork.org/scripts/462440/code/bravegpt.meta.js
// @homepageURL         https://www.bravegpt.com
// @supportURL          https://github.bravegpt.com/issues
// ==/UserScript==

// NOTE: This script relies on the powerful chatgpt.js library @ https://chatgpt.js.org (c) 2023 KudoAI & contributors under the MIT license
// ...and KaTeX, the fastest math typesetting library @ https://katex.org (c) 2013‚Äì2020 Khan Academy & contributors under the MIT license

(async () => {

    // Define SCRIPT functions

    function loadSetting(...keys) { keys.forEach(key => { config[key] = GM_getValue(config.prefix + '_' + key, false) })}
    function saveSetting(key, value) { GM_setValue(config.prefix + '_' + key, value) ; config[key] = value }
    function safeWindowOpen(url) { window.open(url, '_blank', 'noopener') } // to prevent backdoor vulnerabilities

    function updateCheck() {

        // Fetch latest meta
        const currentVer = GM_info.script.version
        GM.xmlHttpRequest({
            method: 'GET', url: config.updateURL + '?t=' + Date.now(),
            headers: { 'Cache-Control': 'no-cache' },
            onload: (response) => {

                // Compare versions
                const latestVer = /@version +(.*)/.exec(response.responseText)[1]
                for (let i = 0 ; i < 4 ; i++) { // loop thru subver's
                    const currentSubVer = parseInt(currentVer.split('.')[i], 10) || 0,
                          latestSubVer = parseInt(latestVer.split('.')[i], 10) || 0
                    if (currentSubVer > latestSubVer) break // out of comparison since not outdated
                    else if (latestSubVer > currentSubVer) { // if outdated

                        // Alert to update
                        const updateAlertID = alert(messages.alert_updateAvail + '! üöÄ', // title
                            messages.alert_newerVer + ' BraveGPT v' + latestVer + ' '
                                + messages.alert_isAvail + '!   '
                                + '<a target="_blank" rel="noopener" style="font-size: 0.7rem" '
                                    + 'href="' + config.gitHubURL + '/commits/main/greasemonkey/'
                                    + config.updateURL.replace(/.*\/(.*)meta\.js/, '$1user.js') + '" '
                                    + '>' + messages.link_viewChanges + '</a>',
                            function update() { // button
                                GM_openInTab(config.updateURL.replace('meta.js', 'user.js') + '?t=' + Date.now(),
                                    { active: true, insert: true } // focus, make adjacent
                                ).onclose = () => location.reload() }
                        )

                        // Localize button labels if needed
                        if (!config.userLanguage.startsWith('en')) {
                            const updateAlert = document.querySelector(`[id="${ updateAlertID }"]`),
                                  updateButtons = updateAlert.querySelectorAll('button')
                            updateButtons[1].textContent = messages.buttonLabel_update
                            updateButtons[0].textContent = messages.buttonLabel_dismiss
                        }
                        return
                }}

                alert(`${ messages.alert_upToDate }!`, // title
                        `BraveGPT (v${ currentVer }) ${ messages.alert_isUpToDate }!`) // msg
    }})}

    // Define MENU functions

    function getUserscriptManager() { try { return GM_info.scriptHandler } catch (error) { return 'other' }}

    function registerMenu() {
        const menuIDs = [] // to store registered commands for removal while preserving order
        const state = {
            symbol: ['‚úîÔ∏è', '‚ùå'], word: ['ON', 'OFF'],
            separator: getUserscriptManager() === 'Tampermonkey' ? ' ‚Äî ' : ': ' }

        // Add command to toggle proxy API mode
        const pamLabel = state.symbol[+!config.proxyAPIenabled]
                       + ' ' + messages.menuLabel_proxyAPImode + ' '
                       + state.separator + state.word[+!config.proxyAPIenabled]
        menuIDs.push(GM_registerMenuCommand(pamLabel, function() {
            saveSetting('proxyAPIenabled', !config.proxyAPIenabled)
            notify(messages.menuLabel_proxyAPImode + ' ' + state.word[+!config.proxyAPIenabled])
            for (const id of menuIDs) { GM_unregisterMenuCommand(id) } registerMenu() // refresh menu
            location.reload() // re-send query using new endpoint
        }))

        // Add command to toggle prefix mode
        const pmLabel = state.symbol[+!config.prefixEnabled] + ' '
                      + messages.menuLabel_require + ' "/" '
                      + messages.menuLabel_beforeQuery + ' '
                      + state.separator + state.word[+!config.prefixEnabled]
        menuIDs.push(GM_registerMenuCommand(pmLabel, function() {
            saveSetting('prefixEnabled', !config.prefixEnabled)
            if (config.prefixEnabled && config.suffixEnabled) { // disable Suffix Mode if activating Prefix Mode
                saveSetting('suffixEnabled', !config.suffixEnabled) }
            notify(messages.mode_prefix + ' ' + state.word[+!config.prefixEnabled])
            for (const id of menuIDs) { GM_unregisterMenuCommand(id) } registerMenu() // refresh menu
            if (!config.prefixEnabled) location.reload() // re-send query if newly disabled
        }))

        // Add command to toggle suffix mode
        const smLabel = state.symbol[+!config.suffixEnabled] + ' '
                      + messages.menuLabel_require + ' "?" '
                      + messages.menuLabel_afterQuery + ' '
                      + state.separator + state.word[+!config.suffixEnabled]
        menuIDs.push(GM_registerMenuCommand(smLabel, function() {
            saveSetting('suffixEnabled', !config.suffixEnabled)
            if (config.prefixEnabled && config.suffixEnabled) { // disable Prefix Mode if activating Suffix Mode
                saveSetting('prefixEnabled', !config.prefixEnabled) }
            notify(messages.mode_suffix + ' ' + state.word[+!config.suffixEnabled])
            for (const id of menuIDs) { GM_unregisterMenuCommand(id) } registerMenu() // refresh menu
            if (!config.suffixEnabled) location.reload() // re-send query if newly disabled
        }))

        // Add command to set reply language
        const rlLabel = 'üåê ' + messages.menuLabel_replyLanguage
                      + state.separator + config.replyLanguage
        menuIDs.push(GM_registerMenuCommand(rlLabel, () => {
            while (true) {
                const replyLanguage = prompt(
                    messages.prompt_updateReplyLang + ':', config.replyLanguage)
                if (replyLanguage === null) break // user cancelled so do nothing
                else if (!/\d/.test(replyLanguage)) {
                    saveSetting('replyLanguage', replyLanguage || config.userLanguage)
                    alert(messages.alert_langUpdated + '!', // title
                        'BraveGPT ' + messages.alert_willReplyIn + ' '
                            + ( replyLanguage || messages.alert_yourSysLang ) + '.')
                    for (const id of menuIDs) { GM_unregisterMenuCommand(id) } registerMenu() // refresh menu
                    break
        }}}))

        // Add command to launch About modal
        const aboutLabel = 'üí° ' + messages.menuLabel_about + ' BraveGPT'
        menuIDs.push(GM_registerMenuCommand(aboutLabel, async () => {

            // Show alert
            const chatgptJSver = /chatgpt-([\d.]+)\.min/.exec(GM_info.script.header)[1] || ''
            const aboutAlertID = alert(
                'BraveGPT', // title
                'üè∑Ô∏è ' + messages.about_version + ': ' + GM_info.script.version + '\n'
                    + '‚ö° ' + messages.about_poweredBy + ': '
                        + '<a href="https://chatgpt.js.org" target="_blank" rel="noopener">chatgpt.js</a>'
                        + ( chatgptJSver ? ( ' v' + chatgptJSver ) : '' ) + '\n'
                    + 'üìú ' + messages.about_sourceCode + ':\n  '
                        + `<a href="${ config.gitHubURL }" target="_blank" rel="nopener">`
                            + config.gitHubURL + '</a>',
                [ // buttons
                    function checkForUpdates() { updateCheck() },
                    function getSupport() { safeWindowOpen(config.supportURL) },
                    function leaveAReview() {
                        const reviewAlertID = chatgpt.alert(messages.alert_choosePlatform + ':', '',
                            [ function greasyFork() { safeWindowOpen(
                                  config.greasyForkURL + '/feedback#post-discussion') },
                              function productHunt() { safeWindowOpen(
                                  'https://www.producthunt.com/products/bravegpt/reviews/new') },
                              function futurepedia() { safeWindowOpen(
                                  'https://www.futurepedia.io/tool/bravegpt#bravegpt-review') },
                              function alternativeTo() { safeWindowOpen(
                                  'https://alternativeto.net/software/bravegpt/about/') }],
                            '', 511) // Review modal width
                        const reviewButtons = document.getElementById(reviewAlertID).querySelectorAll('button')
                        reviewButtons[0].style.display = 'none' // hide Dismiss button
                        reviewButtons[1].textContent = ( // remove spaces from AlternativeTo label
                            reviewButtons[1].textContent.replace(/\s/g, '')) },
                    function moreChatGPTapps() { safeWindowOpen('https://github.com/adamlui/chatgpt-apps') }
                ], '', 577) // About modal width

            // Re-format buttons to include emojis + re-case + hide 'Dismiss'
            for (const button of document.getElementById(aboutAlertID).querySelectorAll('button')) {
                if (/updates/i.test(button.textContent)) button.textContent = 'üöÄ ' + messages.buttonLabel_updateCheck
                else if (/support/i.test(button.textContent)) button.textContent = 'üß† ' + messages.buttonLabel_getSupport
                else if (/review/i.test(button.textContent)) button.textContent = '‚≠ê ' + messages.buttonLabel_leaveReview
                else if (/apps/i.test(button.textContent)) button.textContent = 'ü§ñ ' + messages.buttonLabel_moreApps
                else button.style.display = 'none' // hide Dismiss button
            }
        }))
    }

    // Define FEEDBACK functions

    function notify(msg, position = '', notifDuration = '', shadow = '') {
        chatgpt.notify(`${ config.appSymbol } ${ msg }`, position, notifDuration,
            shadow || ( isDarkMode() ? '' : 'shadow'))
    }

    function alert(title = '', msg = '', btns = '', checkbox = '', width = '') {
        return chatgpt.alert(`${ config.appSymbol } ${ title }`, msg, btns, checkbox, width )}

    const braveGPTconsole = {
        info: function(msg) {console.info(config.appSymbol + ' BraveGPT >> ' + msg)},
        error: function(msg) {console.error(config.appSymbol + ' BraveGPT >> ERROR: ' + msg)}
    }

    function braveGPTalert(msg) {
        if (msg.includes('login')) deleteOpenAIcookies()
        braveGPTdiv.innerHTML = (
            /waiting|loading/i.test(msg) ? // if alert involves loading, add class
                '<p class="loading">' : '<p style="padding: 19px">') + braveGPTalerts[msg]
            + (braveGPTalerts[msg].includes('@') ? // if msg needs login link, add it
                '<a href="https://chat.openai.com" target="_blank" rel="noopener">chat.openai.com</a> '
                    + '(' + messages.alert_ifIssuePersists + ')</p>' : '</p>')
    }

    // Define UI function

    function isDarkMode() { return document.documentElement.classList.toString().includes('dark') }

    // Define SESSION functions

    function isBlockedbyCloudflare(resp) {
        try {
            const html = new DOMParser().parseFromString(resp, 'text/html'),
                  title = html.querySelector('title')
            return title.innerText === messages.alert_justAmoment + '...'
        } catch (error) { return false }
    }

    function deleteOpenAIcookies() {
        if (getUserscriptManager() !== 'Tampermonkey') return
        GM_cookie.list({ url: openAIendpoints.auth }, (cookies, error) => {
            if (!error) { for (const cookie of cookies) {
                GM_cookie.delete({ url: openAIendpoints.auth, name: cookie.name })
    }}})}

    function getOpenAItoken() {
        return new Promise((resolve) => {
            const accessToken = GM_getValue(config.prefix + '_openAItoken')
            braveGPTconsole.info('OpenAI access token: ' + accessToken)
            if (!accessToken) {
                GM.xmlHttpRequest({ url: openAIendpoints.session, onload: (response) => {
                    if (isBlockedbyCloudflare(response.responseText)) {
                        braveGPTalert('checkCloudflare') ; return }
                    try {
                        const newAccessToken = JSON.parse(response.responseText).accessToken
                        GM_setValue(config.prefix + '_openAItoken', newAccessToken)
                        resolve(newAccessToken)
                    } catch { braveGPTalert('login') ; return }
                }})
            } else resolve(accessToken)
    })}

    function getAIGCFkey() {
        return new Promise((resolve) => {
            const publicKey = GM_getValue(config.prefix + '_aigcfKey')
            if (!publicKey) {
                GM.xmlHttpRequest({ method: 'GET', url: 'https://api.aigcfun.com/fc/key',
                    headers: {
                        'Content-Type': 'application/json',
                        'Referer': 'https://aigcfun.com/',
                        'X-Forwarded-For': chatgpt.generateRandomIP() },
                    onload: (response) => {
                        const newPublicKey = JSON.parse(response.responseText).data
                        if (!newPublicKey) { braveGPTconsole.error('Failed to get AIGCFun public key') ; return }
                        GM_setValue(config.prefix + '_aigcfKey', newPublicKey)
                        console.info('AIGCFun public key set: ' + newPublicKey)
                        resolve(newPublicKey)
                }})
            } else resolve(publicKey)
    })}

    async function refreshAIGCFendpoint() {
        GM_setValue(config.prefix + '_aigcfKey', false) // clear GM key
        // Determine index of AIGCF in endpoint map
        let aigcfMapIndex = -1
        for (let i = 0 ; i < proxyEndpoints.length ; i++) {
            const endpoint = proxyEndpoints[i]
            if (endpoint.some(item => item.includes('aigcfun'))) {
                aigcfMapIndex = i ; break
        }}
        // Update AIGCF endpoint w/ fresh key (using fresh IP)
        proxyEndpoints[aigcfMapIndex][0] = (
            'https://api.aigcfun.com/api/v1/text?key=' + await getAIGCFkey())
    }

    // Define ANSWER functions

    let endpoint, accessKey, model
    async function pickAPI() {
        if (config.proxyAPIenabled) { // randomize proxy API
            const untriedEndpoints = proxyEndpoints.filter((entry) => {
                return !getShowReply.triedEndpoints?.includes(entry[0]) })
            const entry = untriedEndpoints[Math.floor(chatgpt.randomFloat() * untriedEndpoints.length)]
            endpoint = entry[0] ; accessKey = entry[1] ; model = entry[2]
        } else { // use OpenAI API
            endpoint = openAIendpoints.chat
            const timeoutPromise = new Promise((resolve, reject) => {
                setTimeout(() => { reject(new Error('Timeout occurred')) }, 3000) })
            accessKey = await Promise.race([getOpenAItoken(), timeoutPromise])
            if (!accessKey) { braveGPTalert('login') ; return }
            model = 'text-davinci-002-render'
        }
    }

    function createPayload(msgs) {
        return JSON.stringify(config.proxyAPIenabled
            ? { messages: msgs, model: model }
            : { action: 'next', messages: msgs, model: model,
                parent_message_id: chatgpt.uuidv4(), max_tokens: 4000 })
    }

    async function getShowReply(convo, callback) {

        // Initialize attempt properties
        if (!getShowReply.triedEndpoints) getShowReply.triedEndpoints = []
        if (!getShowReply.attemptCnt) getShowReply.attemptCnt = 0

        // Get answer from ChatGPT
        await pickAPI()
        GM.xmlHttpRequest({
            method: 'POST', url: endpoint,
            headers: { 'Content-Type': 'application/json', Authorization: 'Bearer ' + accessKey },
            responseType: responseType(), data: createPayload(convo), onloadstart: onLoadStart(), onload: onLoad(),
            onerror: (err) => {
                braveGPTconsole.error(err)
                if (!config.proxyAPIenabled) braveGPTalert(!accessKey ? 'login' : 'suggestProxy')
                else { // if proxy mode
                    if (getShowReply.attemptCnt < proxyEndpoints.length) retryDiffHost()
                    else braveGPTalert('suggestOpenAI')
            }}
        })

        function responseType() {
            return (!config.proxyAPIenabled && getUserscriptManager() === 'Tampermonkey') ? 'stream' : 'text' }

        function retryDiffHost() {
            braveGPTconsole.error(`Error calling ${ endpoint }. Trying another endpoint...`)
            getShowReply.triedEndpoints.push(endpoint) // store current proxy to not retry
            getShowReply.attemptCnt++
            getShowReply(convo, callback)
        }

        function onLoadStart() { // process streams for unproxied TM users
            braveGPTconsole.info('Endpoint used: ' + endpoint)
            if (!config.proxyAPIenabled && getUserscriptManager() === 'Tampermonkey') {
                return (stream) => {
                    const reader = stream.response.getReader()
                    reader.read().then(function processText({ done, value }) {
                        if (done) return
                        let responseItem = String.fromCharCode(...Array.from(value))
                        const items = responseItem.split('\n\n')
                        if (items.length > 2) {
                            const lastItem = items.slice(-3, -2)[0]
                            if (lastItem.startsWith('data: [DONE]')) responseItem = items.slice(-4, -3)[0]
                            else responseItem = lastItem
                        }
                        if (responseItem.startsWith('data: {')) {
                            const answer = JSON.parse(responseItem.slice(6)).message.content.parts[0]
                            braveGPTshow(answer)
                        } else if (responseItem.startsWith('data: [DONE]')) return
                        return reader.read().then(processText)
        })}}}

        function onLoad() {
            return async (event) => {
                if (event.status !== 200) {
                    braveGPTconsole.error('Event status: ' + event.status)
                    braveGPTconsole.error('Event response: ' + event.responseText)
                    if (config.proxyAPIenabled && getShowReply.attemptCnt < proxyEndpoints.length)
                        retryDiffHost()
                    else if (event.status === 401 && !config.proxyAPIenabled) {
                        GM_deleteValue(config.prefix + '_openAItoken') ; braveGPTalert('login') }
                    else if (event.status === 403)
                        braveGPTalert(config.proxyAPIenabled ? 'suggestOpenAI' : 'checkCloudflare')
                    else if (event.status === 429) braveGPTalert('tooManyRequests')
                    else braveGPTalert(config.proxyAPIenabled ? 'suggestOpenAI' : 'suggestProxy')
                } else if (!config.proxyAPIenabled && getUserscriptManager() !== 'Tampermonkey') {
                    if (event.response) {
                        try { // to parse txt response from OpenAI endpoint for non-TM users
                            const responseParts = event.response.split('\n\n'),
                                  finalResponse = JSON.parse(responseParts[responseParts.length - 4].slice(6)),
                                  answer = finalResponse.message.content.parts[0]
                            braveGPTshow(answer)
                        } catch (err) {
                            braveGPTconsole.error(braveGPTalerts.parseFailed + ': ' + err)
                            braveGPTconsole.error('Response: ' + event.response)
                            braveGPTalert('suggestProxy')
                        }
                    }
                } else if (config.proxyAPIenabled) {
                    if (event.responseText) {
                        try { // to parse txt response from proxy endpoints
                            const answer = JSON.parse(event.responseText).choices[0].message.content
                            braveGPTshow(answer) ; getShowReply.triedEndpoints = [] ; getShowReply.attemptCnt = 0
                        } catch (err) {
                            braveGPTconsole.info('Response: ' + event.responseText)
                            if (event.responseText.includes('ÈùûÂ∏∏Êä±Ê≠âÔºåÊ†πÊçÆÊàë‰ª¨ÁöÑ‰∫ßÂìÅËßÑÂàôÔºåÊó†Ê≥ï‰∏∫‰Ω†Êèê‰æõËØ•ÈóÆÈ¢òÁöÑÂõûÁ≠î'))
                                braveGPTshow(messages.alert_censored)
                            else if (event.responseText.includes('Áª¥Êä§'))
                                braveGPTshow(messages.alert_maintenance + '. ' + messages.alert_suggestOpenAI)
                            else if (event.responseText.includes('finish_reason')) { // if other AIGCF error encountered
                                await refreshAIGCFendpoint() ; getShowReply(convo, callback) // re-fetch related queries w/ fresh IP
                            } else { // use different endpoint or suggest OpenAI
                                braveGPTconsole.error(braveGPTalerts.parseFailed + ': ' + err)
                                if (getShowReply.attemptCnt < proxyEndpoints.length) retryDiffHost()
                                else braveGPTalert('suggestOpenAI')
                            }
                        }
        }}}}
    }

    function braveGPTshow(answer) {
        braveGPTdiv.innerHTML = '<span class="prefix">ü§ñ  <a href="https://www.bravegpt.com" target="_blank" rel="noopener">BraveGPT</a></span><span class="kudo-ai">by <a target="_blank" href="https://github.com/kudoai" rel="noopener">KudoAI</a></span><span class="balloon-tip"></span><pre></pre><section style="margin-bottom: -10px"><form><div class="continue-chat"><textarea id="bravegpt-reply-box" rows="1" placeholder="Send reply..."></textarea><button title="Send reply"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 mr-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg></button></div></form></section>'
        braveGPTdiv.querySelector('pre').textContent = answer
        fillBraveGPTfooter() ; braveGPTfooter.style.height = 'inherit' // (re-)init (after loading replies)
        braveGPTdiv.appendChild(braveGPTfooter) // append feedback link

        // Render math
        renderMathInElement(braveGPTdiv.querySelector('pre'), { // eslint-disable-line no-undef
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
                {left: '\\(', right: '\\)', display: false},
                {left: '\\[', right: '\\]', display: true},
                {left: '\\begin{equation}', right: '\\end{equation}', display: true},
                {left: '\\begin{align}', right: '\\end{align}', display: true},
                {left: '\\begin{alignat}', right: '\\end{alignat}', display: true},
                {left: '\\begin{gather}', right: '\\end{gather}', display: true},
                {left: '\\begin{CD}', right: '\\end{CD}', display: true},
                {left: '\\[', right: '\\]', display: true}
            ],
            throwOnError: false
        })

        // Init variables for listeners
        const form = braveGPTdiv.querySelector('form'),
              replyBox = document.getElementById('bravegpt-reply-box')
        let prevLength = replyBox.value.length

        // Add listeners
        form.addEventListener('keydown', enterToSubmit)
        form.addEventListener('submit', handleSubmit )
        replyBox.addEventListener('input', autosizeBox)

        function enterToSubmit(event) {
            if (event.key === 'Enter' && event.target.nodeName === 'TEXTAREA') handleSubmit(event) }

        function handleSubmit(event) {
            event.preventDefault()
            if (convo.length > 2) convo.splice(0, 2) // keep token usage maintainable
            const prevReplyTrimmed = braveGPTdiv.querySelector('pre').textContent.substring(0, 250 - replyBox.value.length),
                  yourReply = replyBox.value + ' / Answer in ' + config.replyLanguage
            if (!config.proxyAPIenabled) {
                convo.push({ role: 'assistant', id: chatgpt.uuidv4(), content: { content_type: 'text', parts: [prevReplyTrimmed] } })
                convo.push({ role: 'user', id: chatgpt.uuidv4(), content: { content_type: 'text', parts: [yourReply] } })
            } else {
                convo.push({ role: 'assistant', content: prevReplyTrimmed })
                convo.push({ role: 'user', content: yourReply })
            } getShowReply(convo)

            // Remove listeners since they're re-added
            replyBox.removeEventListener('input', autosizeBox)
            form.removeEventListener('submit', handleSubmit)
            replyBox.removeEventListener('keydown', enterToSubmit)

            // Show loading status
            const replySection = braveGPTdiv.querySelector('section')
            replySection.classList.add('loading')
            replySection.innerHTML = braveGPTalerts.waitingResponse
            braveGPTfooter.innerHTML = '' ; braveGPTfooter.style.height = '32px'
        }

        function autosizeBox() {
            const newLength = replyBox.value.length
            if (newLength < prevLength) { // if deleting txt
                replyBox.style.height = 'auto' // ...auto-fit height
                if (parseInt(getComputedStyle(replyBox).height) < 55) { // if down to one line
                    replyBox.style.height = '2.15rem' } // ...reset to original height
            }
            replyBox.style.height = replyBox.scrollHeight + 'px'
            prevLength = newLength
        }
    }

    function fillBraveGPTfooter() {

        // Create feedback anchor + set attributes
        const feedbackAnchor = document.createElement('a')
        feedbackAnchor.setAttribute('class', 'feedback svelte-8js1iq')
        feedbackAnchor.setAttribute('target', '_blank')
        feedbackAnchor.setAttribute('rel', 'noopener')
        feedbackAnchor.setAttribute('href', 'https://github.bravegpt.com/discussions/new/choose')

        // Create feedback icon + set attributes
        const feedbackSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg'),
              feedbackSVGpath = document.createElementNS('http://www.w3.org/2000/svg', 'path')
        feedbackSVG.setAttribute('class', 'icon')
        feedbackSVG.setAttribute('width', '15')
        feedbackSVG.setAttribute('height', '15')
        feedbackSVG.setAttribute('viewBox', '0 0 15 15')
        feedbackSVGpath.setAttribute('fill-rule', 'evenodd')
        feedbackSVGpath.setAttribute('d', 'M.577 6.23a.577.577 0 1 1 0-1.153H1.5a.577.577 0 0 1 0 1.154H.577ZM2.83 8.939a.576.576 0 0 1 0 .816l-1.385 1.385a.573.573 0 0 1-.816 0 .576.576 0 0 1 0-.816l1.385-1.385a.577.577 0 0 1 .816 0ZM.63.985a.576.576 0 1 1 .815-.816L2.83 1.553a.576.576 0 1 1-.816.816L.63.985ZM15 5.654a.577.577 0 0 1-.577.577H13.5a.577.577 0 0 1 0-1.154h.923c.319 0 .577.258.577.577Zm-.631 4.669a.576.576 0 1 1-.816.816l-1.385-1.385a.576.576 0 1 1 .816-.816l1.385 1.385Zm-2.2-7.954a.576.576 0 0 1 0-.816L13.553.17a.577.577 0 0 1 .816.816l-1.385 1.384a.575.575 0 0 1-.816 0ZM9.3 9.09a.579.579 0 0 0-.045.038c-.45.417-.486 1.23-.486 1.47v.238c-1.045.45-2.053.177-2.537-.013v-.226c0-.24-.036-1.053-.487-1.469a.687.687 0 0 0-.044-.037c-.81-.609-1.777-1.667-1.777-3.253 0-2.073 1.604-3.76 3.576-3.76s3.577 1.687 3.577 3.76c0 1.586-.967 2.644-1.777 3.252Zm-1.8 4.757c-.995 0-1.223-.623-1.27-.814v-.997a4.83 4.83 0 0 0 1.343.197c.374 0 .78-.057 1.195-.18v.978c-.05.202-.282.816-1.269.816ZM7.5.923c-2.609 0-4.73 2.204-4.73 4.914 0 1.616.757 3.047 2.192 4.141.058.094.114.39.115.618v2.494c0 .03.003.06.007.09.1.63.732 1.82 2.416 1.82s2.316-1.19 2.416-1.82a.674.674 0 0 0 .006-.09v-2.494c0-.206.054-.525.11-.613 1.438-1.096 2.198-2.528 2.198-4.146 0-2.71-2.121-4.914-4.73-4.914Z')
        
        // Assemble feedback link
        feedbackSVG.appendChild(feedbackSVGpath)
        feedbackAnchor.appendChild(feedbackSVG)
        feedbackAnchor.appendChild(document.createTextNode(' ' + messages.link_shareFeedback))

        // Fill footer
        braveGPTfooter.innerHTML = '' ; braveGPTfooter.appendChild(feedbackAnchor)
    }

    async function loadBraveGPT() {
        braveGPTalert('waitingResponse')
        const siderbarContainer = document.querySelector('.sidebar')
        setTimeout(() => { 
            siderbarContainer.prepend(braveGPTdiv) // inject BraveGPT container
            const query = new URL(location.href).searchParams.get('q') + ' / Answer in ' + config.replyLanguage
            convo.push(
                config.proxyAPIenabled ? { role: 'user', content: query }
                                       : { role: 'user', id: chatgpt.uuidv4(),
                                           content: { content_type: 'text', parts: [query] }})
            getShowReply(convo)
        }, 100)
    }

    // Run MAIN routine

    // Init config/convo/menu
    const config = {
        prefix: 'braveGPT', appSymbol: 'ü§ñ', userLanguage: chatgpt.getUserLanguage(),
        gitHubURL: 'https://github.com/kudoai/bravegpt',
        greasyForkURL: 'https://greasyfork.org/scripts/462440-bravegpt' }
    config.updateURL = config.greasyForkURL + '/code/bravegpt.meta.js'
    config.supportURL = config.gitHubURL + '/issues/new'
    config.assetHostURL = config.gitHubURL.replace('github.com', 'raw.githubusercontent.com') + '/main/'
    loadSetting('proxyAPIenabled', 'prefixEnabled', 'replyLanguage', 'suffixEnabled')
    if (!config.replyLanguage) saveSetting('replyLanguage', config.userLanguage) // init reply language if unset
    const convo = []

    // Define messages
    const msgsLoaded = new Promise(resolve => {
        const msgHostDir = config.assetHostURL + 'greasemonkey/_locales/',
              msgLocaleDir = ( config.userLanguage ? config.userLanguage.replace('-', '_') : 'en' ) + '/'
        let msgHref = msgHostDir + msgLocaleDir + 'messages.json', msgXHRtries = 0
        GM.xmlHttpRequest({ method: 'GET', url: msgHref, onload: onLoad })
        function onLoad(response) {
            try { // to return localized messages.json
                const messages = new Proxy(JSON.parse(response.responseText), {
                    get(target, prop) { // remove need to ref nested keys
                        if (typeof target[prop] === 'object' && target[prop] !== null && 'message' in target[prop]) {
                            return target[prop].message
                }}}) ; resolve(messages)
            } catch (error) { // if 404
                msgXHRtries++ ; if (msgXHRtries == 3) return // try up to 3X (original/region-stripped/EN) only
                msgHref = config.userLanguage.includes('-') && msgXHRtries == 1 ? // if regional lang on 1st try...
                    msgHref.replace(/(.*)_.*(\/.*)/, '$1$2') // ...strip region before retrying
                        : ( msgHostDir + 'en/messages.json' ) // else use default English messages
                GM.xmlHttpRequest({ method: 'GET', url: msgHref, onload: onLoad })
            }
        }
    }) ; const messages = await msgsLoaded

    registerMenu()

    // Exit if prefix/suffix required but not present
    if (( config.prefixEnabled && !/.*q=%2F/.test(document.location) ) || // if prefix required but not present
        ( config.suffixEnabled && !/.*q=.*%3F(&|$)/.test(document.location) )) { // or suffix required but not present
            return }

    // Init endpoints
    const openAIendpoints = {
        auth: 'https://auth0.openai.com',
        session: 'https://chat.openai.com/api/auth/session',
        chat: 'https://chat.openai.com/backend-api/conversation' }
    const proxyEndpoints = [[ 'https://api.aigcfun.com/api/v1/text?key=' + await getAIGCFkey(), '', 'gpt-3.5-turbo' ]]

    // Init alerts
    const braveGPTalerts = {
        waitingResponse: messages.alert_waitingResponse + '...',
        login: messages.alert_login + ' @ ',
        tooManyRequests: messages.alert_tooManyRequests + '. '
            + messages['alert_suggest' + ( config.proxyAPIenabled ? 'OpenAI' : 'Proxy' )],
        parseFailed: messages.alert_parseFailed + '. '
            + messages['alert_suggest' + ( config.proxyAPIenabled ? 'OpenAI' : 'Proxy' )],
        checkCloudflare: messages.alert_checkCloudflare + ' @ ',
        suggestProxy: messages.alert_openAInotWorking + '. ' + messages.alert_suggestProxy,
        suggestOpenAI: messages.alert_proxyNotWorking + '. ' + messages.alert_suggestOpenAI
    }

    // Stylize elements
    const braveGPTstyle = document.createElement('style')
    braveGPTstyle.innerText = (
        '.bravegpt-container {'
            + 'word-wrap: break-word ; white-space: pre-wrap ; margin-bottom: 20px ;'
            + 'border-radius: 7px ; padding: 19px ; background: '
                + ( isDarkMode() ? '#282828' : 'white' ) + '}'
        + `.bravegpt-container p { margin: 0 }
        .bravegpt-container .chatgpt-icon { position: relative ; bottom: -4px ; margin-right: 11px }
        .bravegpt-container .prefix { font-size: 20px ; font-family: var(--brand-font) }
        .bravegpt-container .prefix > a { color: inherit }
        .bravegpt-container .loading {
            color: #b6b8ba ; animation: pulse 2s cubic-bezier(.4,0,.6,1) infinite ;
            -webkit-user-select: none ; -moz-user-select: none ; -ms-user-select: none ; user-select: none }
        @keyframes pulse { 0%, to { opacity: 1 } 50% { opacity: .5 }}
        .bravegpt-container section.loading {
            padding-left: 5px ; font-size: 90% ;
            -webkit-user-select: none ; -moz-user-select: none ; -ms-user-select: none ; user-select: none }`
        + '.bravegpt-container pre {'
            + 'font-family: Consolas, Menlo, Monaco, monospace ; white-space: pre-wrap ; line-height: 21px ;'
            + 'padding: 1.2em ; margin-top: .7em ; border-radius: 13px ;'
            + ( isDarkMode() ? 'background: #3a3a3a ; color: #f2f2f2 } ' : ' background: #eaeaea ; color: #282828 } ' )
        + `.bravegpt-container .footer {
            margin: 2px 0 -26px 0 ; padding: 14px -1 !important ; font-size: var(--text-sm-2)
            justify-content: right !important ; border-top: none !important
        }
        .bravegpt-container .feedback { font-family: var(--brand-font) ; color: var(--search-text-06);
            font-size: .65rem ; letter-spacing: .02em ; line-height: 1; position: relative ; left: 243px ; bottom: 24px }
        .bravegpt-container .feedback .icon { fill: currentColor ; color: currentColor ; --size:15px ; position: relative ; top: 3px ; right: 3px }`
        + `.bravegpt-container .footer a:hover { color: ${ isDarkMode() ? 'white' : 'black' } ; text-decoration: none }`
        + '@keyframes pulse { 0%, to { opacity: 1 } 50% { opacity: .5 }}'
        + '.balloon-tip { content: "" ; position: relative ; top: 0.25em ; right: 9.64rem ; border: 7px solid transparent ;'
            + 'border-bottom-style: solid ; border-bottom-width: 16px ; border-top: 0 ; border-bottom-color: '
                + ( isDarkMode() ? '#3a3a3a' : '#eaeaea' ) + '}'
        + '.chatgpt-js { font-family: var(--brand-font) ; font-size: .65rem ; position: relative ; right: .9rem } '
        + '.chatgpt-js > a { color: inherit ; top: .054rem } '
        + '.chatgpt-js > svg { top: 3px ; position: relative ; margin-right: 1px } '
        + '.continue-chat > textarea { border: none ; border-radius: 15px 16px 15px 0 ; margin: -6px 0 5px 0 ;  padding: 14px 0 5px 10px ; '
            + 'height: 2.15rem ; width: 100% ; max-height: 200px ; resize: none ; background: '
                + ( isDarkMode() ? '#515151' : '#eeeeee70' ) + '}'
        + '.continue-chat > button { position: relative ; bottom: 54px; left: 299px; border: none ; margin: 18px 4px 0 0 ; '
            + 'background: none ; color: lightgrey ; cursor: pointer } '
        + '.kudo-ai { margin-left: 7px ; font-size: .65rem ; color: #aaa } '
        + '.kudo-ai a { color: #aaa ; text-decoration: none } '
        + `.kudo-ai a:hover { color: ${ isDarkMode() ? 'white' : 'black' } ; text-decoration: none }`
        + '.katex-html { display: none } ' // hide unrendered math
        + '.chatgpt-modal p { font-size: 1.115rem ; margin-left: 4px } ' // chatgpt.alert() msg
        + '.chatgpt-modal button { ' // chatgpt.alert() buttons
            + 'font-size: 0.72rem ; text-transform: uppercase ; min-width: 123px ; padding: 5px !important ;'
            + 'border-radius: 0 !important ; border: 1px solid ' + ( isDarkMode() ? 'white' : 'black' ) + ' !important } '
        + '.chatgpt-modal button:hover { color: white !important } ' // color text white on alert button hovers
        + '.modal-buttons { margin: 20px -5px -3px -10px !important }'
        + ( isDarkMode() ? '.chatgpt-modal button:hover { background-color: #00cfff !important }' : '' ))
    document.head.appendChild(braveGPTstyle) // append style to <head>

    // Create BraveGPT container & add id/classes
    const braveGPTdiv = document.createElement('div') // create container div
    braveGPTdiv.setAttribute('id', 'infobox')
    braveGPTdiv.setAttribute( // assign Brave's .snippet + custom class
        'class', 'snippet bravegpt-container')

    // Create feedback footer & add class
    const braveGPTfooter = document.createElement('div') // create footer div
    braveGPTfooter.className = 'footer'

    // Activate promo campaign if active
    GM.xmlHttpRequest({
        method: 'GET', url: config.assetHostURL + 'ads/live/creative.html',
        onload: (response) => { if (response.status == 200) {

                // Create campaign div & add class/style/HTML
                const pcDiv = document.createElement('div')
                pcDiv.setAttribute( // assign Brave's .snippet + custom class
                    'class', 'snippet bravegpt-container')
                pcDiv.style.display = 'flex'
                pcDiv.style.padding = '17px 19px 21px 23px'
                pcDiv.innerHTML = response.responseText

                // Inject in sidebar
                braveGPTdiv.insertAdjacentElement('afterend', pcDiv)
    }}})

    loadBraveGPT()

})()
