// ==UserScript==
// @name                ChatGPT Auto-Talk üì£
// @name:af             ChatGPT Auto-Praat üì£
// @name:am             ChatGPT ·â†·à´·àµ·à∞·à≠ ·ä•·äï·åã·â¢ üì£
// @name:ar             ChatGPT ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä üì£
// @name:az             ChatGPT Avtomatik-Danƒ±≈üƒ±q üì£
// @name:be             ChatGPT –ê—û—Ç–∞-–†–∞–∑–º–æ–≤–∞ üì£
// @name:bem            ChatGPT Kusogolo Kwati üì£
// @name:bg             ChatGPT –ê–≤—Ç–æ-–†–∞–∑–≥–æ–≤–æ—Ä üì£
// @name:bn             ChatGPT ‡¶Ö‡¶ü‡ßã-‡¶ü‡¶ï üì£
// @name:bo             ChatGPT ‡Ω¢‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºã‡Ω¶‡æê‡Ωë‡ºã‡ΩÜ‡Ω∫‡Ωì‡ºã‡Ωî‡Ωº üì£
// @name:bs             ChatGPT Auto-Razgovor üì£
// @name:ca             ChatGPT Auto-Parla üì£
// @name:ceb            ChatGPT Auto-Panulti üì£
// @name:ckb            ChatGPT ÿ¶€ïŸà€ï€å-ÿÆ€Ü⁄©ÿßÿ± üì£
// @name:cs             ChatGPT Automatick√Ω-Rozhovor üì£
// @name:cy             ChatGPT Sgwrsio-Awtomatig üì£
// @name:da             ChatGPT Auto-Tale üì£
// @name:de             ChatGPT Auto-Sprechen üì£
// @name:dv             ChatGPT ﬁáﬁÆﬁìﬁØ-ﬁÜﬁÆﬁâﬁ®ﬁáﬁ™ﬁÇﬁ®ﬁÜﬁ≠ﬁùﬁ¶ﬁÇﬁ∞ üì£
// @name:dz             ChatGPT ‡Ω¢‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºã‡Ω¶‡æê‡Ωë‡ºã‡ΩÜ‡Ω∫‡Ωì‡ºã‡Ωî‡Ωº üì£
// @name:el             ChatGPT ŒëœÖœÑœåŒºŒ±œÑŒ∑-ŒüŒºŒπŒªŒØŒ± üì£
// @name:eo             ChatGPT A≈≠tomata-Parolo üì£
// @name:es             ChatGPT Auto-Hablar üì£
// @name:et             ChatGPT Automaatne-Jutt üì£
// @name:eu             ChatGPT Auto-Hizketa üì£
// @name:fa             ChatGPT ⁄ØŸÅÿ™⁄ØŸà€å ÿÆŸàÿØ⁄©ÿßÿ± üì£
// @name:fi             ChatGPT Auto-Puhe üì£
// @name:fo             ChatGPT Sj√°lvvirkandi-Pr√°t üì£
// @name:fr             ChatGPT Auto-Parler üì£
// @name:fr-CA          ChatGPT Auto-Parler üì£
// @name:gd             ChatGPT F√®in-Labhairt üì£
// @name:gl             ChatGPT Auto-Falar üì£
// @name:gu             ChatGPT ‡™ì‡™ü‡´ã-‡™¨‡´ã‡™≤‡´ã üì£
// @name:haw            ChatGPT K≈´ ªoko ªa- ª≈ålelo üì£
// @name:he             ChatGPT ◊ì◊ô◊ë◊ï◊®-◊ê◊ï◊ò◊ï◊û◊ò◊ô üì£
// @name:hi             ChatGPT ‡§ë‡§ü‡•ã-‡§ü‡•â‡§ï üì£
// @name:hr             ChatGPT Auto-Razgovor üì£
// @name:ht             ChatGPT Auto-Pale üì£
// @name:hu             ChatGPT Auto-Besz√©lget√©s üì£
// @name:hy             ChatGPT ‘ª’∂÷Ñ’∂’°’¢’•÷Ä’°’¢’°÷Ä-‘Ω’∏’Ω÷Ñ üì£
// @name:id             ChatGPT Bicara-Otomatis üì£
// @name:is             ChatGPT Sj√°lfvirk-Tal üì£
// @name:it             ChatGPT Auto-Parlare üì£
// @name:ja             ChatGPT „Ç™„Éº„Éà„Éà„Éº„ÇØ üì£
// @name:jv             ChatGPT Auto-Omah üì£
// @name:ka             ChatGPT ·Éê·Éï·É¢·Éù-·Éö·Éê·Éû·Éê·É†·Éê·Éô·Éò üì£
// @name:kab            ChatGPT Awto-Talqeq üì£
// @name:kk             ChatGPT –ê–≤—Ç–æ-–°”©–π–ª–µ—É üì£
// @name:km             ChatGPT ·ûÄ·û∂·ûö·ûî·üí·ûö·û∂·ûü·üí·ûö·üê·ûô·û¢·ûÇ·üí·ûÇ·û∑·ûü·ûì·û∏ üì£
// @name:kn             ChatGPT ‡≤∏‡≥ç‡≤µ‡≤Ø‡≤Ç‡≤ö‡≤æ‡≤≤‡≤ø‡≤§-‡≤Æ‡≤æ‡≤§‡≥Å üì£
// @name:ko             ChatGPT ÏûêÎèô-ÌÜ†ÌÅ¨ üì£
// @name:ku             ChatGPT Ax√™-Raxt üì£
// @name:ky             ChatGPT –ê–≤—Ç–æ-–°“Ø–π–ª”©—à“Ø“Ø üì£
// @name:la             ChatGPT Auto-Loquens üì£
// @name:lb             ChatGPT Auto-Schw√§tzen üì£
// @name:lo             ChatGPT ‡∫Å‡∫≤‡∫ô‡ªÄ‡∫ß‡∫ª‡ªâ‡∫≤‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î üì£
// @name:lt             ChatGPT Auto-Kalba üì£
// @name:lv             ChatGPT Auto-Saruna üì£
// @name:mg             ChatGPT Auto-Kabary üì£
// @name:mi             ChatGPT Aunoa-K≈çrero üì£
// @name:mk             ChatGPT –ê–≤—Ç–æ-–†–∞–∑–≥–æ–≤–æ—Ä üì£
// @name:ml             ChatGPT ‡¥ì‡¥ü‡µç‡¥ü‡µã-‡¥∏‡¥Ç‡¥∏‡¥æ‡¥∞‡¥Ç üì£
// @name:mn             ChatGPT –ê–≤—Ç–æ–º–∞—Ç-–Ø—Ä–∏–∞ üì£
// @name:ms             ChatGPT Auto-Bercakap üì£
// @name:mt             ChatGPT Auto-Kellem üì£
// @name:my             ChatGPT ·Ä°·Äú·Ä≠·ÄØ·Ä°·Äú·Äª·Ä±·Ä¨·ÄÄ·Ä∫-·ÄÖ·ÄÄ·Ä¨·Ä∏·Äï·Äº·Ä±·Ä¨ üì£
// @name:ne             ChatGPT ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§-‡§µ‡§æ‡§∞‡•ç‡§§‡§æ üì£
// @name:nl             ChatGPT Auto-Praten üì£
// @name:no             ChatGPT Auto-Snakke üì£
// @name:ny             ChatGPT Auto-Kulankhula üì£
// @name:pa             ChatGPT ‡®Ü‡®ü‡©ã-‡®ó‡©±‡®≤‡®¨‡®æ‡®§ üì£
// @name:pap            ChatGPT Auto-Papia üì£
// @name:pl             ChatGPT Auto-Rozmowa üì£
// @name:ps             ChatGPT ÿÆŸàÿØ⁄©ÿßÿ±Ÿá-ÿÆÿ®ÿ±Ÿä ⁄©ŸàŸÑ üì£
// @name:pt             ChatGPT Auto-Falar üì£
// @name:pt-BR          ChatGPT Auto-Falar üì£
// @name:rn             ChatGPT Auto-Kuvuga üì£
// @name:ro             ChatGPT Auto-Vorbire üì£
// @name:ru             ChatGPT –ê–≤—Ç–æ-–†–∞–∑–≥–æ–≤–æ—Ä üì£
// @name:rw             ChatGPT Ibyoguhindura üì£
// @name:sg             ChatGPT Auto-Y√¢ng√¢ üì£
// @name:si             ChatGPT ‡∑É‡∑ä‡∑Ä‡∂∫‡∂Ç‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂∫-‡∂ö‡∂≠‡∑è üì£
// @name:sk             ChatGPT Automatick√Ω-Rozhovor üì£
// @name:sl             ChatGPT Avtomatski-Pogovor üì£
// @name:sm             ChatGPT Fetalai-Otometi üì£
// @name:sn             ChatGPT Auto-Taurirana üì£
// @name:so             ChatGPT Hadal-otomaatig ah üì£
// @name:sr             ChatGPT –ê—É—Ç–æ-–†–∞–∑–≥–æ–≤–æ—Ä üì£
// @name:sv             ChatGPT Auto-Prata üì£
// @name:sw             ChatGPT Maongezi-Otomatiki üì£
// @name:ta             ChatGPT ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá-‡Æ™‡Øá‡Æö‡Øç‡Æö‡ØÅ üì£
// @name:te             ChatGPT ‡∞Ü‡∞ü‡±ã-‡∞Æ‡∞æ‡∞ü üì£
// @name:tg             ChatGPT –ê–≤—Ç–æ-–ì–∞–ø üì£
// @name:th             ChatGPT ‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ üì£
// @name:ti             ChatGPT ·ä•·àµ·ä´·àù·àç·ä≠·â≤-·âÉ·àç ·ä£·âê·à™·â° üì£
// @name:tk             ChatGPT Auto-Dialog üì£
// @name:tn             ChatGPT Auto-Matla üì£
// @name:to             ChatGPT Fakamatala-Otometi üì£
// @name:tpi            ChatGPT Autometik-Tok üì£
// @name:tr             ChatGPT Otomatik-Konu≈üma üì£
// @name:uk             ChatGPT –ê–≤—Ç–æ-–†–æ–∑–º–æ–≤–∞ üì£
// @name:ur             ChatGPT ÿÆŸàÿØ⁄©ÿßÿ±-ÿ®ÿßÿ™ üì£
// @name:uz             ChatGPT Avto-Suhbat üì£
// @name:vi             ChatGPT T·ª±-ƒê·ªông-N√≥i üì£
// @name:xh             ChatGPT IyaZenzekelayo-Thetha üì£
// @name:yi             ChatGPT ◊ê÷∑◊ï◊ò◊ê÷∏-◊®◊¢◊ì◊ü üì£
// @name:zh             ChatGPT Ëá™Âä®Ë∞àËØù üì£
// @name:zh-CN          ChatGPT Ëá™Âä®Ë∞àËØù üì£
// @name:zh-HK          ChatGPT Ëá™ÂãïË´áË©± üì£
// @name:zh-SG          ChatGPT Ëá™Âä®Ë∞àËØù üì£
// @name:zh-TW          ChatGPT Ëá™ÂãïË´áË©± üì£
// @name:zu             ChatGPT Ukuzenzakalela-Ukhuluma üì£
// @description         Automatically play ChatGPT responses
// @description:af      Speel ChatGPT-antwoorde outomaties af
// @description:am      ·àù·à≠·àò·à´ ChatGPT ·àù·àã·àæ·âΩ·äï ·â†·à´·àµ-·à∞·à≠
// @description:ar      ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ±ÿØŸàÿØ ChatGPT ÿ™ŸÑŸÇÿßÿ¶ŸäŸãÿß
// @description:az      ChatGPT cavablarƒ±nƒ± avtomatik olaraq oynat
// @description:be      –ê—û—Ç–∞–º–∞—Ç—ã—á–Ω–∞–µ –ø—Ä–∞–π–≥—Ä–∞–≤–∞–Ω–Ω–µ –∞–¥–∫–∞–∑–∞—û ChatGPT
// @description:bem     Panga zolingana pa ChatGPT mwankhama
// @description:bg      –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ä–∑–ø—Ä–æ–∏–∑–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏ –æ—Ç ChatGPT
// @description:bn      ChatGPT ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡ßÅ‡¶®
// @description:bo      ChatGPT ‡Ω£‡æü‡Ω∫‡ºã‡Ωñ‡Ω§‡Ωº‡Ω£‡ºã‡Ω¢‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºã‡Ω¶‡æê‡Ωë‡ºã‡Ω¶‡æí‡æ≤‡Ωº‡Ωì‡ºã‡Ω†‡ΩÇ‡æ≤‡Ωº
// @description:bs      Automatski reproducirajte odgovore ChatGPT-a
// @description:ca      Reproduir autom√†ticament les respostes de ChatGPT
// @description:ceb     Awomatikong pagdula sa mga tubag sa ChatGPT
// @description:ckb     ÿ®€ïÿ±ÿ≤⁄©ÿ±ÿØŸÜ€å Ÿà€ï⁄µÿßŸÖ€ï⁄©ÿßŸÜ€å ChatGPT ÿ®€ï ÿ¥€éŸà€ï€å ÿÆ€Ü⁄©ÿßÿ±
// @description:cs      Automatick√© p≈ôehr√°v√°n√≠ odpovƒõd√≠ ChatGPT
// @description:cy      Chwarae atebion ChatGPT yn awtomatig
// @description:da      Afspil ChatGPT-svar automatisk
// @description:de      ChatGPT-Antworten automatisch abspielen
// @description:dv      ChatGPT ﬁñﬁ¨ﬁÄﬁ®ﬁãﬁßﬁÇﬁ∞ ﬁáﬁÆﬁìﬁØﬁáﬁ¨ﬁàﬁ¨ﬁáﬁ∞ﬁàﬁ®ﬁãﬁßﬁÇﬁ¨ﬁáﬁ∞ ﬁÜﬁ™ﬁÉﬁ≠
// @description:dz      ChatGPT ‡Ωñ‡Ω¢‡æí‡æ±‡Ω¥‡Ωë‡ºã‡ΩÇ‡Ωè‡Ωº‡ΩÑ‡ºã‡Ω¢‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºã‡Ω¶‡æê‡Ωë‡ºã‡Ω¶‡æí‡æ≤‡Ωº‡Ωì‡ºã‡Ω†‡ΩÇ‡æ≤‡Ωº
// @description:el      ŒëœÖœÑœåŒºŒ±œÑŒ∑ Œ±ŒΩŒ±œÄŒ±œÅŒ±Œ≥œâŒ≥ŒÆ Œ±œÄŒ±ŒΩœÑŒÆœÉŒµœâŒΩ ChatGPT
// @description:eo      A≈≠tomate ludi ChatGPT-respondojn
// @description:es      Reproducir autom√°ticamente respuestas de ChatGPT
// @description:et      ChatGPT vastuste automaatne esitamine
// @description:eu      ChatGPT erantzunak automatikoki erreproduzitu
// @description:fa      ŸæÿÆÿ¥ ÿÆŸàÿØ⁄©ÿßÿ± Ÿæÿßÿ≥ÿÆŸáÿß€å ChatGPT
// @description:fi      Toista ChatGPT-vastaukset automaattisesti
// @description:fo      Sp√¶l ChatGPT svar sj√°lvvirkandi
// @description:fr      Lire automatiquement les r√©ponses de ChatGPT
// @description:fr-CA   Lire automatiquement les r√©ponses de ChatGPT
// @description:gd      Cluich gu f√®in-ghluasadach freagairtean ChatGPT
// @description:gl      Reproducir automaticamente as respostas de ChatGPT
// @description:gu      ChatGPT ‡™™‡´ç‡™∞‡™§‡™ø‡™ï‡´ç‡™∞‡™ø‡™Ø‡™æ‡™ì ‡™Ü‡™™‡´ã‡™Ü‡™™ ‡™µ‡™ó‡™æ‡™°‡´ã
// @description:haw     Ho ªopa ªapa ªa i nƒÅ pane ChatGPT ma ka automate
// @description:he      ◊î◊©◊û◊¢ ◊™◊í◊ï◊ë◊ï◊™ ChatGPT ◊ë◊ê◊ï◊§◊ü ◊ê◊ï◊ò◊ï◊û◊ò◊ô
// @description:hi      ChatGPT ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ö‡§≤‡§æ‡§è‡§Ç
// @description:hr      Automatski reproducirajte odgovore ChatGPT-a
// @description:ht      Jwe repons ChatGPT otomatikman
// @description:hu      ChatGPT-v√°laszok automatikus lej√°tsz√°sa
// @description:hy      ‘±’æ’ø’∏’¥’°’ø ’∂’æ’°’£’°÷Ä’Ø’•’¨ ChatGPT-’´ ’∫’°’ø’°’Ω’≠’°’∂’∂’•÷Ä’®
// @description:id      Mainkan respons ChatGPT secara otomatis
// @description:is      Spila√∞u sj√°lfkrafa sv√∂r ChatGPT
// @description:it      Riprodurre automaticamente le risposte di ChatGPT
// @description:ja      ChatGPT „ÅÆÂõûÁ≠î„ÇíËá™ÂãïÁöÑ„Å´ÂÜçÁîü„Åô„Çã
// @description:jv      Puter balasan ChatGPT kanthi otomatis
// @description:ka      ·Éê·Éï·É¢·Éù·Éõ·Éê·É¢·É£·É†·Éê·Éì ·Éò·Éó·Éê·Éõ·Éê·É®·Éî·Éó ChatGPT ·Éû·Éê·É°·É£·ÉÆ·Éî·Éë·Éò
// @description:kab     Melk ikdimen n d-yitran n ChatGPT
// @description:kk      ChatGPT –∂–∞—É–∞–ø—Ç–∞—Ä—ã–Ω –∞–≤—Ç–æ–º–∞—Ç—Ç—ã —Ç“Ø—Ä–¥–µ –æ–π–Ω–∞—Ç—É
// @description:km      ·ûõ·üÅ·ûÑ·ûÄ·û∂·ûö·ûÜ·üí·ûõ·ûæ·ûô·ûè·ûî·ûö·ûî·ûü·üã ChatGPT ·ûä·üÑ·ûô·ûü·üí·ûú·üê·ûô·ûî·üí·ûö·ûú·ûè·üí·ûè·û∑
// @description:kn      ChatGPT ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥ç‡≤µ‡≤Ø‡≤Ç‡≤ö‡≤æ‡≤≤‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤™‡≥ç‡≤≤‡≥á ‡≤Æ‡≤æ‡≤°‡≤ø
// @description:ko      ChatGPT ÏùëÎãµ ÏûêÎèô Ïû¨ÏÉù
// @description:ku      Serdana erebey√Æyan bi xweka y√™n ChatGPT bixwe
// @description:ky      ChatGPT –∂–æ–æ–ø—Ç–æ—Ä—É–Ω –∞–≤—Ç–æ–º–∞—Ç—Ç—ã–∫ —Ç“Ø—Ä–¥”© –æ–π–Ω–æ—Ç—É—É
// @description:la      Lude responsiones ChatGPT automatice
// @description:lb      ChatGPT-√Ñntwerten automatesch ofspillen
// @description:lo      ‡∫Ñ‡∫ß‡∫≤‡∫°‡∫™‡∫ª‡∫°‡∫û‡∫≤‡∫î ChatGPT ‡ªÉ‡∫ô‡∫ï‡∫ª‡∫ß‡ªÄ‡∫≠‡∫á
// @description:lt      Automati≈°kai leisti ChatGPT atsakymus
// @description:lv      AutomƒÅtiski atska≈Üot ChatGPT atbildes
// @description:mg      Alefaso ho azy ny valintenin'i ChatGPT
// @description:mi      Purei aunoa i ngƒÅ whakautu a ChatGPT
// @description:mk      –ê–≤—Ç–æ–º–∞—Ç—Å–∫–∏ –ø—É—à—Ç–∞—ò –æ–¥–≥–æ–≤–æ—Ä–∏ –Ω–∞ ChatGPT
// @description:ml      ChatGPT ‡¥™‡µç‡¥∞‡¥§‡¥ø‡¥ï‡¥∞‡¥£‡¥ô‡µç‡¥ô‡µæ ‡¥∏‡µç‡¥µ‡¥Ø‡¥Æ‡µá‡¥µ ‡¥™‡µç‡¥≤‡µá ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï
// @description:mn      ChatGPT —Ö–∞—Ä–∏—É–ª—Ç—ã–≥ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Ç–æ–≥–ª—É—É–ª–∞—Ö
// @description:ms      Mainkan tindak balas ChatGPT secara automatik
// @description:mt      Awtomatikament iddoqq ir-risposti ta' ChatGPT
// @description:my      ChatGPT ·Åè·Äê·ÄØ·Ä∂·Ä∑·Äï·Äº·Äî·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Ä°·Äú·Ä≠·ÄØ·Ä°·Äú·Äª·Ä±·Ä¨·ÄÄ·Ä∫ ·Äñ·ÄΩ·ÄÑ·Ä∑·Ä∫·Äï·Ä´
// @description:ne      ChatGPT ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§π‡§∞‡•Ç ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™‡§Æ‡§æ ‡§™‡•ç‡§≤‡•á ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç
// @description:nl      Speel ChatGPT-antwoorden automatisch af
// @description:no      Spill ChatGPT-svar automatisk
// @description:ny      Sewera mayankho a ChatGPT zokha
// @description:pa      ChatGPT ‡®¶‡©á ‡®ú‡®µ‡®æ‡®¨ ‡®Ü‡®ü‡©ã‡®Æ‡©à‡®ü‡®ø‡®ï ‡®ö‡®≤‡®æ‡®ì
// @description:pap     Hunga respuesta di ChatGPT otom√°tikamente
// @description:pl      Automatyczne odtwarzanie odpowiedzi ChatGPT
// @description:ps      ÿØ ChatGPT ⁄ÅŸàÿßÿ®ŸàŸÜŸá ŸæŸá ÿßŸàÿ™ŸàŸÖÿßÿ™ ⁄âŸàŸÑ ŸÑŸàÿ®€ê ⁄©⁄ìÿ¶
// @description:pt      Reproduzir automaticamente respostas do ChatGPT
// @description:pt-BR   Reproduzir automaticamente respostas do ChatGPT
// @description:rn      Gukina ivyishura vya ChatGPT ku buryo bwikora
// @description:ro      Reda»õi automat rƒÉspunsurile ChatGPT
// @description:ru      –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ ChatGPT
// @description:rw      Gukina ibisubizo bya ChatGPT ku buryo bwikora
// @description:sg      Gbangba ko ye tere ChatGPT makumba mbene
// @description:si      ChatGPT ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂†‡∑è‡∂ª ‡∑É‡∑ä‡∑Ä‡∂∫‡∂Ç‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂∫‡∑Ä ‡∂¥‡∑ä‡∂Ω‡∑ö ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
// @description:sk      Automatick√© prehr√°vanie odpoved√≠ ChatGPT
// @description:sl      Samodejno predvajaj odgovore ChatGPT
// @description:sm      Ta ªa otometi tali a le ChatGPT
// @description:sn      Tumira otomatiki mhinduro dzeChatGPT
// @description:so      Si toos ah u ciyaar jawaabaha ChatGPT
// @description:sr      –ê—É—Ç–æ–º–∞—Ç—Å–∫–∏ –ø—É—à—Ç–∞—ò—Ç–µ –æ–¥–≥–æ–≤–æ—Ä–µ ChatGPT-–∞
// @description:sv      Spela upp ChatGPT-svar automatiskt
// @description:sw      Chezesha majibu ya ChatGPT kiotomatiki
// @description:ta      ChatGPT ‡Æ™‡Æ§‡Æø‡Æ≤‡Øç‡Æï‡Æ≥‡Øà ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá ‡Æá‡ÆØ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç
// @description:te      ChatGPT ‡∞™‡±ç‡∞∞‡∞§‡∞ø‡∞∏‡±ç‡∞™‡∞Ç‡∞¶‡∞®‡∞≤‡∞®‡±Å ‡∞Ü‡∞ü‡±ã‡∞Æ‡±á‡∞ü‡∞ø‡∞ï‡±ç ‡∞ó‡∞æ ‡∞™‡±ç‡∞≤‡±á ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
// @description:tg      –ë–∞ —Ç–∞–≤—Ä–∏ —Ö—É–¥–∫–æ—Ä “∑–∞–≤–æ–±“≥–æ–∏ ChatGPT-—Ä–æ –Ω–∞–≤–æ–∑–µ–¥
// @description:th      ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á ChatGPT ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
// @description:ti      ·ä•·â∂·àù ·àù·àã·ä• ·â•·ä£·ãç·â∂·àõ·â≤·ä≠ ·äï·ä•·àΩ·â∂ ChatGPT ·ä•·â∂·àù ·ä•·ã© ·ä≠·äï·ãï·ãò·àù·â• ·ä•·ã©
// @description:tk      ChatGPT jogaplaryny awtomatiki o√Ωnamak
// @description:tn      Dira karabo tsa ChatGPT ka boitsamaisi
// @description:to      Tataki ke tali  ªo e ChatGPT ‚Äòi he ngaahi fakamatala faka‚Äòotometiki
// @description:tpi     Pleiim ol toktok blong ChatGPT olsem otomat
// @description:tr      ChatGPT yanƒ±tlarƒ±nƒ± otomatik olarak oynat
// @description:uk      –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ ChatGPT
// @description:ur      ÿÆŸàÿØ⁄©ÿßÿ± ÿ∑Ÿàÿ± Ÿæÿ± ChatGPT ÿ¨Ÿàÿßÿ®ÿßÿ™ ⁄ÜŸÑÿßÿ¶€å⁄∫
// @description:uz      ChatGPT javoblarini avtomatik ijro etish
// @description:vi      T·ª± ƒë·ªông ph√°t c√°c ph·∫£n h·ªìi c·ªßa ChatGPT
// @description:xh      Dlala iimpendulo zeChatGPT ngokuzenzekelayo
// @description:yi      ◊©◊§÷º◊ô◊ú ◊ê◊ï◊ô◊ò◊ê÷∏◊û◊ê÷∑◊ò◊ô◊© ChatGPT ◊¢◊†◊ò◊§÷ø◊¢◊®◊°
// @description:zh      Ëá™Âä®Êí≠Êîæ ChatGPT ÁöÑÂõûÂ§ç
// @description:zh-CN   Ëá™Âä®Êí≠Êîæ ChatGPT ÁöÑÂõûÂ§ç
// @description:zh-HK   Ëá™ÂãïÊí≠Êîæ ChatGPT ÁöÑÂõûË¶Ü
// @description:zh-SG   Ëá™Âä®Êí≠Êîæ ChatGPT ÁöÑÂõûÂ§ç
// @description:zh-TW   Ëá™ÂãïÊí≠Êîæ ChatGPT ÁöÑÂõûË¶Ü
// @description:zu      Dlala izimpendulo ze-ChatGPT ngokuzenzakalela
// @author              Adam Lui
// @namespace           https://github.com/adamlui
// @version             2024.9.29.4
// @license             MIT
// @icon                https://cdn.jsdelivr.net/gh/adamlui/chatgpt-auto-talk@9f1ed3c/assets/images/icons/openai/black/icon48.png
// @icon64              https://cdn.jsdelivr.net/gh/adamlui/chatgpt-auto-talk@9f1ed3c/assets/images/icons/openai/black/icon64.png
// @match               *://chatgpt.com/*
// @match               *://chat.openai.com/*
// @require             https://cdn.jsdelivr.net/npm/@kudoai/chatgpt.js@3.3.2/dist/chatgpt.min.js#sha256-Km9krlhXv0+GNYIkPGpWra6wVqBxlikiHuhsBIK8X0k=
// @connect             cdn.jsdelivr.net
// @connect             greasyfork.org
// @grant               GM_setValue
// @grant               GM_getValue
// @grant               GM_registerMenuCommand
// @grant               GM_unregisterMenuCommand
// @grant               GM_xmlhttpRequest
// @grant               GM.xmlHttpRequest
// @noframes
// @downloadURL         https://update.greasyfork.org/scripts/500940/autoclear-chatgpt-history.user.js
// @updateURL           https://update.greasyfork.org/scripts/500940/autoclear-chatgpt-history.meta.js
// @homepageURL         https://github.com/adamlui/chatgpt-auto-talk
// @supportURL          https://github.com/adamlui/chatgpt-auto-talk/issues
// @contributionURL     https://github.com/sponsors/adamlui
// ==/UserScript==

// NOTE: This script relies on the powerful chatgpt.js library @ https://chatgpt.js.org ¬© 2023‚Äì2024 KudoAI & contributors under the MIT license.

(async () => {

    // Init APP info
    const app = {
        name: 'ChatGPT Auto-Talk', symbol: 'üì£', configKeyPrefix: 'chatGPTautoTalk',
        author: { name: 'Adam Lui', url: 'https://github.com/adamlui' },
        urls: {
            chatgptJS: 'https://chatgpt.js.org',
            donate: {
                cashApp: 'https://cash.app/$adamlui',
                gitHub: 'https://github.com/sponsors/adamlui',
                payPal: 'https://paypal.me/adamlui'
            },
            gitHub: 'https://github.com/adamlui/chatgpt-auto-talk',
            greasyFork: 'https://greasyfork.org/en/scripts/500940-chatgpt-auto-talk',
            relatedApps: 'https://github.com/adamlui/chatgpt-apps'
        },
        latestAssetCommitHash: 'a4490ec' // for cached messages.json + navicon
    }
    app.urls.assetHost = app.urls.gitHub.replace('github.com', 'cdn.jsdelivr.net/gh') + `@${app.latestAssetCommitHash}`
    app.urls.support = app.urls.gitHub + '/issues/new'
    app.urls.update = app.urls.greasyFork.replace('https://', 'https://update.')
        .replace(/(\d+)-?([a-zA-Z-]*)$/, (_, id, name) => `${id}/${ name || 'script' }.meta.js`)

    // Init ENV info
    const env = {
        browser: { isMobile: chatgpt.browser.isMobile(), isFF: chatgpt.browser.isFirefox() },
        scriptManager: (() => { try { return GM_info.scriptHandler } catch (err) { return 'other' }})()
    }

    // Init CONFIG
    const config = { userLanguage: chatgpt.getUserLanguage() }
    const settings = {
        load(...keys) {
            if (Array.isArray(keys[0])) keys = keys[0] // use 1st array arg, else all comma-separated ones
            keys.forEach(key => config[key] = GM_getValue(app.configKeyPrefix + '_' + key, false))
        },
        save(key, value) { GM_setValue(app.configKeyPrefix + '_' + key, value) ; config[key] = value }
    } ; settings.load('autoTalkDisabled', 'toggleHidden')

    // Init app MESSAGES
    const xhr = env.scriptManager == 'OrangeMonkey' ? GM_xmlhttpRequest : GM.xmlHttpRequest
    app.msgs = {
        appName: app.name,
        appAuthor: app.author.name,
        appDesc: 'Automatically play ChatGPT responses',
        menuLabel_toggleVis: 'Toggle Visibility',
        menuLabel_about: 'About',
        menuLabel_donate: 'Please send a donation',
        about_version: 'Version',
        about_poweredBy: 'Powered by',
        about_sourceCode: 'Source code',
        mode_autoTalk: 'Auto-Talk',
        alert_updateAvail: 'Update available',
        alert_newerVer: 'An update to',
        alert_isAvail: 'is available',
        alert_upToDate: 'Up-to-date',
        alert_showYourSupport: 'Show your support',
        alert_isOSS: 'is open-source software built & maintained for free through 100% volunteer efforts',
        alert_despiteAffliction: 'Despite being severely afflicted by',
        alert_longCOVID: 'long COVID',
        alert_since2020: 'since 2020',
        alert_byDonatingResults: 'by donating, you help me to continue improving, fixing bugs, adding new features, and making the software even better',
        alert_yourContrib: 'Your contribution',
        alert_noMatterSize: 'no matter the size',
        alert_directlySupports: 'directly supports my unpaid efforts to ensure this project remains free and open for all to use',
        alert_tyForSupport: 'Thank you for your support',
        alert_author: 'author',
        alert_isUpToDate: 'is up-to-date',
        btnLabel_moreApps: 'More ChatGPT Apps',
        btnLabel_leaveReview: 'Leave Review',
        btnLabel_getSupport: 'Get Support',
        btnLabel_updateCheck: 'Check for Updates',
        btnLabel_update: 'Update',
        btnLabel_dismiss: 'Dismiss',
        link_viewChanges: 'View changes',
        state_enabled: 'enabled',
        state_disabled: 'disabled',
        state_on: 'on',
        state_off: 'off'
    }
    if (!config.userLanguage.startsWith('en')) { // localize msgs for non-English users
        const localizedMsgs = await new Promise(resolve => {
            const msgHostDir = app.urls.assetHost + '/greasemonkey/_locales/',
                  msgLocaleDir = ( config.userLanguage ? config.userLanguage.replace('-', '_') : 'en' ) + '/'
            let msgHref = msgHostDir + msgLocaleDir + 'messages.json', msgXHRtries = 0
            function fetchMsgs() { xhr({ method: 'GET', url: msgHref, onload: handleMsgs })}
            function handleMsgs(resp) {
                try { // to return localized messages.json
                    const msgs = JSON.parse(resp.responseText), flatMsgs = {}
                    for (const key in msgs)  // remove need to ref nested keys
                        if (typeof msgs[key] == 'object' && 'message' in msgs[key])
                            flatMsgs[key] = msgs[key].message
                    resolve(flatMsgs)
                } catch (err) { // if bad response
                    msgXHRtries++ ; if (msgXHRtries == 3) return resolve({}) // try up to 3X (original/region-stripped/EN) only
                    msgHref = config.userLanguage.includes('-') && msgXHRtries == 1 ? // if regional lang on 1st try...
                        msgHref.replace(/([^_]+_[^_]+)_[^/]*(\/.*)/, '$1$2') // ...strip region before retrying
                            : ( msgHostDir + 'en/messages.json' ) // else use default English messages
                    fetchMsgs()
                }
            }
            fetchMsgs()
        })
        Object.assign(app.msgs, localizedMsgs)
    }

    // Define MENU functions
    
    const menu = {
        ids: [], state: {
            symbols: ['‚ùå', '‚úîÔ∏è'], separator: env.scriptManager == 'Tampermonkey' ? ' ‚Äî ' : ': ',
            words: [(app.msgs.state_off).toUpperCase(), (app.msgs.state_on).toUpperCase()]
        },

        register() {

            // Add Auto-Talk toggle
            const atLabel = menu.state.symbols[+!config.autoTalkDisabled] + ' '
                          + ( app.msgs.mode_autoTalk )
                          + menu.state.separator + menu.state.words[+!config.autoTalkDisabled]
            menu.ids.push(GM_registerMenuCommand(atLabel, () => document.getElementById('auto-talk-toggle-label').click()))

            // Add Toggle Visibility toggle
            const tvLabel = menu.state.symbols[+!config.toggleHidden] + ' '
                          + ( app.msgs.menuLabel_toggleVis )
                          + menu.state.separator + menu.state.words[+!config.toggleHidden]
            menu.ids.push(GM_registerMenuCommand(tvLabel, () => {
                settings.save('toggleHidden', !config.toggleHidden)
                navToggleDiv.style.display = config.toggleHidden ? 'none' : 'flex' // toggle visibility
                notify(`${app.msgs.menuLabel_toggleVis}: ${menu.state.words[+!config.toggleHidden]}`)
                menu.refresh()
            }))

            // Add About entry
            const aboutLabel = `üí° ${app.msgs.menuLabel_about} ${app.msgs.appName}`
            menu.ids.push(GM_registerMenuCommand(aboutLabel, modals.about.show))

            // Add Donate entry
            const donateLabel = `üíñ ${app.msgs.menuLabel_donate}`
            menu.ids.push(GM_registerMenuCommand(donateLabel, modals.donate.show))
        },

        refresh() {
            if (env.scriptManager == 'OrangeMonkey') return
            for (const id of menu.ids) { GM_unregisterMenuCommand(id) } menu.register()
        }
    }

    function updateCheck() {

        // Fetch latest meta
        const currentVer = GM_info.script.version
        xhr({
            method: 'GET', url: app.urls.update + '?t=' + Date.now(),
            headers: { 'Cache-Control': 'no-cache' },
            onload: response => { const updateAlertWidth = 377

                // Compare versions
                const latestVer = /@version +(.*)/.exec(response.responseText)[1]
                for (let i = 0 ; i < 4 ; i++) { // loop thru subver's
                    const currentSubVer = parseInt(currentVer.split('.')[i], 10) || 0,
                          latestSubVer = parseInt(latestVer.split('.')[i], 10) || 0
                    if (currentSubVer > latestSubVer) break // out of comparison since not outdated
                    else if (latestSubVer > currentSubVer) { // if outdated

                        // Alert to update
                        const updateModalID = siteAlert(`üöÄ ${app.msgs.alert_updateAvail}!`, // title
                            `${app.msgs.alert_newerVer} ${app.msgs.appName} `
                                + `(v${latestVer}) ${app.msgs.alert_isAvail}!  `
                                + '<a target="_blank" rel="noopener" style="font-size: 0.7rem" '
                                    + 'href="' + app.urls.gitHub + '/commits/main/greasemonkey/'
                                    + app.urls.update.replace(/.*\/(.*)meta\.js/, '$1user.js') + '"'
                                    + `> ${app.msgs.link_viewChanges}</a>`,
                            function update() { // button
                                modals.safeWinOpen(app.urls.update.replace('meta.js', 'user.js') + '?t=' + Date.now())
                            }, '', updateAlertWidth
                        )

                        // Localize button labels if needed
                        if (!config.userLanguage.startsWith('en')) {
                            const updateAlert = document.querySelector(`[id="${updateModalID}"]`),
                                  updateBtns = updateAlert.querySelectorAll('button')
                            updateBtns[1].textContent = app.msgs.btnLabel_update
                            updateBtns[0].textContent = app.msgs.btnLabel_dismiss
                        }

                        return
                }}

                // Alert to no update, return to About modal
                siteAlert(`${app.msgs.alert_upToDate}!`, // title
                    `${app.msgs.appName} (v${currentVer}) ${app.msgs.alert_isUpToDate}!`, // msg
                    '', '', updateAlertWidth
                )
                modals.about.show()
    }})}

    // Define FEEDBACK functions

    function notify(msg, pos = '', notifDuration = '', shadow = '') {

        // Strip state word to append colored one later
        const foundState = menu.state.words.find(word => msg.includes(word))
        if (foundState) msg = msg.replace(foundState, '')

        // Show notification
        chatgpt.notify(`${app.symbol} ${msg}`, pos, notifDuration, shadow || chatgpt.isDarkMode() ? '' : 'shadow')
        const notif = document.querySelector('.chatgpt-notif:last-child')

        // Append styled state word
        if (foundState) {
            const styledState = document.createElement('span')
            styledState.style.cssText = `color: ${
                foundState == menu.state.words[0] ? '#ef4848 ; text-shadow: rgba(255, 169, 225, 0.44) 2px 1px 5px'
                                                : '#5cef48 ; text-shadow: rgba(255, 250, 169, 0.38) 2px 1px 5px' }`
            styledState.append(foundState) ; notif.append(styledState)
        }
    }

    function siteAlert(title = '', msg = '', btns = '', checkbox = '', width = '') {
        return chatgpt.alert(title, msg, btns, checkbox, width )}

    // Define MODAL functions

    const modals = {

        about: {
            show() {

                // Show alert
                const chatgptJSver = (/chatgpt-([\d.]+)\.min/.exec(GM_info.script.header) || [null, ''])[1],
                      headingStyle = 'font-size: 1.15rem',
                      pStyle = 'position: relative ; left: 3px',
                      pBrStyle = 'position: relative ; left: 4px ',
                      aStyle = 'color: ' + ( chatgpt.isDarkMode() ? '#c67afb' : '#8325c4' ) // purple
                const aboutModalID = siteAlert(
                    app.msgs.appName, // title
                    `<span style="${headingStyle}"><b>üè∑Ô∏è <i>${app.msgs.about_version}</i></b>: </span>`
                        + `<span style="${pStyle}">${GM_info.script.version}</span>\n`
                    + `<span style="${headingStyle}"><b>‚ö° <i>${app.msgs.about_poweredBy}</i></b>: </span>`
                        + `<span style="${pStyle}"><a style="${aStyle}" href="${app.urls.chatgptJS}" target="_blank" rel="noopener">`
                        + 'chatgpt.js</a>' + ( chatgptJSver ? ( ' v' + chatgptJSver ) : '' ) + '</span>\n'
                    + `<span style="${headingStyle}"><b>üìú <i>${app.msgs.about_sourceCode}</i></b>:</span>\n`
                        + `<span style="${pBrStyle}"><a href="${app.urls.gitHub}" target="_blank" rel="nopener">`
                        + app.urls.gitHub + '</a></span>',
                    [ // buttons
                        function checkForUpdates() { updateCheck() },
                        function getSupport() { modals.safeWinOpen(app.urls.support) },
                        function leaveAReview() { modals.safeWinOpen(app.urls.greasyFork + '/feedback#post-discussion') },
                        function moreChatGPTapps() { modals.safeWinOpen(app.urls.relatedApps) }
                    ], '', 478 // set width
                )
        
                // Re-format buttons to include emoji + localized label + hide Dismiss button
                for (const button of document.getElementById(aboutModalID).querySelectorAll('button')) {
                    if (/updates/i.test(button.textContent)) button.textContent = (
                        'üöÄ ' + ( app.msgs.btnLabel_updateCheck ))
                    else if (/support/i.test(button.textContent)) button.textContent = (
                        'üß† ' + ( app.msgs.btnLabel_getSupport ))
                    else if (/review/i.test(button.textContent)) button.textContent = (
                        '‚≠ê ' + ( app.msgs.btnLabel_leaveReview ))
                    else if (/apps/i.test(button.textContent)) button.textContent = (
                        'ü§ñ ' + ( app.msgs.btnLabel_moreApps ))
                    else button.style.display = 'none' // hide Dismiss button
                }
            }
        },

        donate: {
            longCOVIDwikiLink: 'https://en.wikipedia.org/wiki/Long_COVID',

            show() {

                // Show alert
                const donateModalID = siteAlert(
                    `üíñ ${app.msgs.alert_showYourSupport}`, // title
                        `<p><b>${app.msgs.appName}</b> ${app.msgs.alert_isOSS}.</p>`
                      + `<p>${app.msgs.alert_despiteAffliction} `
                          + `<a target="_blank" rel="noopener" href="${modals.donate.longCOVIDwikiLink}">${app.msgs.alert_longCOVID}</a> `
                          + `${app.msgs.alert_since2020}, ${app.msgs.alert_byDonatingResults}.</p>`
                      + `<p>${app.msgs.alert_yourContrib}, <b>${app.msgs.alert_noMatterSize}</b>, ${app.msgs.alert_directlySupports}.</p>`
                      + `<p>${app.msgs.alert_tyForSupport}!</p>`
                      + `<img src="https://cdn.jsdelivr.net/gh/adamlui/adamlui/images/siggie/${ chatgpt.isDarkMode() ? 'white' : 'black' }.png"`
                          + ' style="height: 54px ; margin: 5px 0 -2px 5px"></img>'
                      + `<p>‚Äî<b><a target="_blank" rel="noopener" href="${app.author.url}">${app.msgs.appAuthor}</a></b>, ${app.msgs.alert_author}</p>`,
                    [ // buttons
                        function paypal() { modals.safeWinOpen(app.urls.payPal) },
                        function github() { modals.safeWinOpen(app.urls.gitHub) },
                        function cashApp() { modals.safeWinOpen(app.urls.cashApp) }
                    ], '', 478 // set width
                )

                // Format text
                const donateModal = document.getElementById(donateModalID)
                donateModal.querySelectorAll('p').forEach(p => // v-pad text, shrink line height
                    p.style.cssText = 'padding: 8px 0 ; line-height: 20px')

                // Format buttons
                const btns = donateModal.querySelectorAll('button')
                btns.forEach((btn, idx) => {
                    if (idx == 0) btn.style.display = 'none' // hide Dismiss button
                    else {
                        btn.style.cssText = 'padding: 8px 0 !important ; margin-top: -18px' // heighten + raise
                        if (idx == btns.length -1) btn.classList.remove('primary-modal-btn') // de-emphasize last link
                    }
                })
            }
        },

        safeWinOpen(url) { window.open(url, '_blank', 'noopener') } // to prevent backdoor vulnerabilities
    }

    // Define UI functions

    const sideToggle = {
        insert() {

            // Insert toggle
            const toggleParent = document.querySelector('nav')
            if (!toggleParent.contains(navToggleDiv))
                toggleParent.insertBefore(navToggleDiv, toggleParent.children[1])
    
            // Tweak styles
            navToggleDiv.style.flexGrow = 'unset' // overcome OpenAI .grow
            navToggleDiv.style.paddingLeft = '8px'
            document.getElementById('auto-talk-toggle-knob-span').style.boxShadow = (
                'rgba(0, 0, 0, .3) 0 1px 2px 0' + ( chatgpt.isDarkMode() ? ', rgba(0, 0, 0, .15) 0 3px 6px 2px' : '' ))
            document.getElementById('auto-talk-toggle-navicon').src = `${ // update navicon color in case scheme changed
                app.urls.assetHost }/assets/images/icons/speaker/${
                chatgpt.isDarkMode() ? 'white' : 'black' }-icon.svg`
        },

        update() {

            // Create/size/position navicon
            const navicon = document.getElementById('auto-talk-toggle-navicon') || document.createElement('img')
            navicon.id = 'auto-talk-toggle-navicon'
            navicon.style.width = navicon.style.height = '1.25rem'
            navicon.style.marginLeft = '2px' ; navicon.style.marginRight = '4px'
    
            // Create/ID/disable/hide/update checkbox
            const toggleInput = document.getElementById('auto-talk-toggle-input') || document.createElement('input')
            toggleInput.id = 'auto-talk-toggle-input' ; toggleInput.type = 'checkbox' ; toggleInput.disabled = true
            toggleInput.style.display = 'none' ; toggleInput.checked = !config.autoTalkDisabled
    
            // Create/ID/stylize switch
            const switchSpan = document.getElementById('atSwitchSpan') || document.createElement('span')
            switchSpan.id = 'atSwitchSpan'
            const switchStyles = {
                position: 'relative', left: `${ env.browser.isMobile ? 211 : !ui.firstLink ? 160 : 154 }px`,
                backgroundColor: toggleInput.checked ? '#ccc' : '#AD68FF', // init opposite  final color
                bottom: `${ !ui.firstLink ? -0.15 : env.browser.isFF ? 0.05 : 0 }em`,
                width: '30px', height: '15px', '-webkit-transition': '.4s', transition: '0.4s',  borderRadius: '28px'
            }
            Object.assign(switchSpan.style, switchStyles)
    
            // Create/ID/stylize knob, append to switch
            const knobSpan = document.getElementById('auto-talk-toggle-knob-span') || document.createElement('span')
            knobSpan.id = 'auto-talk-toggle-knob-span'
            const knobStyles = {
                position: 'absolute', left: '3px', bottom: '1.25px',
                width: '12px', height: '12px', content: '""', borderRadius: '28px',
                transform: toggleInput.checked ? // init opposite final pos
                    'translateX(0)' : 'translateX(13px) translateY(0)',
                backgroundColor: 'white',  '-webkit-transition': '0.4s', transition: '0.4s'
            }
            Object.assign(knobSpan.style, knobStyles) ; switchSpan.append(knobSpan)
    
            // Create/ID/stylize/fill label
            const toggleLabel = document.getElementById('auto-talk-toggle-label') || document.createElement('label')
            toggleLabel.id = 'auto-talk-toggle-label'
            if (!ui.firstLink) { // add font size/weight since no ui.firstLink to borrow from
                toggleLabel.style.fontSize = '0.875rem' ; toggleLabel.style.fontWeight = 600 }
            toggleLabel.style.marginLeft = `-${ !ui.firstLink ? 23 : 41 }px` // left-shift to navicon
            toggleLabel.style.cursor = 'pointer' // add finger cursor on hover
            toggleLabel.style.width = `${ env.browser.isMobile ? 201 : 148 }px` // to truncate overflown text
            toggleLabel.style.overflow = 'hidden' // to truncate overflown text
            toggleLabel.style.textOverflow = 'ellipsis' // to truncate overflown text
            toggleLabel.innerText = ( app.msgs.mode_autoTalk ) + ' '
                                  + ( toggleInput.checked ? ( app.msgs.state_enabled  || 'enabled' )
                                                          : ( app.msgs.state_disabled ))
            // Append elements
            for (const elem of [navicon, toggleInput, switchSpan, toggleLabel]) navToggleDiv.append(elem)
    
            // Update visual state
            navToggleDiv.style.display = config.toggleHidden ? 'none' : 'flex'
            setTimeout(() => {
                switchSpan.style.backgroundColor = toggleInput.checked ? '#ad68ff' : '#ccc'
                switchSpan.style.boxShadow = toggleInput.checked ? '2px 1px 9px #d8a9ff' : 'none'
                knobSpan.style.transform = toggleInput.checked ? 'translateX(13px) translateY(0)' : 'translateX(0)'
            }, 1) // min delay to trigger transition fx
        }
    }

    // Run MAIN routine

    menu.register() // create browser toolbar menu

    // Init BROWSER/UI props
    await Promise.race([chatgpt.isLoaded(), new Promise(resolve => setTimeout(resolve, 5000))]) // initial UI loaded
    await chatgpt.sidebar.isLoaded()
    const ui = { firstLink: chatgpt.getNewChatLink() }

    // Add/update TWEAKS style
    const tweaksStyleUpdated = 20240724 // datestamp of last edit for this file's `tweaksStyle`
    let tweaksStyle = document.getElementById('tweaks-style') // try to select existing style
    if (!tweaksStyle || parseInt(tweaksStyle.getAttribute('last-updated'), 10) < tweaksStyleUpdated) { // if missing or outdated
        if (!tweaksStyle) { // outright missing, create/id/attr/append it first
            tweaksStyle = document.createElement('style') ; tweaksStyle.id = 'tweaks-style'
            tweaksStyle.setAttribute('last-updated', tweaksStyleUpdated.toString())
            document.head.append(tweaksStyle)
        }
        tweaksStyle.innerText = (
            ( chatgpt.isDarkMode() ? '.chatgpt-modal > div { border: 1px solid white }' : '' )
          + '.chatgpt-modal button {'
              + 'font-size: 0.77rem ; text-transform: uppercase ;'
              + 'border-radius: 0 !important ; padding: 5px !important ; min-width: 102px }'
          + '.chatgpt-modal button:hover { transform: scale(1.055) }'
          + '.modal-buttons { margin-left: -13px !important }'
          + '* { scrollbar-width: thin }' // make FF scrollbar skinny to not crop toggle
          + '.sticky div:active, .sticky div:focus {' // post-GPT-4o UI sidebar button container
              + 'transform: none !important }' // disable distracting click zoom effect
        )
    }

    // Stylize ALERTS
    if (!document.getElementById('chatgpt-alert-override-style')) {
        const chatgptAlertStyle = document.createElement('style')
        chatgptAlertStyle.id = 'chatgpt-alert-override-style'
        chatgptAlertStyle.innerText = (
            ( chatgpt.isDarkMode() ? '.chatgpt-modal > div { border: 1px solid white }' : '' )
          + '.chatgpt-modal button {'
              + 'font-size: 0.77rem ; text-transform: uppercase ;'
              + 'border-radius: 0 !important ; padding: 5px !important ; min-width: 102px }'
          + '.modal-buttons { margin-left: -13px !important }'
        )
        document.head.append(chatgptAlertStyle)
    }

    // Create NAV TOGGLE div, add styles
    const navToggleDiv = document.createElement('div')
    navToggleDiv.style.height = '37px'
    navToggleDiv.style.margin = '2px 0' // add v-margins
    navToggleDiv.style.userSelect = 'none' // prevent highlighting
    navToggleDiv.style.cursor = 'pointer' // add finger cursor
    sideToggle.update() // create children
    if (ui.firstLink) { // borrow/assign CLASSES from sidebar div
        const firstIcon = ui.firstLink.querySelector('div:first-child'),
              firstLabel = ui.firstLink.querySelector('div:nth-child(2)')
        navToggleDiv.classList.add(...ui.firstLink.classList, ...(firstLabel?.classList || []))
        navToggleDiv.querySelector('img')?.classList.add(...(firstIcon?.classList || []))
    }

    sideToggle.insert()

    // Add LISTENER to toggle switch/label/config/menu
    navToggleDiv.onclick = () => {
        const toggleInput = document.getElementById('auto-talk-toggle-input')
        toggleInput.checked = !toggleInput.checked ; config.autoTalkDisabled = !toggleInput.checked
        sideToggle.update() ; menu.refresh()
        notify(`${app.msgs.mode_autoTalk}: ${menu.state.words[+!config.autoTalkDisabled]}`)
        settings.save('autoTalkDisabled', config.autoTalkDisabled)
    }

    // Observe <main> for need to AUTO-PLAY response
    await Promise.race([chatgpt.isLoaded(), new Promise(resolve => setTimeout(resolve, 1000))])
    const autoPlayObserver = new MutationObserver(mutationsList => {
        if (config.autoTalkDisabled) return
        for (const mutation of mutationsList) { if (mutation.type === 'childList')
            mutation.addedNodes.forEach(node => { if (node?.tagName == 'DIV') {
                const playIcon = node.querySelector('path[d^="M11 4.9099C11"]')
                if (playIcon) setTimeout(() => {
                    if (!chatgpt.getStopGeneratingButton())
                        playIcon.closest('button').click()
                }, 50)
    }})}})
    autoPlayObserver.observe(document.querySelector('main'), { childList: true, subtree: true })

})()
