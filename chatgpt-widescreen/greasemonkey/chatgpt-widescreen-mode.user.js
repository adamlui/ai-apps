// ==UserScript==
// @name                ChatGPT Widescreen Mode üñ•Ô∏è
// @name:af             ChatGPT Widescreen Modus üñ•Ô∏è
// @name:ar             ChatGPT Ÿàÿ∂ÿπ ÿ¥ÿßÿ¥ÿ© ÿπÿ±Ÿäÿ∂ÿ© üñ•Ô∏è
// @name:az             ChatGPT Geni≈ü Ekran Rejimi üñ•Ô∏è
// @name:be             ChatGPT –†—ç–∂—ã–º —à—ã—Ä–æ–∫–∞–≥–∞ —ç–∫—Ä–∞–Ω–∞ üñ•Ô∏è
// @name:bg             ChatGPT –®–∏—Ä–æ–∫–æ–µ–∫—Ä–∞–Ω–µ–Ω —Ä–µ–∂–∏–º üñ•Ô∏è
// @name:bn             ChatGPT ‡¶â‡¶á‡¶°‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶Æ‡ßã‡¶° üñ•Ô∏è
// @name:bo             ChatGPT ‡Ω¢‡æí‡æ±‡Ω¥‡ºã‡ΩÜ‡Ω∫‡Ωì‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºã‡Ωñ‡Ω¶‡æí‡æ≤‡Ω¥‡Ωñ‡ºã ‡Ω¢‡æí‡æ±‡Ω£‡ºã‡Ωñ‡Ω§‡Ωë‡ºç üñ•Ô∏è
// @name:bs             ChatGPT Re≈æim ≈°irokog ekrana üñ•Ô∏è
// @name:ca             ChatGPT Mode de pantalla ampla üñ•Ô∏è
// @name:ckb            ChatGPT ÿØ€ïÿ≥ÿ™⁄©ÿßÿ±€å ⁄ÜŸàÿßÿ±⁄Ü€éŸà€ï€å ⁄ïŸàŸà⁄©ÿßÿ±€å üñ•Ô∏è
// @name:cs             ChatGPT Re≈æim ≈°iroko√∫hl√© obrazovky üñ•Ô∏è
// @name:cy             ChatGPT Mod Sgrin Lled üñ•Ô∏è
// @name:da             ChatGPT Bredformat-tilstand üñ•Ô∏è
// @name:de             ChatGPT Breitbildmodus üñ•Ô∏è
// @name:dv             ChatGPT ﬁàﬁ®ﬁêﬁ∞ﬁÇﬁ™ﬁàﬁ¨ﬁáﬁ∞ ﬁâﬁØﬁëﬁ® üñ•Ô∏è
// @name:dz             ChatGPT ‡Ω†‡Ωñ‡æ≤‡Ω∫‡Ω£‡ºã‡Ωñ‡ºã‡ΩÇ‡Ωû‡Ω¥‡ΩÑ‡ºã‡Ω£‡Ω¶‡ºã‡Ω¶‡æ§‡æ±‡Ω≤‡ºã‡Ωö‡Ωº‡ΩÇ‡Ω¶‡ºã‡ΩÇ‡æ≥‡Ω∫‡ΩÑ‡ºã‡ºç üñ•Ô∏è
// @name:el             ChatGPT ŒõŒµŒπœÑŒøœÖœÅŒ≥ŒØŒ± ŒµœÖœÅŒµŒØŒ±œÇ ŒøŒ∏œåŒΩŒ∑œÇ üñ•Ô∏è
// @name:eo             ChatGPT Larƒùekrana reƒùimo üñ•Ô∏è
// @name:es             ChatGPT Modo de pantalla panor√°mica üñ•Ô∏è
// @name:et             ChatGPT Laiarakenduse re≈æiim üñ•Ô∏è
// @name:eu             ChatGPT Pantaila Zabalaren Modua üñ•Ô∏è
// @name:fa             ChatGPT ÿ≠ÿßŸÑÿ™ ÿ™ŸÑŸà€åÿ≤€åŸàŸÜ€å üñ•Ô∏è
// @name:fi             ChatGPT Laajakuva-tila üñ•Ô∏è
// @name:fo             ChatGPT B√∫√∞arforma√∞ur h√°ttur üñ•Ô∏è
// @name:fr             ChatGPT Mode √âcran Large üñ•Ô∏è
// @name:fr-CA          ChatGPT Mode √âcran Large üñ•Ô∏è
// @name:gd             ChatGPT Dreach-sgr√¨n Leud üñ•Ô∏è
// @name:gl             ChatGPT Modo de pantalla ancha üñ•Ô∏è
// @name:gu             ChatGPT ‡™™‡´ç‡™∞‡™∂‡™æ‡™Ç‡™§ ‡™∏‡´ç‡™ï‡´ç‡™∞‡´Ä‡™® ‡™Æ‡´ã‡™° üñ•Ô∏è
// @name:he             ChatGPT ◊û◊¶◊ë ◊û◊°◊ö ◊®◊ó◊ë üñ•Ô∏è
// @name:hi             ChatGPT ‡§ö‡§π‡§ö‡§ü‡§ú‡•Ä‡§™‡§ü‡•Ä ‡§µ‡§æ‡§á‡§°‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§Æ‡•ã‡§° üñ•Ô∏è
// @name:hr             ChatGPT Naƒçin ≈°irokog zaslona üñ•Ô∏è
// @name:ht             ChatGPT Mod Fomat Gwo üñ•Ô∏è
// @name:hu             ChatGPT Sz√©lesv√°szn√∫ m√≥d üñ•Ô∏è
// @name:hy             ChatGPT ’¨’°’µ’∂’ß’Ø÷Ä’°’∂’°’∂’∑’°’∂’´ ’º’•’™’´’¥ üñ•Ô∏è
// @name:id             ChatGPT Mode Layar Lebar üñ•Ô∏è
// @name:is             ChatGPT Brei√∞skj√°sstilling üñ•Ô∏è
// @name:it             ChatGPT Modalit√† schermo panoramica üñ•Ô∏è
// @name:ja             ChatGPT „ÉØ„Ç§„Éâ„Çπ„ÇØ„É™„Éº„É≥„É¢„Éº„Éâ üñ•Ô∏è
// @name:jv             ChatGPT Mode Layar Lebar üñ•Ô∏è
// @name:ka             ChatGPT ·É§·Éê·Éú·É¢·É°·Éê·É†·Éò·É®·Éò·É° ·É†·Éî·Éü·Éò·Éõ·Éò üñ•Ô∏è
// @name:kab            ChatGPT Amezwaru n Tikliwin Isellalen üñ•Ô∏è
// @name:kk             ChatGPT –ö”©–ª–µ“£–∫–µ—Å–∫–µ–Ω —Ç“Ø—Ä—ñ üñ•Ô∏è
// @name:km             ChatGPT ·ûö·ûî·üÄ·ûî·ûî·ûÑ·üí·û¢·ûü·üí·ûü·ûò·ûΩ·ûô·ûí·üí·ûú·ûæ·ûä·üÜ·ûî·ûº·ûÑ üñ•Ô∏è
// @name:kn             ChatGPT ChatGPT ‡≤µ‡≥à‡≤°‡≥ç‡≤∏‡≥ç‡≤ï‡≥ç‡≤∞‡≥Ä‡≤®‡≥ç ‡≤Æ‡≥ã‡≤°‡≥ç üñ•Ô∏è
// @name:ko             ChatGPT ÏôÄÏù¥Îìú Ïä§ÌÅ¨Î¶∞ Î™®Îìú üñ•Ô∏è
// @name:ku             ChatGPT Moda P√™l√™n Dir√™j üñ•Ô∏è
// @name:ky             ChatGPT –ñ–æ–≥–æ—Ä–∫—É –≠–∫—Ä–∞–Ω–¥—ã–∫ –†–µ–∂–∏–º üñ•Ô∏è
// @name:la             ChatGPT Modus Latus Plenus üñ•Ô∏è
// @name:lb             ChatGPT Breitbild-Modus üñ•Ô∏è
// @name:lo             ChatGPT ‡∫Æ‡∫π‡∫ö‡ªÅ‡∫ö‡∫ö‡ªÇ‡∫õ‡∫£‡∫ü‡∫≠‡∫ô‡ªÉ‡∫´‡∫ç‡ªà üñ•Ô∏è
// @name:lt             ChatGPT I≈°plƒóstojo ekrano re≈æimas üñ•Ô∏è
// @name:lv             ChatGPT Pla≈°ƒÅ ekrƒÅna re≈æƒ´ms üñ•Ô∏è
// @name:mg             ChatGPT Tarehimarika tamin'ny Widescreen üñ•Ô∏è
// @name:mi             ChatGPT ƒÄhua WhƒÅtika ƒÅ-Raupapa üñ•Ô∏è
// @name:mk             ChatGPT –†–µ–∂–∏–º –Ω–∞ —à–∏—Ä–æ–∫ –µ–∫—Ä–∞–Ω üñ•Ô∏è
// @name:ml             ChatGPT ‡¥µ‡µà‡¥°‡µç‡¥∏‡µç‡¥ï‡µç‡¥∞‡µÄ‡µª ‡¥Æ‡µã‡¥°‡µç üñ•Ô∏è
// @name:mn             ChatGPT –ñ–∏–Ω—Ö—ç–Ω—ç –≠–∫—Ä–∞–Ω–Ω—ã –ê—Ä–≥–∞ üñ•Ô∏è
// @name:ms             ChatGPT Mod Skrin Lebar üñ•Ô∏è
// @name:mt             ChatGPT Modalit√† Widescreen üñ•Ô∏è
// @name:my             ChatGPT ·Ä°·Äô·Äª·Ä¨·Ä∏·Äî·Äæ·ÄØ·Äî·Ä∫·Ä∏·ÄÄ·Äª·Ä±·Ä¨·Ä∫·Äò·ÄØ·Ä∂ üñ•Ô∏è
// @name:ne             ChatGPT ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§™‡•ç‡§∞‡§æ‡§£‡•ç‡§°‡§µ‡§ø‡§ï ‡§™‡§¶‡•ç‡§ß‡§§‡§ø üñ•Ô∏è
// @name:nl             ChatGPT Breedbeeldmodus üñ•Ô∏è
// @name:no             ChatGPT Bredskjermmodus üñ•Ô∏è
// @name:ny             ChatGPT Mawonekedwe Wathandiza üñ•Ô∏è
// @name:pa             ChatGPT ‡®µ‡®æ‡®á‡®°‡®∏‡®ï‡©ç‡®∞‡©Ä‡®® ‡®Æ‡©ã‡®° üñ•Ô∏è
// @name:pl             ChatGPT Tryb szerokoekranowy üñ•Ô∏è
// @name:ps             ChatGPT ÿØ ⁄â€åÿ≥ŸæŸÑ€ê ŸÖŸà⁄â üñ•Ô∏è
// @name:pt             ChatGPT Modo Tela Larga üñ•Ô∏è
// @name:pt-BR          ChatGPT Modo Tela Larga üñ•Ô∏è
// @name:ro             ChatGPT Mod ecran lat üñ•Ô∏è
// @name:ru             ChatGPT –†–µ–∂–∏–º —à–∏—Ä–æ–∫–æ—Ñ–æ—Ä–º–∞—Ç–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ üñ•Ô∏è
// @name:rw             ChatGPT Ibindi by'umuhondo bw'ishusho üñ•Ô∏è
// @name:sg             ChatGPT Mode √âcran Large üñ•Ô∏è
// @name:si             ChatGPT ‡∑Ä‡∑í‡∑Å‡∑ö‡∑Ç‡∑è‡∂Ç‡∂ú ‡∂¥‡∑ô‡∑Ö‡∂ö‡∑ä‡∑Ç‡∑è‡∑Ä üñ•Ô∏è
// @name:sk             ChatGPT Re≈æim ≈°irokouhl√©ho displeja üñ•Ô∏è
// @name:sl             ChatGPT Naƒçin ≈°irokega zaslona üñ•Ô∏è
// @name:sm             ChatGPT Laititi Fuamatala üñ•Ô∏è
// @name:sn             ChatGPT Zvimwe Zvitsva Mode üñ•Ô∏è
// @name:so             ChatGPT hab Widescreen Mode üñ•Ô∏è
// @name:sr             ChatGPT –†–µ–∂–∏–º —à–∏—Ä–æ–∫–æ–≥ –µ–∫—Ä–∞–Ω–∞ üñ•Ô∏è
// @name:sv             ChatGPT Bredbildsl√§ge üñ•Ô∏è
// @name:sw             ChatGPT Njia ya Skrini Panoramio üñ•Ô∏è
// @name:ta             ChatGPT ‡Æµ‡Æø‡Æ∞‡Æø‡Æµ‡Ææ‡Æ© ‡Æ§‡Æø‡Æ∞‡Øà ‡ÆÆ‡ØÅ‡Æ±‡Øà üñ•Ô∏è
// @name:te             ChatGPT ChatGPT ‡∞µ‡±à‡∞°‡±ç ‡∞∏‡±ç‡∞ï‡±ç‡∞∞‡±Ä‡∞®‡±ç ‡∞Æ‡±ã‡∞°‡±ç üñ•Ô∏è
// @name:tg             ChatGPT –í–æ–∑–∞—á–∏ –†–µ–∂–∞–∏ –î–∏—Å–ø–ª–µ–∏ –ë–∞—Ä–Ω–æ–º–∞ üñ•Ô∏è
// @name:th             ChatGPT ‡πÇ‡∏´‡∏°‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ üñ•Ô∏è
// @name:ti             ·âª·âµ·åÇ·çí·â≤ ·ãã·ã≠·ãµ·àµ·ä≠·à™·äï ·àû·ãµ üñ•Ô∏è
// @name:tk             ChatGPT Gi≈à Ekran Tertibi üñ•Ô∏è
// @name:tn             ChatGPT Nyemba Yemba Mzizo üñ•Ô∏è
// @name:to             ChatGPT Moli  ªo e Ngaahi Fatongi  ªo Ha ªaneesi üñ•Ô∏è
// @name:tr             ChatGPT Geni≈ü Ekran Modu üñ•Ô∏è
// @name:uk             ChatGPT –†–µ–∂–∏–º —à–∏—Ä–æ–∫–æ–≥–æ –µ–∫—Ä–∞–Ω–∞ üñ•Ô∏è
// @name:ur             ChatGPT Ÿàÿßÿ¶⁄à ÿßÿ≥⁄©ÿ±€åŸÜ ŸÖŸà⁄à üñ•Ô∏è
// @name:uz             ChatGPT Keng ekranga rejim üñ•Ô∏è
// @name:vi             ChatGPT Ch·∫ø ƒë·ªô M√†n h√¨nh R·ªông üñ•Ô∏è
// @name:xh             ChatGPT Indlela ye-Widescreen Mode üñ•Ô∏è
// @name:yi             ChatGPT ◊ï◊ï◊ô◊ì◊¢◊°◊ß◊®◊¢◊¢◊ü ◊û◊ê÷∏◊ì◊¢ üñ•Ô∏è
// @name:zh             ChatGPT ÂÆΩÂ±èÊ®°Âºè üñ•Ô∏è
// @name:zh-CN          ChatGPT ÂÆΩÂ±èÊ®°Âºè üñ•Ô∏è
// @name:zh-HK          ChatGPT ÂØ¨Ëû¢ÂπïÊ®° üñ•Ô∏è
// @name:zh-SG          ChatGPT ÂÆΩÂ±èÊ®°Âºè üñ•Ô∏è
// @name:zh-TW          ChatGPT ÂØ¨Ëû¢ÂπïÊ®° üñ•Ô∏è
// @name:zu             ChatGPT Isimo sokudlalwa emkhumbini üñ•Ô∏è
// @description         Adds Widescreen + Fullscreen modes to ChatGPT for enhanced viewing + reduced scrolling
// @description:af      Voeg Widescreen + Volledige skermmodusse by ChatGPT vir verbeterde kyk + verminderde skrol
// @description:am      ·ã®·à´·àµ ·àò·å†·äï ·â† ChatGPT ·ãç·àµ·å• ·ã®·â∞·ä®·çà·â∞·ãç·äï ·ãà·ã∞ ·âµ·äï·â¢·âµ ·àõ·ãµ·à®·åç + ·ãµ·àù·çÖ ·ä•·äï·ã≤·â≥·âµ·äì
// @description:ar      ÿ•ÿ∂ÿßŸÅÿ© Ÿàÿ∂ÿπŸä ÿßŸÑÿ¥ÿßÿ¥ÿ© ÿßŸÑÿπÿ±Ÿäÿ∂ÿ© + ÿßŸÑÿ¥ÿßÿ¥ÿ© ÿßŸÑŸÉÿßŸÖŸÑÿ© ÿ•ŸÑŸâ ChatGPT ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿπÿ±ÿ∂ + ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ™ŸÖÿ±Ÿäÿ±
// @description:az      ChatGPT √º√ß√ºn Geni≈ü Ekran + Tam Ekran rejiml…ôri …ôlav…ô etm…ôk, g√∂r√ºnt√ºn√º yax≈üƒ±la≈üdƒ±rmaq + s…ôlah…ôt…ôn ke√ßirm…ôni azaltmaq
// @description:be      –î–∞–¥–∞–µ —Ä—ç–∂—ã–º—ã —à—ã—Ä–æ–∫–∞–≥–∞ —ç–∫—Ä–∞–Ω–∞ + –ø–æ—û–Ω–∞–≥–∞ —ç–∫—Ä–∞–Ω–∞ –¥–∞ ChatGPT –¥–ª—è –ø–∞–ª—è–ø—à—ç–Ω–∞–≥–∞ –ø—Ä–∞–≥–ª—è–¥—É + –∑–º—è–Ω—à—ç–Ω–Ω—è —Å–∫—Ä–æ–ª—ñ–Ω–≥—É
// @description:bem     Ena Mode ya Widescreen + ya Fullscreen ku ChatGPT pa kuongeza kulandila + ukukonda scrolling
// @description:bg      –î–æ–±–∞–≤—è —Ä–µ–∂–∏–º–∏ –Ω–∞ –®–∏—Ä–æ–∫ –µ–∫—Ä–∞–Ω + –ü—ä–ª–µ–Ω –µ–∫—Ä–∞–Ω –∫—ä–º ChatGPT –∑–∞ –ø–æ–¥–æ–±—Ä–µ–Ω–æ –≥–ª–µ–¥–∞–Ω–µ + –Ω–∞–º–∞–ª–µ–Ω–æ –ø–ª—ä–∑–≥–∞–Ω–µ
// @description:bn      ‡¶è‡¶ï‡ßç‡¶∏ ‡¶è‡¶ó‡ßç‡¶∞‡¶ø‡¶∏‡¶ø‡¶≠ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ChatGPT-‡¶è ‡¶ì‡¶Ø‡¶º‡¶æ‡¶á‡¶°‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® + ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶Æ‡ßã‡¶° ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßá + ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶π‡ßç‡¶∞‡¶æ‡¶∏ ‡¶ï‡¶∞‡ßá
// @description:bo      ‡Ωñ‡ΩÖ‡Ω†‡ºã‡Ωë‡æ≤‡Ω¥‡ΩÇ‡ºã‡Ω¢‡æí‡æ±‡Ω¥‡Ω¶‡ºã‡Ωî‡ºã+ ‡Ωñ‡Ωë‡Ω∫‡ºã‡ΩÜ‡Ω∫‡Ωì‡ºã‡Ω¢‡æí‡æ±‡Ω¥‡Ω¶‡ºã‡Ωî‡ºã‡Ω†‡Ωë‡Ω≤‡ºãChatGPT‡ºã‡Ωì‡ΩÑ‡ºã‡Ω£‡Ω¶‡ºã‡Ωñ‡Ω¶‡æí‡æ≤‡ΩÇ‡Ω¶‡ºã‡Ωñ‡Ωû‡ΩÇ‡ºã‡Ωñ‡Ω†‡Ω≤‡ºã‡Ω£‡æ∑‡ΩÇ‡ºã‡Ωî‡ºã‡Ωû‡Ω≤‡ΩÇ‡ºã‡ΩÅ‡Ωò‡Ω¶‡ºã‡Ωî‡Ω†‡Ω≤‡ºã‡Ωñ‡Ω¢‡æü‡ΩÇ‡ºã‡Ωû‡Ω≤‡Ωñ‡ºã‡Ωñ‡ΩÖ‡Ωº‡ºã‡Ω¶‡æí‡æ≤‡Ω≤‡ΩÇ‡ºã‡Ω†‡Ωë‡Ω¥‡ΩÇ
// @description:bs      Dodaje Widescreen + Fullscreen re≈æime ChatGPT-u za pobolj≈°ani prikaz + smanjenje klizanja
// @description:ca      Afegeix els modes de pantalla ampla + pantalla completa a ChatGPT per a una visualitzaci√≥ millorada + reducci√≥ de despla√ßament
// @description:ceb     Gidugang ang Mga Modo sa Widescreen + Fullscreen sa ChatGPT alang sa labaw nga pagtan-aw + paggamot sa pag-scroll
// @description:ckb     Mode Widescreen + Mode Fullscreen bo ChatGPT z√™de bike ji bo n√™z√Ækb√ªna ba≈ükirin√™ + kam kirina birevandin√™
// @description:cs      P≈ôid√°v√° re≈æimy Widescreen + Fullscreen do ChatGPT pro zlep≈°en√© zobrazen√≠ + sn√≠≈æen√≠ posouv√°n√≠
// @description:cy      Ychwanega dulliau Sgrin Llydan + Sgrin Lawn i ChatGPT ar gyfer gwylio well + lleihau sgrolio
// @description:da      Tilf√∏jer Widescreen + Fuldscreen-tilstande til ChatGPT for forbedret visning + reduceret rulning
// @description:de      F√ºgt Widescreen + Vollbildmodus zu ChatGPT f√ºr verbesserte Ansicht + reduziertes Scrollen hinzu
// @description:dv      ChatGPT ﬁÑﬁÆﬁìﬁÆﬁÑﬁ≠ﬁêﬁ© + ﬁäﬁ¶ﬁÇﬁ∞ﬁàﬁ¶ﬁáﬁ®ﬁãﬁß ﬁâﬁØﬁëﬁ®ﬁáﬁ™ﬁçﬁ∞ﬁáﬁ¶ﬁ§ﬁ∞ ﬁÄﬁ¨ﬁãﬁ™ﬁâﬁ¶ﬁÅﬁ∞ ﬁÜﬁ¶ﬁÇﬁëﬁ™ﬁéﬁ¨ﬁÇﬁ∞ﬁÇﬁ¶ﬁàﬁ¶ﬁÇﬁ∞ + ﬁÉﬁ™ﬁêﬁ¶ﬁÑﬁ∞ ﬁÑﬁ¨ﬁÇﬁ∞ﬁÜﬁ™ﬁÉﬁ™ﬁâﬁ¶ﬁÅﬁ∞ﬁàﬁ¨ﬁáﬁ∞ﬁñﬁ¨
// @description:dz      ChatGPT ‡Ω¶‡æí‡æ≤‡Ω¥‡Ωñ‡ºã‡Ωê‡Ωñ‡Ω¶‡ºã + ‡Ωò‡Ω≤‡ΩÑ‡ºã‡Ωë‡Ωî‡æ±‡Ωë‡ºã‡ΩÜ‡Ω∫‡Ω¶‡ºã‡Ωë‡ΩÑ‡ºã‡Ωî‡ºã‡Ω°‡Ωº‡ΩÑ‡Ω¶‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡Ω£‡æ∑‡ΩÇ‡ºã‡Ωî‡ºã‡ΩÅ‡æ±‡Ωñ‡ºã‡Ω£‡ºã‡Ωâ‡Ωº‡ºã‡ΩÇ‡Ω¢‡ºã‡Ωñ‡Ωû‡ΩÇ‡ºã‡Ωî‡ºã‡Ωë‡ΩÑ‡ºã‡Ωñ‡Ωë‡Ω∫‡Ωì‡ºã‡Ωî‡Ω¶‡ºã‡ΩÜ‡Ω∫‡Ωë‡ºã‡Ωî‡ºã‡Ωë‡ΩÑ‡ºã‡Ωö‡Ω≤‡ΩÇ‡ºã‡Ω¢‡æê‡æ±‡ΩÑ‡ºã‡Ω£‡ºã‡Ωò‡ΩÇ‡Ωº‡ºã‡Ωì‡Ω≤‡ºã
// @description:el      Œ†œÅŒøœÉŒ∏Œ≠œÑŒµŒπ ŒªŒµŒπœÑŒøœÖœÅŒ≥ŒØŒµœÇ Widescreen + Fullscreen œÉœÑŒø ChatGPT Œ≥ŒπŒ± Œ≤ŒµŒªœÑŒπœâŒºŒ≠ŒΩŒ∑ œÄœÅŒøŒ≤ŒøŒªŒÆ + ŒºŒµŒØœâœÉŒ∑ œÑŒ∑œÇ Œ∫œçŒªŒπœÉŒ∑œÇ
// @description:eo      Aldonas larƒùekranajn + plenekranajn reƒùimojn al ChatGPT por plibonigita vidado + malpliigo de ≈ùovado
// @description:es      Agrega modos de pantalla panor√°mica + pantalla completa a ChatGPT para una visualizaci√≥n mejorada + desplazamiento reducido
// @description:et      Lisab ChatGPT-le Widescreen + T√§isekraani re≈æiimid parema vaatamise ja v√§henenud kerimisega
// @description:eu      Gehitu Widescreen + Pantaila oso moduak ChatGPT-ra ikusmen hobetu + mugimendua gutxituz
// @description:fa      ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿ≠ÿßŸÑÿ™ Ÿáÿß€å Ÿàÿß€åÿØ ÿßÿ≥⁄©ÿ±€åŸÜ + ÿ™ŸÖÿßŸÖ ÿµŸÅÿ≠Ÿá ÿ®Ÿá ChatGPT ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá ÿ®Ÿáÿ™ÿ± + ⁄©ÿßŸáÿ¥ ÿßÿ≥⁄©ÿ±ŸàŸÑ
// @description:fi      Lis√§√§ Widescreen + Koko n√§yt√∂n tilat ChatGPT:hen paremman katselun + v√§hentyneen vierityksen ansiosta
// @description:fo      Leggur til Widescreen + Fullscreen hamrar √° ChatGPT fyri b√¶tta s√Ωning + minnka sk√∫vsetan
// @description:fr      Ajoute les modes √©cran large + plein √©cran √† ChatGPT pour une meilleure visualisation + un d√©filement r√©duit
// @description:fr-CA   Ajoute les modes √©cran large + plein √©cran √† ChatGPT pour une meilleure visualisation + un d√©filement r√©duit
// @description:gd      Cuir gn√®ithean Leudachaidh + Faidhlichean s√†bhaladh sgr√πdair gu ChatGPT airson sealladh air √†rdachadh + sgroladh lag
// @description:gl      Engade os modos de pantalla panor√°mica + pantalla completa a ChatGPT para unha visualizaci√≥n mellorada + desprazamento reducido
// @description:gu      ‡™è‡™®‡´ç‡™π‡™æ‡™®‡´ã ‡™ú‡´ã‡™°‡™æ‡™£ ‡™ï‡™∞‡´ã ‡™µ‡™æ‡™à‡™°‡™∏‡´ç‡™ï‡´ç‡™∞‡´Ä‡™® + ‡™´‡´Å‡™≤‡™∏‡´ç‡™ï‡´ç‡™∞‡´Ä‡™® ‡™Æ‡´ã‡™° ‡™§‡´á‡™Æ‡™ú ChatGPT ‡™Æ‡™æ‡™ü‡´á ‡™∏‡´Å‡™ß‡™æ‡™∞‡´á‡™≤ ‡™ú‡´ã‡™à‡™®‡´ç‡™ü ‡™™‡´ç‡™∞‡™¶‡™∞‡´ç‡™∂‡™® + ‡™ï‡™Æ‡´á‡™≤‡´Ä ‡™∏‡´ç‡™ï‡´ç‡™∞‡´ã‡™≤‡™ø‡™Ç‡™ó ‡™Æ‡™æ‡™ü‡´á
// @description:haw     KƒÅlele i nƒÅ Ao Waiwai + Ao Piha i loko o ChatGPT no ka ho'ohana'ana ikaika + ka'u hƒÅ'ule 'ana
// @description:he      ◊û◊ï◊°◊ô◊£ ◊û◊¶◊ë◊ô ◊û◊°◊ö ◊û◊ï◊®◊ó◊ë + ◊û◊°◊ö ◊û◊ú◊ê ◊ú÷æChatGPT ◊ú◊©◊ô◊§◊ï◊® ◊™◊¶◊ï◊í◊î + ◊î◊§◊ó◊™◊™ ◊í◊ú◊ô◊ú◊î
// @description:hi      ‡§¨‡§¢‡§º‡§ø‡§Ø‡§æ ‡§¶‡•É‡§∂‡•ç‡§Ø + ‡§ï‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•ã‡§≤‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ChatGPT ‡§Æ‡•á‡§Ç ‡§µ‡§æ‡§á‡§°‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® + ‡§´‡•Å‡§≤‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§Æ‡•ã‡§° ‡§ú‡•ã‡§°‡§º‡§§‡§æ ‡§π‡•à
// @description:hr      Dodaje Widescreen + Fullscreen naƒçine na ChatGPT za pobolj≈°ani prikaz + smanjenje klizanja
// @description:ht      Ajoute modes Widescreen + Fullscreen nan ChatGPT pou amelyore gade + redui defileman
// @description:hu      Hozz√°adja a Widescreen + Teljes k√©perny≈ë m√≥dokat a ChatGPT-hoz jobb megtekint√©s + g√∂rget√©s cs√∂kkent√©se √©rdek√©ben
// @description:hy      ‘±’æ’•’¨’°÷Å’∂’∏÷Ç’¥ ’ß Widescreen + Fullscreen ’º’•’™’´’¥’∂’•÷Ä’® ChatGPT-’∏÷Ç’¥ ’¢’°÷Ä’•’¨’°’æ’æ’°’Æ ’§’´’ø’∏÷Ç’¥’´ ’∞’°’¥’°÷Ä + ’Ω’°’∞’¥’°’∂’°÷É’°’Ø’∏÷Ç’¥’®
// @description:id      Menambahkan mode Widescreen + Layar Penuh ke ChatGPT untuk penampilan yang lebih baik + pengurangan pengguliran
// @description:is      B√¶tir vi√∞ Widescreen + Fullskj√°rshamra √≠ ChatGPT til a√∞ b√¶ta s√Ωn + draga √∫r skruni
// @description:it      Aggiunge le modalit√† Widescreen + Schermo intero a ChatGPT per una visualizzazione migliorata + riduzione dello scorrimento
// @description:ja      ChatGPT„ÅÆË°®Á§∫„ÇíÂêë‰∏ä„Åô„Çã„Åü„ÇÅ„Å´„ÄÅ„ÉØ„Ç§„Éâ„Çπ„ÇØ„É™„Éº„É≥+„Éï„É´„Çπ„ÇØ„É™„Éº„É≥„É¢„Éº„Éâ„ÇíËøΩÂä†„Åó„Åæ„Åô
// @description:jv      Nambahi Modus Widescreen + Fullscreen menyang ChatGPT kanggo tampilan sing ditingkatake + ngecilake scrolling
// @description:ka      ·Éì·Éê·Éê·Éõ·Éê·É¢·Éî·Éë·É° Widescreen + Fullscreen ·É†·Éî·Éü·Éò·Éõ·Éî·Éë·É° ChatGPT-·É®·Éò ·Éí·Éê·É£·Éõ·ÉØ·Éù·Éë·Éî·É°·Éî·Éë·É£·Éö·Éò ·Éú·Éê·ÉÆ·Éï·Éê + ·Éí·Éê·Éõ·Éù·Éô·Éö·Éî·Éë·É£·Éö·Éò ·Éí·Éê·Éì·Éê·Éì·Éî·Éë·Éò·É° ·Éõ·Éò·Éñ·Éú·Éò·Éó
// @description:kk      ChatGPT-–≥–µ Widescreen + Fullscreen —Ä–µ–∂–∏–º–¥–µ—Ä—ñ–Ω “õ–æ—Å—É –∞—Ä“õ—ã–ª—ã –∫”©—Ä—ñ–Ω—ñ—Å “Ø–∑–¥—ñ–∫—Ç–µ–º–µ–ª–µ—É + —Å–∫—Ä–æ–ª–ª–∞—É–¥—ã –∫–µ–º—ñ—Ç—É
// @description:km      ·ûî·ûì·üí·ûê·üÇ·ûò·ûö·ûî·üÄ·ûî Widescreen + Fullscreen ·ûë·üÖ·ûÄ·üí·ûì·ûª·ûÑ ChatGPT ·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÄ·û∂·ûö·ûò·ûæ·ûõ·û°·ûæ·ûÑ·ûî·üí·ûö·û†·üÇ·ûõ·ûá·û∂·ûÄ·üí·ûö·ûª·ûò·û†·üä·ûª·ûì + ·ûÄ·û∂·ûö·ûö·ûÑ·ûÖ·û∂·üÜ·ûÅ·üí·ûõ·ûΩ·ûì·ûØ·ûÑ·ûî·üâ·ûª·ûé·üí·ûé·üÑ·üá
// @description:kn      ‡≤Ö‡≤≠‡≥ç‡≤Ø‡≤æ‡≤∏‡≤ï‡≥ç‡≤∞‡≤Æ‡≤¶ ‡≤¶‡≥É‡≤∑‡≥ç‡≤ü‡≤ø‡≤ó‡≥Ü ‡≤Ö‡≤®‡≥Å‡≤ó‡≥Å‡≤£‡≤µ‡≤æ‡≤ó‡≤ø Widescreen + Fullscreen ‡≤Æ‡≥ã‡≤°‡≥ç‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ChatGPT‡≤ó‡≥Ü ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü
// @description:ko      ChatGPTÏóê ÏôÄÏù¥ÎìúÏä§ÌÅ¨Î¶∞ + Ï†ÑÏ≤¥ÌôîÎ©¥ Î™®ÎìúÎ•º Ï∂îÍ∞ÄÌïòÏó¨ Í∞úÏÑ†Îêú ÌôîÎ©¥ ÌëúÏãú + Ïä§ÌÅ¨Î°§ Í∞êÏÜå
// @description:ku      Dih√™n√Æne mod√™n Widescreen + Fullscreen√™ bo ChatGPT√™ ji bo p√™≈ü√Ænkirina n√Æ≈üandina + k√™mkirina kayan√Æn√™
// @description:ky      ChatGPT-–≥–æ Widescreen + Fullscreen —Ä–µ–∂–∏–º–¥–æ—Ä—É –∫–æ—à–æ –∞—Ä–∫—ã–ª—É—É –∂–∞–∫—à—ã –∫”©—Ä“Ø–Ω“Ø—à—Ç“Ø + —Å–∫—Ä–æ–ª–ª–æ–æ –∂–æ–≥–æ—Ç—É—É
// @description:la      TV + Fullscreen modos addit ChatGPT ad augendam viewing + reducta scrolling
// @description:lb      F√º√ºgt Widescreen + Fullscreen Modi dem ChatGPT b√§i fir verbessert Visioun + reduz√©iert Scrollen
// @description:lo      ‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫Æ‡∫π‡∫ö‡ªÅ‡∫ö‡∫ö Widescreen + Fullscreen ‡ªÉ‡∫´‡ªâ‡ªÑ‡∫î‡ªâ‡∫Æ‡∫Ω‡∫ô ChatGPT ‡∫™‡∫≥‡ªÄ‡∫•‡∫±‡∫î‡∫Ç‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡∫™‡∫∞‡ªÅ‡∫î‡∫á‡∫≠‡ªâ‡∫≤‡∫á‡∫ß‡ªà‡∫≤‡∫á + ‡∫Å‡∫≤‡∫ô‡∫õ‡∫∞‡ªÄ‡∫°‡∫µ‡∫î‡ªÉ‡∫´‡ªâ‡∫ô‡ªâ‡ªç‡∫≤‡∫Ç‡∫≤‡∫ç‡∫´‡∫ô‡ªâ‡∫≤
// @description:lt      Prideda Widescreen + Fullscreen re≈æimus ƒØ ChatGPT, siekiant pagerinti per≈æi≈´rƒÖ ir suma≈æinti slinkimƒÖ
// @description:lv      Pievieno Widescreen + Fullscreen re≈æƒ´mus ChatGPT, lai uzlabotu skatƒ´≈°anos + samazinƒÅtu ritinƒÅ≈°anu
// @description:mg      Mametraka ny fomba Widescreen + Fullscreen amin'ny ChatGPT mba handresy ny fandefasana + famindrampoana ny firotsahana
// @description:mi      Ka whakarite ana i ngƒÅ ƒÅhuatanga Widescreen + Fullscreen ki te ChatGPT m≈ç te whakaatu whakapai ake + te whakaiti i te whakararuraru
// @description:mk      –î–æ–¥–∞–≤–∞ —Ä–µ–∂–∏–º–∏ –Ω–∞ Widescreen + Fullscreen –≤–æ ChatGPT –∑–∞ –ø–æ–¥–æ–±—Ä—É–≤–∞—ö–µ –Ω–∞ –ø—Ä–∏–∫–∞–∑–æ—Ç + –Ω–∞–º–∞–ª—É–≤–∞—ö–µ –Ω–∞ —Å–∫—Ä–æ–ª–∏—Ä–∞—ö–µ—Ç–æ
// @description:ml      ‡¥µ‡¥æ‡¥Ø‡µç‡¥°‡µç‡¥∏‡µç‡¥ï‡µç‡¥∞‡µÄ‡µª + ‡¥™‡µÇ‡µº‡¥£‡µç‡¥£‡¥∏‡µç‡¥ï‡µç‡¥∞‡µÄ‡µª ‡¥Æ‡µã‡¥°‡µÅ‡¥ï‡µæ ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ ChatGPT-‡¥Ø‡¥ø‡µΩ ‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡¥µ‡¥æ‡¥±‡µÅ‡¥Ç ‡¥ï‡¥æ‡¥¥‡µç‡¥ö‡¥™‡µç‡¥™‡¥æ‡¥ü‡µç + ‡¥ï‡µÅ‡¥±‡¥µ‡µç ‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µΩ ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡¥§‡¥ø‡¥®‡µç
// @description:mn      Widescreen + Fullscreen –≥–æ—Ä–∏–º—É—É–¥—ã–≥ ChatGPT —Ä“Ø“Ø –Ω—ç–º—ç—Ö –Ω—å –¥—ç–ª–≥—ç—Ü—ç–Ω–¥ —Ö—É–≤—Ü–∞—Å–ª–∞–Ω + –≥“Ø–π–ª–≥—ç—ç–Ω–∏–π —ç–≤–¥—Ä—ç–ª–¥—ç—ç —Ö—è–Ω–∞—Ö—ã–≥ –æ—Ä—É—É–ª–Ω–∞
// @description:mr      ‡§µ‡•ç‡§π‡§æ‡§á‡§°‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® + ‡§´‡•Å‡§≤‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§Æ‡•ã‡§°‡•ç‡§∏ ‡§ö‡•á ChatGPT‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ú‡•ã‡§°‡§≤‡•á ‡§ú‡§æ‡§§‡§æ‡§§ ‡§µ ‡§™‡§æ‡§π‡§£‡•Ä ‡§µ‡§æ‡§¢‡§µ‡§ø‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•ã‡§≤‡§ø‡§Ç‡§ó ‡§ï‡§Æ‡•Ä ‡§ï‡§∞‡§§‡§æ‡§§
// @description:ms      Menambah mod Widescreen + Layar Penuh ke ChatGPT untuk tampilan yang lebih baik + pengurangan penatalan
// @description:mt      Jiddoqq modes Widescreen + Fullscreen gƒßal ChatGPT gƒßall-vi≈ºwalizzazzjoni miƒ°ƒ°ielda + qasam it-telf
// @description:my      ·Äï·Ä≠·ÄØ·Äô·Ä≠·ÄØ·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äô·ÄΩ·Äî·Ä∫·Äû·Ä±·Ä¨·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äõ·Äæ·ÄØ·Äõ·Äî·Ä∫·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ ChatGPT ·Äê·ÄΩ·ÄÑ·Ä∫ Widescreen + ·Äô·Äª·ÄÄ·Ä∫·Äî·Äæ·Ä¨·Äï·Äº·ÄÑ·Ä∫·Ä°·Äï·Äº·Ää·Ä∑·Ä∫·Äô·ÄØ·Äí·Ä∫·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äë·Ä¨·Ä∏·Äû·Ää·Ä∫·Åã
// @description:ne      ‡§∏‡•Å‡§ß‡§æ‡§∞‡§ø‡§è‡§ï‡•ã ‡§¶‡•É‡§∂‡•ç‡§Ø + ‡§ï‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•ã‡§≤‡§ø‡§Ç‡§ó‡§ï‡§æ ‡§≤‡§æ‡§ó‡§ø ‡§µ‡§æ‡§á‡§°‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§® + ‡§´‡•Å‡§≤‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§® ‡§Æ‡•ã‡§°‡§π‡§∞‡•Ç‡§≤‡§æ‡§à ChatGPT‡§Æ‡§æ ‡§•‡§™‡•ç‡§¶‡§õ
// @description:nl      Voegt Widescreen + Fullscreen modi toe aan ChatGPT voor verbeterde weergave + verminderd scrollen
// @description:no      Legger til Widescreen + Fullskjerm-moduser i ChatGPT for forbedret visning + redusert rulling
// @description:ny      Ndiwonetsa zolengedwa + Zomwe zosowa ndi ChatGPT kwa kudzaza kuona + kuchotsa kupinda
// @description:pa      ‡®ö‡®æ‡®ü‡®ú‡©Ä‡®™‡©Ä‡®ü‡©Ä ‡®µ‡®ø‡©±‡®ö Widescreen + Fullscreen ‡®Æ‡©ã‡®°‡®æ‡®Ç ‡®∂‡®æ‡®Æ‡®ø‡®≤ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à ‡®ú‡®ø‡®π‡®®‡®æ‡®Ç ‡®®‡®æ‡®≤ ‡®µ‡©á‡®ñ‡®æ‡®â‡®£ ‡®µ‡®ß‡©Ä‡®Ü ‡®π‡©ã ‡®ú‡®æ‡®Ç‡®¶‡®æ ‡®π‡©à + ‡®ò‡©Ç‡®Æ‡®£ ‡®¶‡©Ä ‡®ò‡®ü-‡®™‡©Å‡®ü ‡®π‡©ã ‡®ú‡®æ‡®Ç‡®¶‡©Ä ‡®π‡©à
// @description:pl      Dodaje tryby Widescreen + Fullscreen do ChatGPT dla lepszej widoczno≈õci + zmniejszonego przewijania
// @description:ps      ⁄ÅÿßŸÜ⁄´⁄ì€ê + ŸºŸàŸÑ€ê Ÿæÿ±ÿØŸá ŸæŸá ChatGPT ⁄©€ê ÿßÿ∂ÿßŸÅŸá ⁄©⁄ìŸä ŸÑŸæÿßÿ±Ÿá ŸÑÿßÿ≥ÿ±ÿ≥€å ÿ™ÿ±ŸÑÿßÿ≥Ÿá ⁄©⁄ìŸä + ⁄©Ÿà⁄ö⁄öŸàŸÑ ŸæŸá ⁄©ŸÖÿ™Ÿá
// @description:pt      Adiciona modos Widescreen + Tela cheia ao ChatGPT para visualiza√ß√£o aprimorada + rolagem reduzida
// @description:pt-BR   Adiciona modos Widescreen + Tela cheia ao ChatGPT para visualiza√ß√£o aprimorada + rolagem reduzida
// @description:ro      AdaugƒÉ modurile Widescreen + Ecran complet la ChatGPT pentru vizualizare √ÆmbunƒÉtƒÉ»õitƒÉ + defilare redusƒÉ
// @description:ru      –î–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ–∂–∏–º—ã Widescreen + Fullscreen –≤ ChatGPT –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ + —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
// @description:rw      Ongeraho Mugari Mugari + Byuzuye Mugaragaza kuri ChatGPT kugirango ubone kureba neza + kugabanya umuzingo
// @description:sg      Ajoute les modes √©cran large + plein √©cran √† ChatGPT pour une meilleure visualisation + un d√©filement r√©duit
// @description:si      ChatGPT ‡∑É‡∂≥‡∑Ñ‡∑è Widescreen + Fullscreen ‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∂ª‡∑ä‡∑Å‡∂±‡∂∫‡∂ö‡∑ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂∫‡∑í ‡∂≠‡∑Ä‡∂≠‡∑ä ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂±‡∑ä‡∂±‡∑ö ‡∂Ø‡∑ê‡∂±‡∑ä ‡∑É‡∑í‡∂≠‡∑ñ‡∑Ä‡∑è‡∑É‡∑í‡∂ö‡∑è‡∂ª‡∂ö‡∑ä‡∑Ç‡∂ö ‡∑Ä‡∑í‡∑É‡∑í‡∂±‡∑ä ‡∑É‡∑Ñ ‡∂ö‡∑ô‡∑É‡∑ö‡∂Ø‡∑ê‡∂∫‡∑í ‡∂á‡∂≠‡∑í ‡∂Ö‡∂ú‡∂∫‡∂±‡∑ä ‡∑Ñ‡∑î‡∑É‡∑ä‡∂∏ ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫‡∂ö‡∑í
// @description:sk      Prid√°va Widescreen + Fullscreen re≈æimy do ChatGPT pre vylep≈°en√© zobrazenie + zn√≠≈æenie pos√∫vania
// @description:sl      Dodaja Widescreen + Fullscreen naƒçine v ChatGPT za izbolj≈°an prikaz + zmanj≈°ano premikanje
// @description:sm      Faamauina Widescreen + Fullscreen faavae i le ChatGPT mo le faailoga faapea le mafaufau + le auina faavaivai
// @description:sn      Ongorora Mutaundi wa Widescreen + Fullscreen muChatGPT kutora dzokubvumidzwa + kusha kusweropfuura
// @description:so      Wax ka beddelaa Hababka Widescreen + Fullscreen ee ChatGPT si aad u fiirsato + si aad u yaraato garaabinta
// @description:sq      Shton modalitete Widescreen + Fullscreen n√´ ChatGPT p√´r pamje t√´ p√´rmir√´suar + ulje t√´ skrollimit
// @description:sr      –î–æ–¥–∞—ò–µ Widescreen + Fullscreen —Ä–µ–∂–∏–º–µ —É –ß–∞—Ç–ì–ü–¢ –∑–∞ —É–Ω–∞–ø—Ä–µ—í–µ–Ω –ø—Ä–∏–∫–∞–∑ + —Å–º–∞—ö–µ–Ω–æ –ª–∏—Å—Ç–∞—ö–µ
// @description:st      E ngolisitsoe mokhabo Widescreen + Fullscreen ho ChatGPT bakeng sa mofuta ona le ho fokotsa liphalantere
// @description:sv      L√§gger till Widescreen + Fullscreen-l√§gen i ChatGPT f√∂r f√∂rb√§ttrad visning + minskad scrollning
// @description:sw      Inaongeza modes Widescreen + Fullscreen kwenye ChatGPT kwa kuimarisha kuonyesha + kupunguza kusokota
// @description:ta      ‡ÆÆ‡Øá‡Æ≤‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Ææ‡Æ∞‡Øç‡Æµ‡Øà + ‡Æö‡ØÅ‡Æ¥‡Æ±‡Øç‡Æö‡Æø‡ÆØ‡Øà ‡ÆÆ‡Øá‡Ææ‡Æ§‡Æø‡Æ§‡Øç‡Æ§‡ØÅ ‡Æö‡Ææ‡Æü‡Øç‡Æú‡Æø‡Æ™‡Æø‡Æü‡Æø‡ÆØ‡Æø‡Æ≤‡Øç Widescreen + Fullscreen ‡ÆÆ‡ØÅ‡Æ±‡Øà‡Æï‡Æ≥‡Øà‡Æö‡Øç ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ
// @description:te      Widescreen + Fullscreen ‡∞Æ‡±ã‡∞°‡±ç‡∞≤‡∞®‡±Å ChatGPT‡∞ï‡∞ø ‡∞ö‡±á‡∞∞‡±ç‡∞ö‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞Ç‡∞§‡±ã ‡∞ö‡∞Ç‡∞™‡±Å‡∞ï‡±Å‡∞®‡±á ‡∞µ‡±Ä‡∞ï‡±ç‡∞∑‡∞£ ‡∞ï‡∞®‡∞ø‡∞™‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡±ç‡∞ï‡±ç‡∞∞‡±ã‡∞≤‡±ç ‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ‡∞ó‡∞æ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡∞Ç‡∞°‡∞ø
// @description:tg      –ú–∞–≤–æ–¥–∏“≥–æ–∏ Widescreen + Fullscreen-—Ä–æ –±–∞ ChatGPT –∏–ª–æ–≤–∞ –º–µ–∫—É–Ω–∞–¥, –±–∞—Ä–æ–∏ –∫”Ø“≥–Ω–∞—à—É–¥–∞–∏ –Ω–∞–º–æ–∏—à + –∫–∞–º –∫–∞—Ä–¥–∞–Ω–∏ —Å–∫—Ä–æ–ª–ª–∞—à
// @description:th      ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏≠‡πÅ‡∏ö‡∏ö Widescreen + Fullscreen ‡πÉ‡∏ô ChatGPT ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô + ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏î‡∏•‡∏á
// @description:ti      ·äï·ãù·àà·ãì·àà ·àù·à≠·ä£·ã≠ + ·àù·åâ·ã≥·àç ·àù·ãù·ãã·à≠ ·ä£·â• ChatGPT Widescreen + Fullscreen modes ·ã≠·ãç·àµ·äΩ
// @description:tk      Gi≈àeldilen g√∂rmek + peseltmek √º√ßin ChatGPT-√§ gi≈à ekran + Doly ekran reesimlerini go≈ü√Ωar
// @description:tl      Nagdaragdag ng mga mode ng Widescreen + Fullscreen sa ChatGPT para sa pinabuting pagtingin + pinaikling pag-scroll
// @description:tn      Inowedzera Widescreen + Fullscreen modes kuChatGPT yekuwedzera kutarisa + kuderedzwa kupuruzira
// @description:to      Ho ªohui i ka Widescreen + Fullscreen modes i ChatGPT no ka ho ªonui  ªia  ªana o ka nƒÅnƒÅ  ªana + ho ªemi i ka  ª≈çwili  ªana
// @description:tr      Geli≈ütirilmi≈ü g√∂r√ºnt√ºleme + azaltƒ±lmƒ±≈ü kaydƒ±rma i√ßin ChatGPT'ye Widescreen + Fullscreen modlarƒ± ekler
// @description:tt      ChatGPT-–≥–∞ Widescreen + Fullscreen —Ä”ô–∂–∏–º–ª”ô—Ä–µ–Ω ”©—Å—Ç”ô”ô–¥–µ–≥–µ–∑–≥”ô, –∫“Ø—Ä“Ø–ª”ô—à—Ç–µ“£–ª”ô—Ä–∏ “Ø—Ç–∫”ô—Ä–≥”ô + —Å–∫—Ä–æ–ª–ª–∞—É–Ω—ã –±—É—è–Ω—Ç–∞—Ä—Ç–∞—Ä–≥–∞
// @description:ug      ChatGPTÿ∫ÿß Widescreen + Fullscreen ŸÉ€Üÿ±€àŸÜŸÖ€ï Ÿæ€ïÿ≥€ïŸÜÿØ ŸÇŸâŸÑŸâÿ¥+ŸäŸâÿ™ŸâŸæ ÿ¶ÿßÿ¨ÿ±ÿß ŸÇŸâŸÑŸâÿ¥ ŸÖ€Ü⁄ÜŸâŸäŸâ
// @description:uk      –î–æ–¥–∞—î —Ä–µ–∂–∏–º–∏ Widescreen + Fullscreen –¥–æ ChatGPT –¥–ª—è –ø–æ–ª—ñ–ø—à–µ–Ω–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É + –∑–º–µ–Ω—à–µ–Ω–Ω—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
// @description:ur      ÿ™ÿ±ŸÇ€å €åÿßŸÅÿ™€Å ÿØ€å⁄©⁄æÿßÿ¶€å ⁄©€í ŸÑÿ¶€í ChatGPT ŸÖ€å⁄∫ Ÿàÿßÿ¶⁄à ÿßÿ≥⁄©ÿ±€åŸÜ + ŸæŸàÿ±€å ÿßÿ≥⁄©ÿ±€åŸÜ ŸÖŸà⁄àÿ≤ ÿ¥ÿßŸÖŸÑ ⁄©ÿ±ÿ™ÿß €Å€í
// @description:uz      ChatGPT-ga Widescreen + Fullscreen rejimlarini qo'shadi, ko'rishni yaxshilash + aylantirishni kamaytirish uchun
// @description:vi      Th√™m ch·∫ø ƒë·ªô Widescreen + Fullscreen v√†o ChatGPT ƒë·ªÉ c·∫£i thi·ªán hi·ªÉn th·ªã + gi·∫£m cu·ªôn trang
// @description:wo      B√´gg na √±iis-√±iis Widescreen + Fullscreen ci ChatGPT bu√± leen waxtu dib lu j√†mm + √±aari j√´m
// @description:xh      Enza izimvo Widescreen + Fullscreen kwakuhlanganiselelwa kwiChatGPT ukuze kube khona okukhulu + kokucima kwesithombe
// @description:yi      ◊û◊ï◊°◊ô◊£ Widescreen + Fullscreen ◊û◊ê÷∏◊ì◊¢◊° ◊¶◊ï ChatGPT ◊§÷ø◊ê÷∑◊® ◊ô◊û◊§÷º◊®◊ï◊ï◊ï◊ì ◊ï◊ï◊ô◊ï◊ô◊†◊í + ◊®◊ô◊ì◊ï◊°◊ò ◊°◊ß◊®◊ê÷∏◊ú◊ú◊ô◊†◊í
// @description:yo      Fi √†w·ªçn ohun ·ªçr·ªç Widescreen + Fullscreen si ChatGPT fun iw·ªçle aiyewo + iw·ªçle ififunw·ªçle
// @description:zh      Âêë ChatGPT Ê∑ªÂä†ÂÆΩÂ±è + ÂÖ®Â±èÊ®°Âºè‰ª•Â¢ûÂº∫Êü•ÁúãÊïàÊûú + ÂáèÂ∞ëÊªöÂä®
// @description:zh-CN   Âêë ChatGPT Ê∑ªÂä†ÂÆΩÂ±è + ÂÖ®Â±èÊ®°Âºè‰ª•Â¢ûÂº∫Êü•ÁúãÊïàÊûú + ÂáèÂ∞ëÊªöÂä®
// @description:zh-HK   Âêë ChatGPT Ê∑ªÂä†ÂØ¨Â±è + ÂÖ®Â±èÊ®°Âºè‰ª•Â¢ûÂº∑Êü•ÁúãÊïàÊûú + Ê∏õÂ∞ëÊªæÂãï
// @description:zh-SG   Âêë ChatGPT Ê∑ªÂä†ÂÆΩÂ±è + ÂÖ®Â±èÊ®°Âºè‰ª•Â¢ûÂº∫Êü•ÁúãÊïàÊûú + ÂáèÂ∞ëÊªöÂä®
// @description:zh-TW   Âêë ChatGPT Ê∑ªÂä†ÂØ¨Â±è + ÂÖ®Â±èÊ®°Âºè‰ª•Â¢ûÂº∑Êü•ÁúãÊïàÊûú + Ê∏õÂ∞ëÊªæÂãï
// @description:zu      Engeza izinhlobo zezimodi ze-Widescreen + Fullscreen ku-ChatGPT ukuze kube nokubonakala + ukuncitsha ukusukela
// @author              Adam Lui
// @namespace           https://github.com/adamlui
// @version             2024.9.24.6
// @license             MIT
// @compatible          chrome
// @compatible          firefox
// @compatible          edge
// @compatible          opera
// @compatible          brave
// @compatible          vivaldi
// @compatible          librewolf
// @compatible          ghost
// @compatible          qq
// @match               *://chatgpt.com/*
// @match               *://chat.openai.com/*
// @match               *://*.perplexity.ai/*
// @match               *://poe.com/*
// @icon                https://media.chatgptwidescreen.com/images/icons/widescreen-robot-emoji/icon48.png?9a393be
// @icon64              https://media.chatgptwidescreen.com/images/icons/widescreen-robot-emoji/icon64.png?9a393be
// @require             https://cdn.jsdelivr.net/npm/@kudoai/chatgpt.js@3.3.1/dist/chatgpt.min.js#sha256-3yMGAFfqogI8VpkYXtVDQvk3wy8kMdJaQRE/rkAM/+8=
// @connect             cdn.jsdelivr.net
// @connect             greasyfork.org
// @grant               GM_setValue
// @grant               GM_getValue
// @grant               GM_registerMenuCommand
// @grant               GM_unregisterMenuCommand
// @grant               GM_xmlhttpRequest
// @grant               GM.xmlHttpRequest
// @noframes
// @downloadURL         https://update.greasyfork.org/scripts/461473/chatgpt-widescreen.user.js
// @updateURL           https://update.greasyfork.org/scripts/461473/chatgpt-widescreen.meta.js
// @homepageURL         https://www.chatgptwidescreen.com
// @supportURL          https://support.chatgptwidescreen.com
// @contributionURL     https://github.com/sponsors/adamlui
// ==/UserScript==

// Documentation: https://docs.chatgptwidescreen.com
// NOTE: This script relies on the powerful chatgpt.js library @ https://chatgpt.js.org ¬© 2023‚Äì2024 KudoAI & contributors under the MIT license.

(async () => {

    const site = /([^.]+)\.[^.]+$/.exec(location.hostname)[1]

    // Init APP info
    const app = {
        name: 'ChatGPT Widescreen Mode', symbol: 'üñ•Ô∏è', configKeyPrefix: site + 'Widescreen',
        urls: {
            support: 'https://support.chatgptwidescreen.com',
            chatgptJS: 'https://chatgpt.js.org', relatedApps: 'https://github.com/adamlui/chatgpt-apps',
            gitHub: 'https://github.com/adamlui/chatgpt-widescreen',
            greasyFork: 'https://greasyfork.org/scripts/461473-chatgpt-widescreen-mode',
            productHunt: 'https://www.producthunt.com/products/chatgpt-widescreen-mode' },
        latestAssetCommitHash: '79813bd' // for cached sites.json + messages.json
    }
    app.urls.assetHost = app.urls.gitHub.replace('github.com', 'cdn.jsdelivr.net/gh') + `@${app.latestAssetCommitHash}`
    app.urls.update = app.urls.greasyFork.replace('https://', 'https://update.')
        .replace(/(\d+)-?([a-zA-Z-]*)$/, (_, id, name) => `${id}/${ name || 'script' }.meta.js`)

    // Init ENV info
    const env = {
        browser: { isFF: chatgpt.browser.isFirefox() },
        scriptManager: (() => { try { return GM_info.scriptHandler } catch (err) { return 'other' }})()
    }

    // Init SITE props
    const xhr = env.scriptManager == 'OrangeMonkey' ? GM_xmlhttpRequest : GM.xmlHttpRequest
    const sites = Object.assign(Object.create(null), await new Promise(resolve => xhr({
        method: 'GET', url: `${app.urls.assetHost}/sites.json`,
        onload: resp => resolve(JSON.parse(resp.responseText))
    })))
    sites.openai = { ...sites.chatgpt } // shallow copy to cover old domain

    // Init CONFIG
    const config = { userLanguage: chatgpt.getUserLanguage() }
    const settings = {
        load(...keys) {
            if (Array.isArray(keys[0])) keys = keys[0] // use 1st array arg, else all comma-separated ones
            keys.forEach(key => config[key] = GM_getValue(app.configKeyPrefix + '_' + key, false))
        },
        save(key, value) { GM_setValue(app.configKeyPrefix + '_' + key, value) ; config[key] = value }
    } ; settings.load(sites[site].availFeatures)

    // Init app MESSAGES
    app.msgs = {
        appName: app.name,
        appDesc: 'Adds Widescreen + Fullscreen modes to ChatGPT for enhanced viewing + reduced scrolling',
        menuLabel_fullerWins: 'Fuller Windows',
        menuLabel_tallerChatbox: 'Taller Chatbox',
        menuLabel_widerChatbox: 'Wider Chatbox',
        menuLabel_newChatBtn: 'New Chat Button',
        menuLabel_hiddenHeader: 'Hidden Header',
        menuLabel_hiddenFooter: 'Hidden Footer',
        menuLabel_modeNotifs: 'Mode Notifications',
        menuLabel_about: 'About',
        menuLabel_disabled: 'Disabled (extension installed)',
        about_version: 'Version',
        about_poweredBy: 'Powered by',
        about_sourceCode: 'Source code',
        mode_wideScreen: 'Wide screen',
        mode_fullWindow: 'Full-window',
        mode_fullScreen: 'Full screen',
        tooltip_wideScreenON: 'Wide screen',
        tooltip_wideScreenOFF: 'Exit wide screen',
        tooltip_fullWindowON: 'Full-window mode',
        tooltip_fullWindowOFF: 'Exit full window',
        tooltip_fullScreenON: 'Full screen',
        tooltip_fullScreenOFF: 'Exit full screen',
        tooltip_newChat: 'New chat',
        helptip_fullerWins: 'Also activate Wide Screen when activating Full-Window',
        helptip_tallerChatbox: 'Expand the chatbox vertically',
        helptip_widerChatbox: 'Expand the chatbox horizontally in Wide Screen mode',
        helptip_newChatBtn: 'Show New Chat button in chatbox',
        helptip_hiddenFooter: 'Hide site footer',
        helptip_hiddenHeader: 'Hide site header',
        helptip_modeNotifs: 'Show notifications when toggling modes/settings',
        alert_choosePlatform: 'Choose a platform',
        alert_updateAvail: 'Update available',
        alert_newerVer: 'An update to',
        alert_isAvail: 'is available',
        alert_upToDate: 'Up-to-date',
        alert_isUpToDate: 'is up-to-date',
        alert_pressF11: 'Press F11 to exit full screen',
        alert_f11reason: 'F11 was used to enter full screen, and due to browser security reasons, the same key must be used to exit it',
        btnLabel_moreApps: 'More ChatGPT Apps',
        btnLabel_leaveReview: 'Leave Review',
        btnLabel_getSupport: 'Get Support',
        btnLabel_updateCheck: 'Check for Updates',
        btnLabel_update: 'Update',
        btnLabel_dismiss: 'Dismiss',
        link_viewChanges: 'View changes'
    }
    if (!config.userLanguage.startsWith('en')) { // localize msgs for non-English users
        const localizedMsgs = await new Promise(resolve => {
            const msgHostDir = app.urls.assetHost + '/greasemonkey/_locales/',
                  msgLocaleDir = ( config.userLanguage ? config.userLanguage.replace('-', '_') : 'en' ) + '/'
            let msgHref = msgHostDir + msgLocaleDir + 'messages.json', msgXHRtries = 0
            function fetchMsgs() { xhr({ method: 'GET', url: msgHref, onload: handleMsgs })}
            function handleMsgs(resp) {
                try { // to return localized messages.json
                    const msgs = JSON.parse(resp.responseText), flatMsgs = {}
                    for (const key in msgs)  // remove need to ref nested keys
                        if (typeof msgs[key] == 'object' && 'message' in msgs[key])
                            flatMsgs[key] = msgs[key].message
                    resolve(flatMsgs)
                } catch (err) { // if bad response
                    msgXHRtries++ ; if (msgXHRtries == 3) return resolve({}) // try up to 3X (original/region-stripped/EN) only
                    msgHref = config.userLanguage.includes('-') && msgXHRtries == 1 ? // if regional lang on 1st try...
                        msgHref.replace(/([^_]+_[^_]+)_[^/]*(\/.*)/, '$1$2') // ...strip region before retrying
                            : ( msgHostDir + 'en/messages.json' ) // else use default English messages
                    fetchMsgs()
                }
            }
            fetchMsgs()
        })
        Object.assign(app.msgs, localizedMsgs)
    }

    // Init SETTINGS props
    Object.assign(app, { settings: {
        fullerWindows: { type: 'toggle', label: app.msgs.menuLabel_fullerWins},
        tcbDisabled: { type: 'toggle', label: app.msgs.menuLabel_tallerChatbox, symbol: '‚ÜïÔ∏è' },
        widerChatbox: { type: 'toggle', label: app.msgs.menuLabel_widerChatbox, symbol: '‚ÜîÔ∏è' },
        ncbDisabled: { type: 'toggle', label: app.msgs.menuLabel_newChatBtn },
        hiddenHeader: { type: 'toggle', label: app.msgs.menuLabel_hiddenHeader },
        hiddenFooter: { type: 'toggle', label: app.msgs.menuLabel_hiddenFooter },
        notifDisabled: { type: 'toggle', label: app.msgs.menuLabel_modeNotifs }
    }})
    Object.keys(app.settings).forEach(key => // create helptip prop
        app.settings[key].helptip = app.msgs[`helptip_${key}`]) 

    // Define MENU functions

    const menu = {
        ids: [], state: {
            symbols: ['‚ùå', '‚úîÔ∏è'], words: ['OFF', 'ON'],
            separator: env.scriptManager == 'Tampermonkey' ? ' ‚Äî ' : ': '
        },

        register() {

            // Add toggles
            Object.keys(app.settings).forEach(key => {
                if (sites[site].availFeatures.includes(key)) {
                    const settingIsEnabled = config[key] ^ key.includes('Disabled'),
                          menuLabel = `${ app.settings[key].symbol || menu.state.symbols[+settingIsEnabled] } `
                                    + app.settings[key].label + menu.state.separator + menu.state.words[+settingIsEnabled]
                    menu.ids.push(GM_registerMenuCommand(menuLabel, () => {
                        settings.save(key, !config[key]) ; sync.storageToUI()
                        notify(`${app.settings[key].label}: ${menu.state.words[+(key.includes('Disabled') ^ config[key])]}`)
                        menu.refresh() // to update state symbol/suffix
                    }))
                }
            })

            // Add About entry
            const aboutLabel = `üí° ${app.msgs.menuLabel_about} ${app.msgs.appName}`
            menu.ids.push(GM_registerMenuCommand(aboutLabel, modals.about.show))
        },

        refresh() {
            if (env.scriptManager == 'OrangeMonkey') return
            for (const id of menu.ids) { GM_unregisterMenuCommand(id) } menu.register()
        }
    }

    function updateCheck() {

        // Fetch latest meta
        const currentVer = GM_info.script.version
        xhr({
            method: 'GET', url: app.urls.update + '?t=' + Date.now(),
            headers: { 'Cache-Control': 'no-cache' },
            onload: response => { const updateAlertWidth = 377

                // Compare versions
                const latestVer = /@version +(.*)/.exec(response.responseText)[1]
                for (let i = 0 ; i < 4 ; i++) { // loop thru subver's
                    const currentSubVer = parseInt(currentVer.split('.')[i], 10) || 0,
                          latestSubVer = parseInt(latestVer.split('.')[i], 10) || 0
                    if (currentSubVer > latestSubVer) break // out of comparison since not outdated
                    else if (latestSubVer > currentSubVer) { // if outdated

                        // Alert to update
                        const updateModalID = siteAlert(`üöÄ ${app.msgs.alert_updateAvail}!`, // title
                            `${app.msgs.alert_newerVer} ${app.msgs.appName} `
                                + `(v${latestVer}) ${app.msgs.alert_isAvail}!  `
                                + '<a target="_blank" rel="noopener" style="font-size: 0.7rem" '
                                    + 'href="' + app.urls.gitHub + '/commits/main/greasemonkey/'
                                    + app.urls.update.replace(/.*\/(.*)meta\.js/, '$1user.js') + '"'
                                    + `> ${app.msgs.link_viewChanges}</a>`,
                            function update() { // button
                                modals.safeWinOpen(app.urls.update.replace('meta.js', 'user.js') + '?t=' + Date.now())
                            }, '', updateAlertWidth
                        )

                        // Localize button labels if needed
                        if (!config.userLanguage.startsWith('en')) {
                            const updateAlert = document.querySelector(`[id="${updateModalID}"]`),
                                  updateBtns = updateAlert.querySelectorAll('button')
                            updateBtns[1].textContent = app.msgs.btnLabel_update
                            updateBtns[0].textContent = app.msgs.btnLabel_dismiss
                        }

                        return
                }}

                // Alert to no update found, nav back
                siteAlert(`${app.msgs.alert_upToDate}!`, // title
                    `${app.msgs.appName} (v${currentVer}) ${app.msgs.alert_isUpToDate}!`, // msg
                    '', '', updateAlertWidth
                )
                modals.about.show()
    }})}

    // Define FEEDBACK functions

    function notify(msg, position = '', notifDuration = '', shadow = '') {
        if (config.notifDisabled && !msg.includes(app.msgs.menuLabel_modeNotifs)) return

        // Strip state word to append colored one later
        const foundState = menu.state.words.find(word => msg.includes(word))
        if (foundState) msg = msg.replace(foundState, '')

        // Show notification
        chatgpt.notify(`${app.symbol} ${msg}`, position, notifDuration, shadow || chatgpt.isDarkMode() ? '' : 'shadow')
        const notif = document.querySelector('.chatgpt-notif:last-child')

        // Append styled state word
        if (foundState) {
            const styledState = document.createElement('span')
            styledState.style.cssText = `color: ${
                foundState == menu.state.words[0] ? '#ef4848 ; text-shadow: rgba(255, 169, 225, 0.44) 2px 1px 5px'
                                                : '#5cef48 ; text-shadow: rgba(255, 250, 169, 0.38) 2px 1px 5px' }`
            styledState.append(foundState) ; notif.append(styledState)
        }
    }

    function siteAlert(title = '', msg = '', btns = '', checkbox = '', width = '') {
        return chatgpt.alert(title, msg, btns, checkbox, width )}

    // Define MODAL functions

    const modals = {
        about: {
            show() {

                // Show alert
                const chatgptJSver = (/chatgpt-([\d.]+)\.min/.exec(GM_info.script.header) || [null, ''])[1],
                    headingStyle = 'font-size: 1.15rem',
                    pStyle = 'position: relative ; left: 3px',
                    pBrStyle = 'position: relative ; left: 4px ',
                    aStyle = 'color: ' + ( chatgpt.isDarkMode() ? '#c67afb' : '#8325c4' ) // purple
                const aboutModalID = siteAlert(
                    app.msgs.appName, // title
                    `<span style="${headingStyle}"><b>üè∑Ô∏è <i>${app.msgs.about_version}</i></b>: </span>`
                        + `<span style="${pStyle}">${GM_info.script.version}</span>\n`
                    + `<span style="${headingStyle}"><b>‚ö° <i>${app.msgs.about_poweredBy}</i></b>: </span>`
                        + `<span style="${pStyle}"><a style="${aStyle}" href="${app.urls.chatgptJS}" target="_blank" rel="noopener">`
                        + 'chatgpt.js</a>' + ( chatgptJSver ? ( ' v' + chatgptJSver ) : '' ) + '</span>\n'
                    + `<span style="${headingStyle}"><b>üìú <i>${app.msgs.about_sourceCode}</i></b>:</span>\n`
                        + `<span style="${pBrStyle}"><a href="${app.urls.gitHub}" target="_blank" rel="nopener">`
                        + app.urls.gitHub + '</a></span>',
                    [ // buttons
                        function checkForUpdates() { updateCheck() },
                        function getSupport() { modals.safeWinOpen(app.urls.support) },
                        function leaveAReview() { // show new modal
                            const reviewModalID = chatgpt.alert(( app.msgs.alert_choosePlatform ) + ':', '',
                                [ function greasyFork() { modals.safeWinOpen(app.urls.greasyFork + '/feedback#post-discussion') },
                                function productHunt() { modals.safeWinOpen(app.urls.productHunt + '/reviews/new') }])
                            document.getElementById(reviewModalID).querySelector('button')
                                .style.display = 'none' }, // hide dismiss button
                        function moreChatGPTapps() { modals.safeWinOpen(app.urls.relatedApps) }
                    ], '', 478 // set width
                )

                // Re-format buttons to include emoji + localized label + hide Dismiss button
                for (const btn of document.getElementById(aboutModalID).querySelectorAll('button')) {
                    if (/updates/i.test(btn.textContent)) btn.textContent = (
                        'üöÄ ' + ( app.msgs.btnLabel_updateCheck ))
                    else if (/support/i.test(btn.textContent)) btn.textContent = (
                        'üß† ' + ( app.msgs.btnLabel_getSupport ))
                    else if (/review/i.test(btn.textContent)) btn.textContent = (
                        '‚≠ê ' + ( app.msgs.btnLabel_leaveReview ))
                    else if (/apps/i.test(btn.textContent)) btn.textContent = (
                        'ü§ñ ' + ( app.msgs.btnLabel_moreApps ))
                    else btn.style.display = 'none' // hide Dismiss button
                }
            }
        },

        safeWinOpen(url) { window.open(url, '_blank', 'noopener') } // to prevent backdoor vulnerabilities
    }

    // Define FACTORY functions

    const create = {

        style(content) {
            const style = document.createElement('style')
            if (content) style.innerText = content
            return style
        },

        svgElem(type, attrs) {
            const elem = document.createElementNS('http://www.w3.org/2000/svg', type)
            for (const attr in attrs) elem.setAttributeNS(null, attr, attrs[attr])
            return elem
        }
    }
    
    // Define CHATBAR functions
    
    const chatbar = {

        get() {
            let chatbar = document.querySelector(sites[site].selectors.input)
            const parentLvls = /chatgpt|openai/.test(site) ? 3 : 2
            for (let i = 0 ; i < parentLvls ; i++) chatbar = chatbar?.parentNode
            return chatbar
        },

        async isLoaded(timeout = null) {
            const timeoutPromise = timeout ? new Promise(resolve => setTimeout(() => resolve(false), timeout)) : null
            const isLoadedPromise = new Promise(resolve => {
                if (document.querySelector(sites[site].selectors.input)) resolve(true)
                else new MutationObserver((_, obs) => {
                    if (document.querySelector(sites[site].selectors.input)) {
                        obs.disconnect() ; resolve(true) }
                }).observe(document.body, { childList: true, subtree: true })
            })
            return await ( timeoutPromise ? Promise.race([isLoadedPromise, timeoutPromise]) : isLoadedPromise )
        },

        tweak() {
            const chatbarDiv = chatbar.get() ; if (!chatbarDiv) return
            if (/chatgpt|openai/.test(site)) {
                const inputArea = chatbarDiv.querySelector(sites[site].selectors.input)
                if (inputArea) {
                    const widths = { chatbar: chatbarDiv.getBoundingClientRect().width }
                    const visibleBtnTypes = ['fullScreen', 'fullWindow', 'wideScreen', 'newChat', 'send']
                        .filter(type => !(type == 'fullWindow' && !sites[site].hasSidebar)
                                     && !(type == 'newChat' && config.ncbDisabled))
                    visibleBtnTypes.forEach(btnType =>
                        widths[btnType] = btns[btnType]?.getBoundingClientRect().width
                                       || document.querySelector(`${sites[site].selectors.btns.send}, ${sites[site].selectors.btns.stop}`)
                                              ?.getBoundingClientRect().width || 0 )
                    const totalBtnWidths = visibleBtnTypes.reduce((sum, btnType) => sum + widths[btnType], 0)
                    inputArea.parentNode.style.width = `${ // expand to close gap w/ buttons
                        widths.chatbar - totalBtnWidths -( env.browser.isFF ? 60 : 43 )}px`
                    inputArea.style.width = '100%' // rid h-scrollbar
                }
            } else if (site == 'poe') {
                const attachFileBtn = chatbarDiv.querySelector('button[class*="File"]'),
                      clearBtn = document.querySelector('[class*="ChatBreakButton"]')
                if (attachFileBtn) { // left-align attach file button
                    attachFileBtn.style.cssText = 'position: absolute ; left: 1rem ; bottom: 0.35rem'
                    document.querySelector(sites[site].selectors.input).style.padding = '0 13px 0 40px' // accommodate new btn pos
                }
                btns.newChat.style.top = clearBtn ? '-1px' : 0
                btns.newChat.style.marginRight = clearBtn ? '2px' : '1px'
            }
        }
    }

    // Define BUTTON props/functions

    const btns = {

        svgElems: {
            fullScreen: {
                off: [
                    create.svgElem('path', { stroke: 'none', d: 'm10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z' }),
                    create.svgElem('path', { stroke: 'none', d: 'm20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z' }),
                    create.svgElem('path', { stroke: 'none', d: 'm24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z' }),
                    create.svgElem('path', { stroke: 'none', d: 'M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z' }) ],
                on: [
                    create.svgElem('path', { stroke: 'none', d: 'm14,14-4,0 0,2 6,0 0,-6 -2,0 0,4 0,0 z' }),
                    create.svgElem('path', { stroke: 'none', d: 'm22,14 0,-4 -2,0 0,6 6,0 0,-2 -4,0 0,0 z' }),
                    create.svgElem('path', { stroke: 'none', d: 'm20,26 2,0 0,-4 4,0 0,-2 -6,0 0,6 0,0 z' }),
                    create.svgElem('path', { stroke: 'none', d: 'm10,22 4,0 0,4 2,0 0,-6 -6,0 0,2 0,0 z' }) ]
            },

            fullWin: [
                create.svgElem('rect', { fill: 'none', x: '3', y: '3', width: '17', height: '17', rx: '2', ry: '2' }),
                create.svgElem('line', { x1: '9', y1: '3', x2: '9', y2: '21' })
            ],

            newChat: [ create.svgElem('path', { stroke: 'none', d: 'M22,13h-4v4h-2v-4h-4v-2h4V7h2v4h4V13z' }) ],

            wideScreen: {
                off: [
                    create.svgElem('path', { stroke: 'none', 'fill-rule': 'evenodd',
                        d: 'm28,11 0,14 -20,0 0,-14 z m-18,2 16,0 0,10 -16,0 0,-10 z' }) ],
                on: [
                    create.svgElem('path', { stroke: 'none', 'fill-rule': 'evenodd',
                        d: 'm26,13 0,10 -16,0 0,-10 z m-14,2 12,0 0,6 -12,0 0,-6 z' }) ]
            }
        },

        insert() {

            // Create/store buttons if not done before
            if (!btns.wideScreen) {
                const validBtnTypes = ['fullScreen', 'fullWindow', 'wideScreen', 'newChat']
                    .filter(type => !(type == 'fullWindow' && !sites[site].hasSidebar))
                const bOffset = site == 'poe' ? -1.5 : -13, rOffset = site == 'poe' ? -6 : -4
                validBtnTypes.forEach(async (btnType, idx) => {
                    btns[btnType] = document.createElement('div')
                    btns[btnType].id = btnType + '-btn' // for toggle.tooltip()
                    btns.updateSVG(btnType) // insert icon
                    btns[btnType].style.cssText = 'position: relative ; top: 0 ;'
                                                + `right: ${ rOffset + idx * bOffset }px` // position left of prev button
                    btns[btnType].style.cursor = 'pointer' // add finger cursor
                    if (site == 'poe') btns[btnType].style.position = 'relative' // override static pos
                    if (/chatgpt|openai|perplexity/.test(site)) { // assign classes + tweak styles
                        const sendBtn = await new Promise(resolve => {
                            const sendBtn = document.querySelector(sites[site].selectors.btns.send)
                            if (sendBtn) resolve(sendBtn)
                            else new MutationObserver((_, obs) => {
                                const sendBtn = document.querySelector(sites[site].selectors.btns.send)
                                if (sendBtn) { obs.disconnect() ; resolve(sendBtn) }
                            }).observe(document.body, { childList: true, subtree: true })
                        })
                        btns[btnType].setAttribute('class', sendBtn.classList.toString() || '')
                        btns[btnType].style.backgroundColor = 'transparent' // remove dark mode overlay
                        btns[btnType].style.borderColor = 'transparent' // remove dark mode overlay
                    } else if (site == 'poe') // lift buttons slightly
                        btns[btnType].style.marginBottom = ( btnType == 'newChat' ? '0.45' : '0.2' ) + 'rem'

                    // Add hover/click listeners
                    btns[btnType].onmouseover = btns[btnType].onmouseout = toggle.tooltip
                    btns[btnType].onclick = () => {
                        if (btnType == 'newChat')
                            document.querySelector(sites[site].selectors.btns.newChat)?.click()
                        else {
                            if (/openai|chatgpt/.test(site) // remove lingering tooltip in at least FF
                                && /wideScreen|fullWindow/.test(btnType)) tooltipDiv.style.opacity = 0
                            toggle.mode(btnType)
                        }
                    }
                })
                btns.updateColor()
            }

            // Init chatbar
            const chatbarDiv = chatbar.get()
            if (!chatbarDiv || chatbarDiv.contains(btns.wideScreen)) return // if chatbar missing or buttons aren't, exit
    
            // Insert buttons
            const btnsToInsert = [ btns.newChat, btns.wideScreen, btns.fullWindow, btns.fullScreen, tooltipDiv]
                .filter(btn => btn) // filter out undefined btns.fullWindow if not initted as guest on chatgpt.com
            const parentToInsertInto = site == 'perplexity' ? chatbarDiv.lastChild // Pro spam toggle parent
                                     : chatbarDiv,
                  elemToInsertBefore = /openai|chatgpt/.test(site) ? chatbarDiv.lastChild
                                     : site == 'perplexity' ? parentToInsertInto.firstChild // Pro spam toggle
                                     : chatbarDiv.children[1]
            btnsToInsert.forEach(btn => parentToInsertInto.insertBefore(btn, elemToInsertBefore))

            setTimeout(() => chatbar.tweak(), 1)
        },

        updateColor() {
            const prevColor = btns.color
            btns.color = (
                /chatgpt|openai/.test(site) ? (
                    document.querySelector('.dark.bg-black') || chatgpt.isDarkMode() ? 'white' : '#202123' )
              : site == 'perplexity' ? (
                    document.documentElement.dataset.colorScheme == 'dark' ? 'oklch(var(--dark-text-color-100)/var(--tw-text-opacity))'
                                                                           : 'oklch(var(--text-color-100)/var(--tw-text-opacity))' )
              : 'currentColor' )
            if (btns.color != prevColor)
                ['newChat', 'wideScreen', 'fullWindow', 'fullScreen'].forEach(btnType => {
                    if (btns[btnType]) btns[btnType].style.fill = btns[btnType].style.stroke = btns.color })
        },

        updateSVG(mode, state = '') {
    
            // Pick appropriate button/elements
            const [btn, ONelems, OFFelems] = (
                mode == 'fullScreen' ? [btns.fullScreen, btns.svgElems.fullScreen.on, btns.svgElems.fullScreen.off]
              : mode == 'fullWindow' ? [btns.fullWindow, btns.svgElems.fullWin, btns.svgElems.fullWin]
              : mode == 'wideScreen' ? [btns.wideScreen, btns.svgElems.wideScreen.on, btns.svgElems.wideScreen.off]
                                     : [btns.newChat, btns.svgElems.newChat, btns.svgElems.newChat])
            // Set SVG attributes
            const btnSVG = btn?.querySelector('svg') || document.createElementNS('http://www.w3.org/2000/svg', 'svg')
            btnSVG.setAttribute('height', 18) // prevent shrinking
            if (mode == 'fullWindow') { // stylize full-window button
                btnSVG.setAttribute('stroke', btns.color)
                btnSVG.setAttribute('fill', 'none')
                btnSVG.setAttribute('stroke-width', '2')
                const btnSize = site == 'perplexity' ? 18 : 'poe' ? '2em' : 17
                btnSVG.setAttribute('height', btnSize) ; btnSVG.setAttribute('width', btnSize)
            }
            btnSVG.setAttribute('viewBox', (
                mode == 'newChat' ? '11 6 ' : mode == 'fullWindow' ? '-2 -0.5 ' : '8 8 ' ) // move to XY coords to crop whitespace
            + ( mode == 'newChat' ? '13 13' : mode == 'fullWindow' ? '24 24' : '20 20' ) // shrink to fit size) // set pre-tweaked viewbox
            )
            btnSVG.style.pointerEvents = 'none' // prevent triggering tooltips twice
            if (/chatgpt|openai/.test(site)) // override button resizing
                btnSVG.style.height = btnSVG.style.width = '1.3rem'
    
            // Update SVG elements
            while (btnSVG.firstChild) btnSVG.firstChild.remove()
            const svgElems = config[mode] || state.toLowerCase() == 'on' ? ONelems : OFFelems
            svgElems.forEach(elem => btnSVG.append(elem))
    
            // Update SVG
            if (!btn.contains(btnSVG)) btn.append(btnSVG)
        }
    }

    // Define UPDATE functions

    const update = {

        style: {

            chatbar() {
                chatbarStyle.innerText = (
                    /chatgpt|openai/.test(site) ? ( config.widerChatbox ? ''
                        : `main form { width: ${chatbar.nativeWidth}px !important ; margin: auto }` )
                  : site == 'poe' ? ( !config.widerChatbox ? ''
                        : '[class*=footerInner] { width: 100% }' )
                  : '' )
            },

            tweaks() {
                tweaksStyle.innerText = (
                    '.chatgpt-notif, [class*="-modal"] { font-family: system-ui !important }'
                  + `[class*="-modal"] { color: ${ chatgpt.isDarkMode() ? 'white' : 'black' }}`
                  + '[class*="modal-close-btn"] svg { height: 10px }'
                  + '[class*="-modal"] h2 { font-size: 24px ; font-weight: 600 }'
                  + '[class*="-modal"] p { font-size: 16px }'
                  + '[class*="-modal"] button { border-radius: 0 !important ; padding: 5px !important ; min-width: 102px }'
                  + ( /chatgpt|openai/.test(site) ? (
                          ( '[id$="-btn"]:hover { opacity: 80% !important }' ) // dim chatbar btns on hover
                          + 'main { overflow: clip !important }' // prevent h-scrollbar on sync.mode('fullWindow) => delayed chatbar.tweak()
                    ) : site == 'poe' ? 'button[class*="Voice"] { margin: 0 -3px 0 -8px }' : '' )) // h-pad mic btn for even spread
                  + ( config.tcbDisabled == false ? tcbStyle : '' ) // expand text input vertically
                  + ( config.hiddenHeader ? hhStyle : '' ) // hide header
                  + ( config.hiddenFooter ? hfStyle : '' ) // hide footer
                  + `#newChat-btn { display: ${ config.ncbDisabled == true ? 'none' : 'flex' }}`
            },

            wideScreen() {
                wideScreenStyle.innerText = (
                    /chatgpt|openai/.test(site) ? (
                        '.text-base { max-width: 100% !important }' // widen outer container
                      + '.text-base:nth-of-type(2) { max-width: 97% !important }' // widen inner container
                      + '#__next > div > div.flex { width: 100px }'  // prevent sidebar shrinking when zoomed
                  ) : site == 'perplexity' ? (
                        `${sites[site].selectors.header} ~ div,` // outer container
                      + `${sites[site].selectors.header} ~ div > div` // inner container
                          + '{ max-width: 100% }' // ...widen them
                      + '.col-span-8 { width: 154% }' // widen inner-left container
                      + '.col-span-4 { width: 13.5% ; position: absolute ; right: 0 }' // narrow right-bar
                  ) : site == 'poe' ? (
                        '[class*="ChatMessagesView"] { width: 100% !important }' // widen outer container
                      + '[class^="Message"] { max-width: 100% !important }' ) // widen speech bubbles
                  : '' )
            }
        },

        tooltip(btnType) { // text & position
            const visibleBtnTypes = ['fullScreen', 'fullWindow', 'wideScreen', 'newChat']
                .filter(type => !(type == 'fullWindow' && !sites[site].hasSidebar))
            const ctrAddend = ( site == 'perplexity' ? ( location.pathname == '/' ? 100 : 106 )
                              : site == 'poe' ? 45 : 13 ) +25,
                  spreadFactor = site == 'perplexity' ? 26.85 : site == 'poe' ? 34 : 30.55,
                  iniRoffset = spreadFactor * ( visibleBtnTypes.indexOf(btnType) +1 ) + ctrAddend
            tooltipDiv.innerText = app.msgs['tooltip_' + btnType + (
                !/full|wide/i.test(btnType) ? '' : (config[btnType] ? 'OFF' : 'ON'))]
            tooltipDiv.style.right = `${ // x-pos
                iniRoffset - tooltipDiv.getBoundingClientRect().width /2 }px`
            tooltipDiv.style.bottom = ( // y-pos
                site == 'perplexity' ? ( location.pathname != '/' ? '58px' :
                    ( !document.querySelector(sites[site].selectors.btns.login) ? 'revert-layer' : '52.5vh' ))
                                     : '50px' )
        }
    }

    // Define TOGGLE functions

    const toggle = {

        mode(mode, state = '') {
            switch (state.toUpperCase()) {
                case 'ON' : activateMode(mode) ; break
                case 'OFF' : deactivateMode(mode) ; break
                default : ( mode == 'wideScreen' ? document.head.contains(wideScreenStyle)
                          : mode == 'fullWindow' ? isFullWin() : chatgpt.isFullScreen() ) ? deactivateMode(mode)
                                                                                          : activateMode(mode)
            }

            function activateMode(mode) {
                if (mode == 'wideScreen') { document.head.append(wideScreenStyle) ; sync.mode('wideScreen') }
                else if (mode == 'fullWindow') {
                    const sidebarToggle = document.querySelector(sites[site].selectors.btns.sidebarToggle)
                    if (sidebarToggle) sidebarToggle.click()
                    else { document.head.append(fullWinStyle) ; sync.mode('fullWindow') }
                } else if (mode == 'fullScreen') document.documentElement.requestFullscreen()
            }
        
            function deactivateMode(mode) {
                if (mode == 'wideScreen') {
                    wideScreenStyle.remove() ; sync.mode('wideScreen')
                } else if (mode == 'fullWindow') {
                    const sidebarToggle = document.querySelector(sites[site].selectors.btns.sidebarToggle)
                    if (sidebarToggle) sidebarToggle.click()
                    else { fullWinStyle.remove() ; sync.mode('fullWindow') }
                } else if (mode == 'fullScreen') {
                    if (config.f11) siteAlert(app.msgs.alert_pressF11, `${app.msgs.alert_f11reason}.`)
                    else document.exitFullscreen().catch(err => console.error(app.symbol + ' ¬ª Failed to exit fullscreen', err))
                }
            }
        },

        tooltip(event) {
            update.tooltip(event.currentTarget.id.replace(/-btn$/, ''))
            tooltipDiv.style.opacity = event.type == 'mouseover' ? 1 : 0
        }   
    }

    // Define SYNC functions

    const sync = {

        storageToUI() { // from toolbar menu toggles
            sync.fullerWin() // sync FW
            update.style.tweaks() // sync TCB/NCB/HH/HF
            update.style.chatbar() // sync WCB
            if (/chatgpt|openai/.test(site)) chatbar.tweak() // update inner width
        },

        fullerWin() {
            if (config.fullWindow && config.fullerWindows && !config.wideScreen) { // activate fuller windows
                document.head.append(wideScreenStyle) ; btns.updateSVG('wideScreen', 'on')
            } else if (!config.fullWindow) { // de-activate fuller windows
                fullWinStyle.remove() // to remove style too so sidebar shows
                if (!config.wideScreen) { // disable widescreen if result of fuller window
                    wideScreenStyle.remove() ; btns.updateSVG('wideScreen', 'off')
            }}
        },

        mode(mode) { // setting + icon + tooltip + chatbar
            const state = ( mode == 'wideScreen' ? !!document.getElementById('wideScreen-mode')
                          : mode == 'fullWindow' ? isFullWin()
                                                 : chatgpt.isFullScreen() )
            settings.save(mode, state) ; btns.updateSVG(mode) ; update.tooltip(mode)
            if (mode == 'fullWindow') sync.fullerWin()
            if (/chatgpt|openai/.test(site)) setTimeout(() => chatbar.tweak(), // update inner width
                mode == 'fullWindow' && ( config.wideScreen || config.fullerWindows )
                                     && config.widerChatbox ? 111 : 0) // delay if toggled to/from active WCB to avoid inaccurate width
            notify(`${app.msgs['mode_' + mode]} ${ state ? 'ON' : 'OFF' }`)
            config.modeSynced = true ; setTimeout(() => config.modeSynced = false, 100) // prevent repetition
        }
    }

    // Define UTILITY functions

    function isFullWin() {
        return site == 'poe' ? !!document.getElementById('fullWindow-mode')
            : !sites[site].hasSidebar // false if sidebar non-existent
           || /\d+/.exec(getComputedStyle(document.querySelector(sites[site].selectors.sidebar))?.width || '')[0] < 100
    }

    function cssSelectorize(classList) {
        return classList.toString()
            .replace(/([:[\]\\])/g, '\\$1') // escape special chars :[]\
            .replace(/^| /g, '.') // prefix w/ dot, convert spaces to dots
    }

    // Run MAIN routine

    // Create browser TOOLBAR MENU or DISABLE SCRIPT if extension installed
    const extensionInstalled = await Promise.race([
        new Promise(resolve => {
            (function checkExtensionInstalled() {
                if (document.querySelector('[cwm-extension-installed]')) resolve(true)
                else setTimeout(checkExtensionInstalled, 200)
            })()
        }), new Promise(resolve => setTimeout(() => resolve(false), 1500))])
    if (extensionInstalled) { // disable script/menu
        GM_registerMenuCommand(menu.state.symbols[0] + ' ' + ( app.msgs.menuLabel_disabled ),
            () => { return }) // disable menu
        return // exit script

    } else menu.register() // create functional menu

    // Init UI props
    if (/openai|chatgpt/.test(site)) {
        const obsConfig = { childList: true, subtree: true }
        sites[site].hasSidebar = await Promise.race([
            new Promise(resolve => { // true if sidebar toggle loads
                if (document.querySelector(sites[site].selectors.btns.sidebarToggle)) resolve(true)
                else new MutationObserver((_, obs) => {
                    if (document.querySelector(sites[site].selectors.btns.sidebarToggle)) {
                        obs.disconnect() ; resolve(true) }
                }).observe(document.body, obsConfig)
            }),
            new Promise(resolve => { // false if login button loads
                if (document.querySelector(sites[site].selectors.btns.login)) resolve(false)
                else new MutationObserver((_, obs) => {
                    if (document.querySelector(sites[site].selectors.btns.login)) {
                        obs.disconnect() ; resolve(false) }
                }).observe(document.body, obsConfig)
            }),
            new Promise(resolve =>  // null if 3s passed
                setTimeout(() => resolve(null), 3000))
        ])
        sites[site].selectors.footer = await Promise.race([
            new Promise(resolve => { // class of footer container
                const footerDiv = chatgpt.getFooterDiv()
                if (footerDiv) resolve(cssSelectorize(footerDiv.classList))
                else new MutationObserver((_, obs) => {
                    const footerDiv = chatgpt.getFooterDiv()
                    if (footerDiv) { obs.disconnect() ; resolve(cssSelectorize(footerDiv.classList)) }
                }).observe(document.body, obsConfig)
            }),
            new Promise(resolve =>  // null if 500ms passed
                setTimeout(() => resolve(null), 500))
        ])
    }

    // Init FULL-MODE states
    config.fullScreen = chatgpt.isFullScreen()
    if (sites[site].selectors.btns.sidebarToggle) // site has native FW state
         config.fullWindow = isFullWin() // ...so match it
    else settings.load('fullWindow') // otherwise load CWM's saved state

    // Stylize ALERTS
    if (!document.getElementById('chatgpt-alert-override-style')) {
        const chatgptAlertStyle = create.style()
        chatgptAlertStyle.id = 'chatgpt-alert-override-style'
        chatgptAlertStyle.innerText = (
            ( chatgpt.isDarkMode() ? '.chatgpt-modal > div { border: 1px solid white }' : '' )
          + '.chatgpt-modal button {'
              + 'font-size: 0.77rem ; text-transform: uppercase ;'
              + 'border-radius: 0 !important ; padding: 5px !important ; min-width: 102px }'
          + '.chatgpt-modal button:hover { transform: scale(1.055) }'
          + '.modal-buttons { margin-left: -13px !important }'
        )
        document.head.append(chatgptAlertStyle)
    }

    // Create/stylize TOOLTIP div
    const tooltipDiv = document.createElement('div')
    tooltipDiv.classList.add('cwm-tooltip')
    document.head.append(create.style('.cwm-tooltip {'
        + 'background-color: rgba(0, 0, 0, 0.71) ; padding: 5px ; border-radius: 6px ; border: 1px solid #d9d9e3 ;' // bubble style
        + 'font-size: 0.85rem ; color: white ;' // font style
        + 'box-shadow: 4px 6px 16px 0 rgb(0 0 0 / 38%) ;' // drop shadow
        + 'position: absolute ; bottom: 58px ; opacity: 0 ; transition: opacity 0.1s ; z-index: 9999 ;' // visibility
        + '-webkit-user-select: none ; -moz-user-select: none ; -ms-user-select: none ; user-select: none }' // disable select
    ))

    // Create/apply general style TWEAKS
    const tweaksStyle = create.style(),
          tcbStyle = ( // heighten chatbox
              /openai|chatgpt/.test(site) ? `div[class*="prose"]:has(${sites[site].selectors.input})`
                                          : sites[site].selectors.input )
                  + '{ max-height: 68vh }',
          hhStyle = sites[site].selectors.header + '{ display: none !important }' // hide header
                  + ( /chatgpt|openai/.test(site) ? 'main { padding-top: 12px }' : '' ), // increase top-padding
          hfStyle = sites[site].selectors.footer + '{ visibility: hidden ;' // hide footer text
                                                 + '  height: 3px ; overflow: clip }' // reduce height

    update.style.tweaks() ; document.head.append(tweaksStyle)

    // Create WIDESCREEN style
    const wideScreenStyle = create.style()
    wideScreenStyle.id = 'wideScreen-mode' // for sync.mode()
    if (!chatbar.get()) await chatbar.isLoaded()
    if (/chatgpt|openai/.test(site)) // store native chatbar width for Wider Chatbox style
        chatbar.nativeWidth = /\d+/.exec(getComputedStyle(document.querySelector('main form')).width)[0]
    update.style.wideScreen()

    // Create FULL-WINDOW style
    const fullWinStyle = create.style()
    fullWinStyle.id = 'fullWindow-mode' // for sync.mode()
    fullWinStyle.innerText = sites[site].selectors.sidebar + '{ display: none }'

    // Create/append CHATBAR style
    const chatbarStyle = create.style()
    update.style.chatbar() ; document.head.append(chatbarStyle)

    // Insert BUTTONS
    await chatbar.isLoaded() ; btns.insert()

    // Restore PREV SESSION's state
    if (config.wideScreen) toggle.mode('wideScreen', 'ON')
    if (config.fullWindow && sites[site].hasSidebar) {
        if (sites[site].selectors.btns.sidebarToggle) // site has own FW config
             sync.mode('fullWindow') // ...so sync w/ it
        else toggle.mode('fullWindow', 'on') // otherwise self-toggle
    }

    // Monitor NODE CHANGES to maintain button visibility + update colors
    let isTempChat = false
    const nodeObserver = new MutationObserver(([mutation]) => {
        btns.insert() // again or they constantly disappear
        if (/chatgpt|openai/.test(site)) { // Update button colors on ChatGPT scheme or temp chat toggle
            const chatbarIsBlack = !!document.querySelector('div[class*="bg-black"]:not([id$="-btn"])')
            if (chatbarIsBlack != isTempChat // temp chat toggled
                || mutation.target == document.documentElement && mutation.attributeName == 'class') { // scheme toggled
                    btns.updateColor() ; isTempChat = chatbarIsBlack }            
        }
    })
    nodeObserver.observe( // <html> for page scheme toggles
        document.documentElement, { attributes: true })
    nodeObserver.observe( // for chatbar changes
        document.querySelector(/chatgpt|openai|perplexity/.test(site) ? 'main' : 'head'),
        { attributes: true, subtree: true }
    )

    // Monitor SIDEBAR to update full-window setting
    if (sites[site].selectors.btns.sidebarToggle && !!sites[site].hasSidebar) {
        const sidebarObserver = new MutationObserver(async () => {
            await new Promise(resolve => setTimeout(resolve, site == 'perplexity' ? 250 : 0))
            const fullWinState = isFullWin()
            if ((config.fullWindow && !fullWinState) || (!config.fullWindow && fullWinState))
                if (!config.modeSynced) sync.mode('fullWindow')
        })
        setTimeout(() => { // delay half-sec before observing to avoid repeated toggles from nodeObserver
            let obsTarget = document.querySelector(sites[site].selectors.sidebar)
            if (site == 'perplexity') obsTarget = obsTarget.parentNode
            sidebarObserver.observe(obsTarget, { attributes: true })
        }, 500)
    }

    // Add RESIZE LISTENER to update full screen setting/button + disable F11 flag
    window.addEventListener('resize', () => {
        const fullScreenState = chatgpt.isFullScreen()
        if (config.fullScreen && !fullScreenState) { sync.mode('fullScreen') ; config.f11 = false } // exiting full screen
        else if (!config.fullScreen && fullScreenState) sync.mode('fullScreen') // entering full screen
    })

    // Add KEY LISTENER to enable flag on F11 + stop generating text on ESC
    document.addEventListener('keydown', event => {
        if ((event.key == 'F11' || event.keyCode == 122) && !config.fullScreen) config.f11 = true
        else if ((event.key == 'Escape' || event.keyCode == 27) && !chatgpt.isIdle()) chatgpt.stop()
    })

})()
